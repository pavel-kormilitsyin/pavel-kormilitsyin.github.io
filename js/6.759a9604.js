(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{"404c":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-page",[t.$q.platform.is.mobile?t._e():s("mailings-desktop"),t.$q.platform.is.mobile?s("mailings-mobile"):t._e()],1)},i=[],n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("q-page",[t.listMailings?s("div",{staticClass:"row items-center head-page"},[s("span",{staticClass:"subtitle self-end"},[t._v("Уведомления")]),t.countNewMailings>0?s("span",{staticClass:"q-ml-sm subtitle-small self-end"},[t._v("\n       "+t._s(t.countNewMailings)+" "+t._s(t.getNoun(t.countNewMailings,"непрочитанное","непрочитанных","непрочитанных"))+"\n      ")]):t._e(),s("q-space"),t.$q.screen.lt.sm?t._e():s("q-btn",{staticClass:"btn-white row items-center q-ml-lg",attrs:{"no-caps":"",flat:""},on:{click:function(e){return t.$router.go(-1)}}},[s("q-icon",{staticStyle:{transform:"rotate(180deg)"},attrs:{name:"img:icons/Arrow_Small.svg",size:"11px"}}),s("span",{staticClass:"q-ml-md"},[t._v("Назад")])],1)],1):t._e(),t.mailings?s("div",{staticClass:"content-page"},t._l(t.mailings,(function(e){return s("q-card",{key:e.id,staticClass:"card-shadow q-mb-sm card-mailing"},[s("q-card-section",{staticClass:"row items-center q-pa-lg relative-position"},[e.readed?t._e():s("div",{staticClass:"new"}),s("div",{staticClass:"col font-sspro-sr"},[s("div",{staticClass:"text-h6"},[t._v(t._s(t.formattedDate(e.created)))]),s("div",{staticClass:"text-h6 q-mt-sm q-mb-sm text-bold",class:{"text-bold":!e.readed}},[t._v(t._s(e.title))]),s("div",{staticClass:"text-h6",class:{"text-bold":!e.readed},domProps:{innerHTML:t._s(e.text)}})]),e.readed?t._e():s("div",{staticClass:"col-auto"},[s("div",{staticClass:"checkbox-custom"},[s("label",{attrs:{for:"ch_"+e.id}},[s("span",{staticClass:"checkbox-span"},[s("span",{class:e.state?"true":"false"})]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.state,expression:"mailing.state"}],staticClass:"checkbox",attrs:{id:"ch_"+e.id,type:"checkbox"},domProps:{checked:Array.isArray(e.state)?t._i(e.state,null)>-1:e.state},on:{change:function(s){var a=e.state,i=s.target,n=!!i.checked;if(Array.isArray(a)){var l=null,c=t._i(a,l);i.checked?c<0&&t.$set(e,"state",a.concat([l])):c>-1&&t.$set(e,"state",a.slice(0,c).concat(a.slice(c+1)))}else t.$set(e,"state",n)}}})])])])])],1)})),1):t._e(),t.nextPage?s("div",{staticClass:"full-width row justify-center q-pt-none q-pb-md q-pt-md"},[s("q-btn",{staticClass:"text-bold text-accent text-h6",attrs:{"no-caps":"",flat:"",icon:"south",label:"Загрузить еще"},on:{click:function(e){return t.loadMailings()}}})],1):t._e(),t.selected.length>0?s("div",{staticClass:"bg-grad-header row items-center justify-center shadow-3",staticStyle:{position:"fixed",bottom:"0","z-index":"1000",width:"100%",height:"80px"}},[s("q-btn",{staticClass:"text-accent",attrs:{"no-caps":"",flat:"",icon:"check",label:"Отметить выделенные ("+t.selected.length+") как прочитанные"},on:{click:function(e){return t.setMarkedSelected()}}})],1):t._e()])],1)},l=[],c=(s("99af"),s("4de4"),s("caad"),s("c975"),s("e260"),s("a434"),s("d3b7"),s("e6cf"),s("ac1f"),s("2532"),s("3ca3"),s("1276"),s("ddb0"),s("6374")),o=s.n(c),r=s("ded3"),d=s.n(r),u=(s("bc3a"),s("2f62")),m=s("c1df"),f=s.n(m),g=(s("957c"),{name:"MailingsDsktop",data:function(){return{mailings:[],nextPage:null}},methods:d()(d()({},Object(u["b"])(["getListMailings","setReadedMailing"])),{},{formattedDate:function(t){var e=f()(t).format("LLL").split("г.,");return e[0]+" "+e[1]},loadMailings:function(){var t=this,e=this.nextPage?{url:this.nextPage}:{};this.getListMailings(e).then((function(e){var s,a=o()(e.data.results);try{for(a.s();!(s=a.n()).done;){var i=s.value;t.$set(i,"state",!1)}}catch(n){a.e(n)}finally{a.f()}t.mailings=0==t.mailings.length?e.data.results:t.mailings.concat(e.data.results),t.nextPage=e.data.next}))},setMarkedSelected:function(){var t,e=this,s=[],a=o()(this.selected);try{for(a.s();!(t=a.n()).done;){var i=t.value;s.push(this.setReadedMailing({id:i}))}}catch(n){a.e(n)}finally{a.f()}Promise.all(s).then((function(t){e.countNewMailings-=e.selected.length;var s,a=o()(e.mailings);try{for(a.s();!(s=a.n()).done;){var i=s.value;if(e.selected.includes(i.id)){e.$set(i,"readed",!0);var l=e.selected.indexOf(i.id);-1!==l&&e.selected.splice(l,1)}}}catch(n){a.e(n)}finally{a.f()}}))}}),computed:d()(d()({},Object(u["c"])(["listMailings","currCat"])),{},{selected:function(){var t,e=[],s=_.filter(this.mailings,{state:!0}),a=o()(s);try{for(a.s();!(t=a.n()).done;){var i=t.value;e.push(i.id)}}catch(n){a.e(n)}finally{a.f()}return e}}),mounted:function(){this.loadMailings()}}),p=g,v=s("2877"),h=s("9989"),b=s("2c91"),C=s("9c40"),x=s("0016"),q=s("f09f"),w=s("a370"),M=s("eebe"),y=s.n(M),k=Object(v["a"])(p,n,l,!1,null,null,null),P=k.exports;y()(k,"components",{QPage:h["a"],QSpace:b["a"],QBtn:C["a"],QIcon:x["a"],QCard:q["a"],QCardSection:w["a"]});var $=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-page",[s("q-card",{staticClass:"lessons transparent",staticStyle:{"border-radius":"0 !important"},attrs:{flat:""}},[s("q-card-section",{staticClass:"lesson-top relative-position full-width"},[s("div",{staticClass:"row items-center"},[s("div",{staticClass:"col-auto"},[s("q-btn",{staticClass:"q-pr-md",attrs:{dense:"",round:"",flat:""},on:{click:function(e){return t.$router.go(-1)}}},[s("q-icon",{staticStyle:{transform:"rotate(180deg)"},attrs:{name:"img:icons/schedule.svg",size:"20px"}})],1)],1),s("div",{staticClass:"col"},[s("div",{staticClass:"row items-center"},[s("div",{staticClass:"col"},[s("div",{staticClass:"lesson-head"},[t._v("Уведомления")])])]),s("div",{staticClass:"row q-mt-xs relative-position q-mt-sm"},[s("div",{staticClass:"col text-left"},[s("div",{staticClass:"lesson-subtitle"},[s("div",{staticClass:"subtitle-small self-end ellipsis"},[t._v("\n                  Всего: "),s("b",[t._v(t._s(t.mailings.length))]),t.countNewMailings>0?s("span",{staticClass:"q-ml-md"},[t._v("Непрочитанных: "),s("span",{staticClass:"text-accent"},[t._v(t._s(t.countNewMailings))])]):t._e()]),s("q-space")],1)])])])])])],1),s("div",{staticClass:"q-pl-sm q-pr-sm q-pt-sm full-width"},t._l(t.mailings,(function(e){return s("div",{staticClass:"mailing-item relative-position"},[e.readed?t._e():s("div",{staticClass:"new"}),s("div",{staticClass:"q-pa-md relative-position"},[s("q-btn",{staticClass:"absolute-top-right",attrs:{round:"",flat:""},on:{click:function(s){return t.openClose(e)}}},[s("q-icon",{style:{transform:e.state?"rotate(180deg)":"rotate(0)"},attrs:{name:"img:icons/Arrow_Dropdown_R.svg",size:"12px"}})],1),s("div",{staticClass:"font-sspro-sr",staticStyle:{"font-size":"13px"}},[t._v(t._s(t.formattedDate(e.created)))]),s("div",{staticClass:"row items-center full-width"},[s("div",{staticClass:"col-12 text-primary q-pr-lg q-mt-sm text-bold",class:{"ellipsis-2-lines":!e.state}},[t._v(t._s(e.title))]),e.state?s("div",{staticClass:"col-12 text-primary q-pr-lg q-mt-sm"},[t._v(t._s(e.text))]):t._e()])],1)])})),0),t.nextPage?s("div",{staticClass:"full-width row justify-center q-pt-none q-pb-md q-pt-md"},[s("q-btn",{staticClass:"text-bold text-accent",attrs:{"no-caps":"",flat:"",icon:"south",label:"Загрузить еще"},on:{click:function(e){return t.loadMailings()}}})],1):t._e()],1)},L=[],Q=s("9f3a"),S={name:"MailingsMobile",components:{PageLoader:Q["a"]},data:function(){return{pageIsLoad:!1,mailings:[],nextPage:null}},methods:d()(d()({},Object(u["b"])(["getListMailings","setReadedMailing"])),{},{openClose:function(t){t.state=!t.state,t.state&&!t.readed&&this.setReadedMailing({id:t.id}).then((function(e){t.readed=!0}))},formattedDate:function(t){var e=f()(t).format("LLL").split("г.,");return e[0]+" "+e[1]},loadMailings:function(){var t=this,e=this.nextPage?{url:this.nextPage}:{};this.getListMailings(e).then((function(e){var s,a=o()(e.data.results);try{for(a.s();!(s=a.n()).done;){var i=s.value;t.$set(i,"state",!1)}}catch(n){a.e(n)}finally{a.f()}t.mailings=0==t.mailings.length?e.data.results:t.mailings.concat(e.data.results),t.nextPage=e.data.next}))},setMarkedSelected:function(){var t,e=this,s=[],a=o()(this.selected);try{for(a.s();!(t=a.n()).done;){var i=t.value;s.push(this.setReadedMailing({id:i}))}}catch(n){a.e(n)}finally{a.f()}Promise.all(s).then((function(t){e.loadMailings()}))}}),computed:d()(d()({},Object(u["c"])(["listMailings"])),{},{selected:function(){var t,e=[],s=_.filter(this.mailings,{state:!0}),a=o()(s);try{for(a.s();!(t=a.n()).done;){var i=t.value;e.push(i.id)}}catch(n){a.e(n)}finally{a.f()}return e}}),mounted:function(){this.loadMailings()}},j=S,N=Object(v["a"])(j,$,L,!1,null,null,null),O=N.exports;y()(N,"components",{QPage:h["a"],QCard:q["a"],QCardSection:w["a"],QBtn:C["a"],QIcon:x["a"],QSpace:b["a"]});var D={name:"Mailings",components:{MailingsDesktop:P,MailingsMobile:O}},A=D,R=Object(v["a"])(A,a,i,!1,null,null,null);e["default"]=R.exports;y()(R,"components",{QPage:h["a"]})}}]);