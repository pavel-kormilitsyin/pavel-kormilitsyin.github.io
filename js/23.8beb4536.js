(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[23],{db76:function(t,s,a){"use strict";a.r(s);var e=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("q-page",[t.$q.platform.is.mobile?t._e():a("payments-detail-desktop"),t.$q.platform.is.mobile?a("payments-detail-mobile"):t._e()],1)},i=[],n=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("q-page",[a("q-dialog",{attrs:{persistent:"",maximized:t.$q.screen.lt.sm},model:{value:t.dialogPay,callback:function(s){t.dialogPay=s},expression:"dialogPay"}},[a("pay-dialog",{attrs:{widget_uri:t.dialogPayWidgetUri}})],1),a("div",{staticClass:"row items-center head-page",staticStyle:{"padding-bottom":"20px"}},[a("span",{staticClass:"subtitle self-end"},[t._v("Детализация оплат")]),a("q-space"),a("q-btn",{staticClass:"btn-white row items-center q-ml-lg",attrs:{"no-caps":"",flat:"",to:"/payments"}},[a("q-icon",{staticStyle:{transform:"rotate(180deg)"},attrs:{name:"img:icons/Arrow_Small.svg",size:"11px"}}),a("span",{staticClass:"q-ml-md"},[t._v("Назад")])],1)],1),a("div",{staticClass:"content-page"},[a("div",{staticClass:"row payments"},[a("div",{staticClass:"swiper-slides fit q-pt-none"},[a("swiper",{ref:"swiperSale",staticClass:"swiper fit q-pa-sm",attrs:{options:t.swiperOptionSales}},t._l(t.salesListSort,(function(s,e){return a("swiper-slide",{key:s.tariff.id+"_"+e,staticClass:"row items-center"},[a("q-card",{staticClass:"card-shadow fit"},[a("q-card-section",{staticClass:"q-pa-none"},[a("div",{staticClass:"payment-categories-item-main-title"})]),t.salesList?a("q-card-section",{staticClass:"payments-card-content q-pa-none"},[a("div",{staticClass:"fit flex flex-center"},[a("div",{staticClass:"full-width text-center"},[a("img",{attrs:{src:"img/Payment_Sale.jpg",alt:""}}),a("div",{staticClass:"payment-categories-item-main-card-title text-accent",staticStyle:{"margin-top":"0"}},[t._v("\n                          "+t._s(s.tariff.title)+"\n                        ")]),a("q-separator"),a("q-list",{attrs:{separator:""}},[a("q-item",{staticClass:"q-pa-none"},[a("q-item-section",{staticClass:"text-right"},[a("q-item-label",{staticClass:"font-sspro-sr fs-14 price-title"},[t._v("\n                                Сумма договора:\n                              ")])],1),a("q-item-section",{staticClass:"text-left fs-20 q-pl-lg"},[a("q-item-label",[t._v("\n                                "+t._s(t.numberWithSpaces(s.acc_amount))+" "),a("span",{staticClass:"currency"},[t._v("Р")])])],1)],1),a("q-item",{staticClass:"q-pa-none"},[a("q-item-section",{staticClass:"text-right"},[a("q-item-label",{staticClass:"font-sspro-sr fs-14 price-title"},[t._v("\n                                Оплачено:\n                              ")])],1),a("q-item-section",{staticClass:"text-left fs-20 q-pl-lg"},[a("q-item-label",[t._v("\n                                "+t._s(t.numberWithSpaces(s.paid_amount))+" "),a("span",{staticClass:"currency"},[t._v("Р")])])],1)],1),a("q-item",{staticClass:"q-pa-none"},[a("q-item-section",{staticClass:"text-right"},[a("q-item-label",{staticClass:"font-sspro-sr fs-14 price-title"},[t._v("\n                                Задолженость:\n                              ")])],1),a("q-item-section",{staticClass:"text-left fs-20 q-pl-lg"},[a("q-item-label",[t._v("\n                                "+t._s(t.numberWithSpaces(s.debt_amount))+" "),a("span",{staticClass:"currency"},[t._v("Р")])])],1)],1),parseFloat(s.past_debt_amount)>0?a("q-item",{staticClass:"q-pa-none"},[a("q-item-section",{staticClass:"text-right"},[a("q-item-label",{staticClass:"font-sspro-sr fs-14 price-title"},[a("q-icon",{staticClass:"q-mr-xs",attrs:{name:"img:icons/warning.svg",size:"16px"}}),t._v(" Просроченный платеж:\n                              ")],1)],1),a("q-item-section",{staticClass:"text-left fs-20 q-pl-lg"},[a("q-item-label",[t._v("\n                                "+t._s(t.numberWithSpaces(s.past_debt_amount))+" "),a("span",{staticClass:"currency"},[t._v("Р")])])],1)],1):t._e()],1)],1)])]):t._e(),a("q-card-section",{staticClass:"row items-center justify-center"},[a("div",{staticClass:"col-auto font-sspro-sr fs-14 row items-center q-pl-md"},[t._v("\n                      Сумма оплаты:\n                    ")]),a("div",{staticClass:"col q-pr-sm q-pl-sm"},[a("q-input",{staticClass:"input50h",attrs:{rounded:"",outlined:"",placeholder:"—"},model:{value:s.added_amount,callback:function(a){t.$set(s,"added_amount",a)},expression:"sale.added_amount"}})],1),a("div",{staticClass:"col-auto"},[a("q-btn",{staticClass:"btn-orange",attrs:{flat:"",dense:"","no-caps":"",disable:!s.added_amount||0==s.added_amount},on:{click:function(a){return t.saleAdded(s)}}},[a("q-icon",{attrs:{name:"img:icons/Button_Payments.svg",size:"20px"}}),a("span",{staticClass:"btn-title q-mr-xs"},[t._v("Внести платеж ")])],1)],1)])],1)],1)})),1),a("div",{staticClass:"left-arrow",attrs:{slot:"button-prev"},slot:"button-prev"},[a("img",{attrs:{src:"icons/Arrow_Small.svg",alt:""}})]),a("div",{staticClass:"right-arrow",attrs:{slot:"button-next"},slot:"button-next"},[a("img",{attrs:{src:"icons/Arrow_Small.svg",alt:""}})])],1)])])],1)},l=[],o=(a("e260"),a("d3b7"),a("e6cf"),a("ac1f"),a("3ca3"),a("1276"),a("ddb0"),a("6374")),r=a.n(o),c=a("ded3"),d=a.n(c),m=(a("bc3a"),a("cf91")),p=a("2f62"),u=a("c1df"),f=a.n(u),g=(a("957c"),a("7212")),q=(a("a7a3"),{name:"Payments",components:{Swiper:g["Swiper"],SwiperSlide:g["SwiperSlide"],PayDialog:m["a"]},data:function(){return{dialogPay:!1,dialogPayWidgetUri:null,swiperOptionSales:{slidesPerView:2,slidesPerGroup:2,spaceBetween:10,slidesPerColumnFill:"col",direction:"horizontal",scrollbar:{el:".swiper-scrollbar",dragClass:"swiper-scrollbar-drag scroll-drag"},navigation:{nextEl:".right-arrow",prevEl:".left-arrow"}}}},methods:d()(d()({},Object(p["b"])(["getSales","getCoursesPurched","paySale"])),{},{dateFormat:function(t){return f()(t).format("LL").split(" г.")[0]},saleAdded:function(t){var s=this;this.paySale({amount:t.added_amount,sale_id:t.id}).then((function(t){s.dialogPayWidgetUri=t.data.widget_uri,s.dialogPay=!0}))}}),computed:d()(d()({},Object(p["c"])(["salesList","coursesPurched"])),{},{salesListSort:function(){return _.orderBy(this.salesList,(function(t){return t.tariff.is_main}),["desc"])}}),mounted:function(){var t=this,s=this.getSales({}),a=this.getCoursesPurched({});Promise.all([s,a]).then((function(s){var a,e=r()(s[0].data);try{for(e.s();!(a=e.n()).done;){var i=a.value;t.$set(i,"added_amount","")}}catch(n){e.e(n)}finally{e.f()}}))}}),C=q,v=a("2877"),b=a("9989"),y=a("24e8"),h=a("2c91"),w=a("9c40"),x=a("0016"),S=a("f09f"),P=a("a370"),L=a("eb85"),Q=a("1c1c"),k=a("66e5"),W=a("4074"),j=a("0170"),I=a("27f9"),$=a("eebe"),z=a.n($),O=Object(v["a"])(C,n,l,!1,null,null,null),A=O.exports;z()(O,"components",{QPage:b["a"],QDialog:y["a"],QSpace:h["a"],QBtn:w["a"],QIcon:x["a"],QCard:S["a"],QCardSection:P["a"],QSeparator:L["a"],QList:Q["a"],QItem:k["a"],QItemSection:W["a"],QItemLabel:j["a"],QInput:I["a"]});var B=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("q-page",[a("page-loader",{attrs:{state:t.pageIsLoad}}),a("q-dialog",{attrs:{persistent:"",maximized:t.$q.screen.lt.sm},on:{hide:function(s){return t.getSales({})}},model:{value:t.dialogPay,callback:function(s){t.dialogPay=s},expression:"dialogPay"}},[a("pay-dialog",{attrs:{widget_uri:t.dialogPayWidgetUri}})],1),a("q-card",{staticClass:"lessons transparent",staticStyle:{"border-radius":"0 !important"},attrs:{flat:""}},[a("q-card-section",{staticClass:"lesson-top relative-position full-width"},[a("div",{staticClass:"row items-center"},[a("div",{staticClass:"col-auto"},[a("q-btn",{staticClass:"q-pr-md",attrs:{dense:"",round:"",flat:"",to:"/payments"}},[a("q-icon",{staticStyle:{transform:"rotate(180deg)"},attrs:{name:"img:icons/schedule.svg",size:"20px"}})],1)],1),a("div",{staticClass:"col"},[a("div",{staticClass:"row items-center"},[a("div",{staticClass:"col"},[a("div",{staticClass:"lesson-head"},[t._v("Оплаты")])])]),a("div",{staticClass:"row q-mt-xs"},[a("div",{staticClass:"col text-left"},[a("div",{staticClass:"lesson-subtitle"},[t._v("Детализация")])])])])])])],1),a("div",{staticClass:"col-xl-6 col-lg-6 col-md-6 col-sm-6 col-xs-12 q-pa-sm"},[a("q-card",{staticClass:"card-shadow"},[t.salesList&&0==t.salesList.length?a("q-card-section",{staticClass:"q-pa-none"},[a("div",{staticClass:"fit flex flex-center"},[a("div",{staticClass:"full-width text-center"},[a("img",{staticClass:"q-mt-md",attrs:{src:"img/Payment_Sale.jpg",height:"90"}}),a("div",{staticClass:"font-exo2-m fs-20 text-dark q-mt-md"},[t._v("\n              Вы не записаны в"),a("br"),t._v("автошколу на обучение\n            ")]),a("div",{staticClass:"font-sspro-sr fs-12 q-mt-md text-secondary",staticStyle:{"line-height":"1.5"}},[t._v("\n              Чтобы пройти обучение, нужно выбрать автошколу"),a("br"),t._v("и записаться туда, чтобы что-то там.\n            ")])])])]):t._e(),t.salesList&&0==t.salesList.length?a("q-card-section",{staticClass:"row items-center justify-center"},[a("q-btn",{staticClass:"btn-orange-mobile",attrs:{flat:"","no-caps":"",to:"/payments/record-school/1"}},[a("q-icon",{attrs:{name:"img:icons/Button_SaleSignup.svg",size:"20px"}}),a("span",{staticClass:"btn-title"},[t._v("Записаться в автошколу")])],1)],1):t._e()],1),t._l(t.salesList,(function(s){return t.salesList&&t.salesList.length>1?a("q-card",{key:s.id,staticClass:"card-shadow q-mb-md"},[a("q-card-section",{staticClass:"payments-card-content q-pa-none"},[a("div",{staticClass:"fit flex flex-center"},[a("div",{staticClass:"full-width text-center"},[a("div",{staticClass:"font-exo2-m fs-20 text-accent q-mt-md q-mb-md"},[t._v("\n              "+t._s(s.tariff.title)+"\n            ")]),a("q-separator"),a("q-list",{staticClass:"q-pa-none"},[a("q-item",{staticClass:"q-pa-sm"},[a("q-item-section",[a("q-item-label",{staticClass:"font-sspro-sr fs-15 price-title"},[t._v("\n                    "+t._s(t.numberWithSpaces(s.acc_amount))+" "),a("span",{staticClass:"currency"},[t._v("Р")])]),a("q-item-label",{staticClass:"font-sspro-sr"},[t._v("\n                    Сумма покупок\n                  ")])],1),a("q-item-section",[a("q-item-label",{staticClass:"font-sspro-sr fs-15 price-title"},[t._v("\n                    "+t._s(t.numberWithSpaces(s.paid_amount))+" "),a("span",{staticClass:"currency"},[t._v("Р")])]),a("q-item-label",{staticClass:"font-sspro-sr"},[t._v("\n                    Сумма оплат\n                  ")])],1),a("q-item-section",[a("q-item-label",{staticClass:"font-sspro-sr fs-15 price-title"},[t._v("\n                    "+t._s(t.numberWithSpaces(s.debt_amount))+" "),a("span",{staticClass:"currency"},[t._v("Р")])]),a("q-item-label",{staticClass:"font-sspro-sr"},[t._v("\n                   Долг\n                  ")])],1)],1),s.past_debt_amount>0?a("q-item",{staticClass:"q-pa-none",staticStyle:{"border-bottom":"solid 1px #F44B2F"}},[a("q-item-section",{staticClass:"past-debt-amount"},[a("q-item-label",{staticClass:"font-exo2-m fs-17"},[a("q-icon",{staticClass:"q-mr-xs",attrs:{name:"img:icons/warning.svg",size:"16px"}}),t._v(" Просрочено:\n                    "+t._s(t.numberWithSpaces(s.past_debt_amount))+" "),a("span",{staticClass:"currency"},[t._v("Р")])],1)],1)],1):t._e()],1)],1)])]),a("q-card-section",{staticClass:"row items-center justify-center"},[a("div",{staticClass:"col q-pr-sm q-pl-sm"},[a("q-input",{staticClass:"input40h",attrs:{rounded:"",outlined:"",placeholder:"Сумма оплаты...","input-class":"fs-15"},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-btn",{staticClass:"btn-orange-mobile",class:{"pointer-none":!s.added_amount||0==s.added_amount},staticStyle:{left:"15px",width:"155px","z-index":"5",height:"100%"},attrs:{flat:"","no-caps":""},on:{click:function(a){return t.saleAdded(s)}}},[a("span",{staticClass:"font-sspro-sr fs-17"},[t._v("Внести платеж")])])]},proxy:!0}],null,!0),model:{value:s.added_amount,callback:function(a){t.$set(s,"added_amount",a)},expression:"sale.added_amount"}})],1)])],1):t._e()}))],2)],1)},D=[],E=a("1d9f"),F=a("9f3a"),U={name:"Payments",components:{PayDialog:m["a"],Categories:E["a"],PageLoader:F["a"]},data:function(){return{pageIsLoad:!1,dialogPay:!1,dialogPayWidgetUri:null,dialogAddedPhoneOrEmail:!1,underConsrtaction:!0,email:null,phone:null}},methods:d()(d()({},Object(p["b"])(["getSales","getCoursesPurched","paySale"])),{},{dateFormat:function(t){return f()(t).format("LL").split(" г.")[0]},saleAdded:function(t){var s=this;this.paySale({amount:t.added_amount,sale_id:t.id}).then((function(t){400!=t.status?(s.dialogPayWidgetUri=t.data.widget_uri,s.dialogPay=!0):s.$q.notify({icon:"warning",message:t.data.errors[0].message,timeout:3e3,color:"blue-grey-10",html:!0,position:"top"})}))}}),computed:d()(d()({},Object(p["c"])(["salesList","coursesPurched"])),{},{salesListSort:function(){return _.orderBy(this.salesList,(function(t){return t.tariff.is_main}),["desc"])}}),mounted:function(){var t=this,s=this.getSales({});Promise.all([s]).then((function(s){var a,e=r()(s[0].data);try{for(e.s();!(a=e.n()).done;){var i=a.value;t.$set(i,"added_amount","")}}catch(n){e.e(n)}finally{e.f()}}))}},J=U,G=Object(v["a"])(J,B,D,!1,null,null,null),M=G.exports;z()(G,"components",{QPage:b["a"],QDialog:y["a"],QCard:S["a"],QCardSection:P["a"],QBtn:w["a"],QIcon:x["a"],QSeparator:L["a"],QList:Q["a"],QItem:k["a"],QItemSection:W["a"],QItemLabel:j["a"],QInput:I["a"]});var V={name:"PaymentsDetail",components:{PaymentsDetailDesktop:A,PaymentsDetailMobile:M}},H=V,K=Object(v["a"])(H,e,i,!1,null,null,null);s["default"]=K.exports;z()(K,"components",{QPage:b["a"]})}}]);