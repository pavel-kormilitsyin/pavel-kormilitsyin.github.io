(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[31],{a320:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-page",{staticClass:"flex flex-center auth background-auth"},[n("div",{staticClass:"q-pa-md row",staticStyle:{background:"linear-gradient(to bottom, #5181b8, #3c6797)","border-radius":"10px"}},[n("div",{staticClass:"col-12 text-center"},[n("q-icon",{attrs:{name:"img:icons/Button_VK.svg",size:"50px"}})],1),n("div",{staticClass:"col-12 text-center"},[n("q-spinner-dots",{attrs:{color:"white",size:"20px"}})],1)])])},a=[],o=n("ded3"),s=n.n(o),r=n("bc3a"),c=n.n(r),u=n("2f62"),l={name:"PageIndex",data:function(){return{client_id:null}},methods:s()(s()({},Object(u["b"])(["authVK","authGetVK"])),{},{authGoVK:function(){var t="https://oauth.vk.com/authorize?client_id="+this.client_id+"&display=popup&redirect_uri="+window.location.origin+"/vk-auth";window.open(t,"_self")},authVKInit:function(t){var e=this,n={code:t,redirect_uri:window.location.origin+"/vk-auth"};this.$q.sessionStorage.has("ref_landing")&&(n.ref_landing=this.$q.sessionStorage.getItem("ref_landing")),this.authVK(n).then((function(t){if(t.status>=400)return e.setUserInfo(null),void e.$q.notify({icon:"warning",message:"Что-то пошло не так...",timeout:3e3,color:"blue-grey-10",html:!0,position:"top"});c.a.defaults.withCredentials=!1,e.setToken(t.data.access),e.$q.localStorage.set("token",t.data.access),e.$q.localStorage.set("refresh",t.data.refresh),e.setIsAuth(!0),e.$q.sessionStorage.has("ref_landing")&&e.$q.sessionStorage.remove("ref_landing"),e.$nextTick((function(){e.$emit("initFirstData",!0)}))})).catch((function(t){}))}}),computed:s()({},Object(u["c"])(["token"])),mounted:function(){var t=this;this.$route.query.hasOwnProperty("ref_landing")&&this.$q.sessionStorage.set("ref_landing",this.$route.query.ref_landing),this.$route.query.hasOwnProperty("code")?this.authVKInit(this.$route.query.code):this.authGetVK({}).then((function(e){t.client_id=e.data.client_id,t.authGoVK()}))}},d=l,h=n("2877"),f=n("9989"),g=n("0016"),p=n("8380"),_=n("eebe"),w=n.n(_),m=Object(h["a"])(d,i,a,!1,null,null,null);e["default"]=m.exports;w()(m,"components",{QPage:f["a"],QIcon:g["a"],QSpinnerDots:p["a"]})}}]);