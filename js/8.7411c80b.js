(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[8],{"2a17":function(t,a,s){},"2e9f":function(t,a,s){"use strict";s("2a17")},a3ab:function(t,a,s){"use strict";s("ffa7")},b41f:function(t,a,s){"use strict";s.r(a);var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("q-page",[t.$q.platform.is.mobile?t._e():s("settings-desktop"),t.$q.platform.is.mobile?s("settings-mobile"):t._e()],1)},n=[],i=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("q-page",[s("page-loader",{attrs:{state:t.pageIsLoad}}),s("input",{ref:"image",staticStyle:{display:"none"},attrs:{type:"file",name:"Image"},on:{change:function(a){return t.handleImagePreviewUpload()}}}),s("div",{staticClass:"row items-center head-page"},[s("span",{staticClass:"q-ml-sm subtitle"},[t._v("Настройки")]),s("q-space")],1),s("div",{staticClass:"content-page"},[t.userData?s("q-card",{staticClass:"card-shadow full-height row content-profile"},[s("q-card-section",{staticClass:"full-width row items-start"},[s("div",{staticClass:"q-pl-md q-pr-md row justify-center",class:{col:t.$q.screen.width<1200,"col-grow":t.$q.screen.width<1024},style:{"max-width":t.$q.screen.width>1200?"250px":"100%"}},[s("div",{staticClass:"user-avatar profile q-mt-lg"},[s("div",{staticClass:"avatar-img",style:{"background-image":"url("+t.srcAvatar+")"}})]),s("div",{staticClass:"row justify-center q-mt-md full-width"},[s("q-btn",{staticClass:"font-sspro-sr text-accent fs-15",attrs:{"no-caps":"",dense:"",flat:"",stack:""},on:{click:function(a){t.fileAvatar=null,t.fileBase64=null,t.$refs.image.click()}}},[s("q-icon",{attrs:{name:"img:icons/Upload.svg",size:"16px"}}),s("span",{staticClass:"q-ml-sm"},[t._v("Загрузить")])],1),s("q-btn",{staticClass:"font-sspro-sr text-secondary fs-15",attrs:{"no-caps":"",dense:"",flat:"",stack:""},on:{click:t.deleteAvatar}},[s("q-icon",{attrs:{name:"img:icons/Delete.svg",size:"16px"}}),s("span",{staticClass:"q-ml-sm"},[t._v("Удалить")])],1)],1)]),s("div",{staticClass:"col-xs-12 col-sm-12 col-md-6 col-lg-3 col-xl-3 q-pl-md q-pr-md"},[s("div",{staticClass:"input-title"},[t._v("Фамилия")]),s("q-input",{staticClass:"full-width font-sspro-sr",attrs:{rounded:"",outlined:""},model:{value:t.userData.last_name,callback:function(a){t.$set(t.userData,"last_name",a)},expression:"userData.last_name"}}),s("div",{staticClass:"input-title"},[t._v("Имя")]),s("q-input",{staticClass:"full-width font-sspro-sr",attrs:{rounded:"",outlined:""},model:{value:t.userData.first_name,callback:function(a){t.$set(t.userData,"first_name",a)},expression:"userData.first_name"}}),s("div",{staticClass:"input-title"},[t._v("Отчество")]),s("q-input",{staticClass:"full-width font-sspro-sr",attrs:{rounded:"",outlined:""},model:{value:t.userData.patronymic,callback:function(a){t.$set(t.userData,"patronymic",a)},expression:"userData.patronymic"}})],1),s("div",{staticClass:"col-xs-12 col-sm-12 col-md-6 col-lg-3 col-xl-3 q-pl-md q-pr-md"},[s("div",{staticClass:"input-title"},[t._v("Телефон")]),s("q-input",{staticClass:"full-width font-sspro-sr",attrs:{rounded:"",outlined:"",mask:t.maskphone,"unmasked-value":""},model:{value:t.userData.phone,callback:function(a){t.$set(t.userData,"phone",a)},expression:"userData.phone"}}),s("div",{staticClass:"input-title"},[t._v("Email")]),s("q-input",{staticClass:"full-width font-sspro-sr",attrs:{rounded:"",outlined:""},model:{value:t.userData.email,callback:function(a){t.$set(t.userData,"email",a)},expression:"userData.email"}})],1),s("div",{staticClass:"col-grow q-pl-md q-pr-md"},[s("div",{staticClass:"input-title"},[t._v("Сменить пароль")]),s("q-input",{staticClass:"full-width font-sspro-sr",attrs:{rounded:"",outlined:"",type:"password"},model:{value:t.userData.password,callback:function(a){t.$set(t.userData,"password",a)},expression:"userData.password"}}),s("div",{staticClass:"input-title"},[t._v("Повторить новый пароль")]),s("q-input",{staticClass:"full-width font-sspro-sr",attrs:{rounded:"",outlined:"",type:"password"},scopedSlots:t._u([{key:"append",fn:function(){return[t.userData.password&&t.userData.password_confirm&&t.userData.password==t.userData.password_confirm?s("q-icon",{attrs:{name:"img:icons/Alert_Small_OK.svg",size:"18px"}}):t._e()]},proxy:!0}],null,!1,708742816),model:{value:t.userData.password_confirm,callback:function(a){t.$set(t.userData,"password_confirm",a)},expression:"userData.password_confirm"}})],1)]),s("q-separator"),s("q-separator"),s("q-card-section",{staticClass:"q-pa-md row items-center full-width"},[s("q-space"),s("q-btn",{staticClass:"btn-orange",attrs:{"no-caps":"",flat:"",rounded:"",disable:""!=t.userData.password&&t.userData.password!=t.userData.password_confirm},on:{click:function(a){return t.saveUserInfo()}}},[s("q-icon",{attrs:{name:"img:icons/Profile_Button_Save.svg",size:"16px"}}),s("span",{staticClass:"btn-title"},[t._v("Сохранить")])],1)],1)],1):t._e()],1)],1)},r=[],o=(s("caad"),s("4fad"),s("ac1f"),s("5319"),s("278c")),l=s.n(o),c=s("ded3"),u=s.n(c),p=(s("bc3a"),s("2f62")),d=s("9f3a"),f={name:"PageIndex",components:{PageLoader:d["a"]},data:function(){return{pageIsLoad:!1,userData:null,fileAvatar:null,fileBase64:null}},methods:u()(u()({},Object(p["b"])(["updateUserInfo","sendChatMessage"])),{},{deleteAvatar:function(){this.fileAvatar=null,this.fileBase64=null,this.userData.avatar=null,this.saveUserInfo("only_avatar")},saveUserInfo:function(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"any",s=new FormData;if("any"==a){for(var e=["group","progress_percents","completed_drive_percents","num_exam_attempts"],n=0,i=Object.entries(this.userData);n<i.length;n++){var r=l()(i[n],2),o=r[0],c=r[1];("avatar"!=o||this.fileAvatar)&&(("password"!=o||c)&&"city"!=o&&("password_confirm"!=o||c)&&("phone"==o&&"+7"==c&&(c=""),"phone"==o&&void 0!=c&&c&&(c="+7"+c.replace("+7","")),"email"==o&&null==c&&(c=""),e.includes(o)||s.append(o,c)))}this.fileAvatar&&s.append("avatar",this.fileAvatar)}"only_avatar"==a&&(this.fileAvatar?s.append("avatar",this.fileAvatar):s={avatar:null}),this.updateUserInfo(s).then((function(a){400!=a.status?(t.getClientByCategory(t.currCat,!0),t.$q.notify({icon:"check",message:"Данные успешно изменены!",timeout:3e3,color:"blue-grey-10",html:!0})):t.$q.notify({icon:"warning",message:a.data.errors[0].message,timeout:3e3,color:"blue-grey-10",html:!0,position:"top"})})).catch((function(t){}))},handleImagePreviewUpload:function(){var t=this,a=new FileReader;this.fileAvatar=this.$refs.image.files[0],a.addEventListener("load",(function(a){t.fileBase64=a.target.result,t.saveUserInfo("only_avatar")})),a.readAsDataURL(this.fileAvatar)},initDataPage:function(){var t=this;this.pageIsLoad=!0,this.userData=this.dCopy(this.userInfo),this.turnOffAutoComplete(),setTimeout((function(){t.pageIsLoad=!1}),500)}}),computed:u()(u()({},Object(p["c"])(["userInfo","currCat","origin"])),{},{srcAvatar:function(){return this.fileBase64?this.fileBase64:this.userData&&this.userData.avatar?this.origin+"/"+this.userData.avatar:this.avatar_null}}),watch:{userInfo:function(){this.initDataPage()}},mounted:function(){this.userInfo&&this.initDataPage()}},m=f,v=(s("a3ab"),s("2877")),q=s("9989"),h=s("2c91"),g=s("9c40"),_=s("0016"),C=s("f09f"),b=s("a370"),w=s("27f9"),D=s("eb85"),y=s("eebe"),x=s.n(y),k=Object(v["a"])(m,i,r,!1,null,null,null),I=k.exports;x()(k,"components",{QPage:q["a"],QSpace:h["a"],QBtn:g["a"],QIcon:_["a"],QCard:C["a"],QCardSection:b["a"],QInput:w["a"],QSeparator:D["a"]});var A=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("q-page",[s("page-loader",{attrs:{state:t.pageIsLoad}}),s("input",{ref:"image",staticStyle:{display:"none"},attrs:{type:"file",name:"Image"},on:{change:function(a){return t.handleImagePreviewUpload()}}}),s("q-card",{staticClass:"lessons transparent",staticStyle:{"border-radius":"0 !important"},attrs:{flat:""}},[s("q-card-section",{staticClass:"lesson-top relative-position full-width"},[s("div",{staticClass:"row items-center"},[s("div",{staticClass:"col"},[s("div",{staticClass:"lesson-title"},[t._v("Настройки")])])]),s("div",{staticClass:"row q-mt-md"},[s("div",{staticClass:"col text-left"},[s("div",{staticClass:"lesson-subtitle"},[s("span",[t._v("Моя группа: "),s("b",[t._v(t._s(t.userInfo.group.number))])]),s("span",{staticClass:"q-ml-sm"},[t._v("ID: "),s("b",[t._v(t._s(t.userInfo.id))])])])]),s("div",{staticClass:"user-avatar profile absolute-top-right",staticStyle:{top:"30px",right:"20px","z-index":"5"}},[s("div",{staticClass:"avatar-img",style:{"background-image":"url("+t.srcAvatar+")"}})])])]),s("q-card-section",{staticClass:"q-pa-none"},[s("div",{staticClass:"photo-bg-panel q-pa-md"},[s("div",{staticClass:"photo"},[t._v("Фото:")]),s("div",{staticClass:"row justify-start q-pa-none full-width"},[s("q-btn",{staticClass:"font-sspro-sr text-accent fs-15",attrs:{"no-caps":"",dense:"",flat:""},on:{click:function(a){t.fileAvatar=null,t.fileBase64=null,t.$refs.image.click()}}},[s("q-icon",{attrs:{name:"img:icons/Upload.svg",size:"16px"}}),s("span",{staticClass:"q-ml-sm"},[t._v("Загрузить")])],1),s("q-btn",{staticClass:"font-sspro-sr text-secondary fs-15 q-ml-md",attrs:{"no-caps":"",dense:"",flat:""}},[s("q-menu",{ref:"menu_del",attrs:{"auto-close":""}},[s("q-list",[s("q-item",[s("q-item-section",[s("q-item-label",[t._v("\n                        Вы хотите удалить свой аватар?\n                      ")])],1)],1),s("q-separator"),s("q-item",[s("q-item-section",[s("div",{staticClass:"row"},[s("q-btn",{staticClass:"btn-cancel-mobile",attrs:{"no-caps":"",label:"Отмена"},on:{click:function(a){return t.$refs.menu_del.hide()}}}),s("q-space"),s("q-btn",{staticClass:"btn-orange-mobile",attrs:{"no-caps":"",label:"Да, удалить"},on:{click:function(a){t.$refs.menu_del.hide(),t.deleteAvatar()}}})],1)])],1)],1)],1),s("q-icon",{attrs:{name:"img:icons/Delete.svg",size:"16px"}}),s("span",{staticClass:"q-ml-sm"},[t._v("Удалить")])],1)],1)])]),t.userData?s("q-card-section",{staticClass:"row items-center q-pa-none"},[s("div",{staticClass:"full-width form-settings"},[s("form",{attrs:{autocorrect:"off",autocapitalize:"off",autocomplete:"off",spellcheck:"false"}},[s("q-list",{attrs:{separator:""}},[s("q-item",{staticClass:"q-pt-sm q-pb-none"},[s("q-item-section",[s("q-input",{staticClass:"full-width",attrs:{dense:"","input-class":"fs-15"},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{staticClass:"q-pr-sm",attrs:{name:"img:icons/edit_mobile.svg",size:"15px"}})]},proxy:!0},{key:"append",fn:function(){return[s("span",{staticClass:"fs-12"},[t._v("Фамилия")])]},proxy:!0}],null,!1,1099721823),model:{value:t.userData.last_name,callback:function(a){t.$set(t.userData,"last_name",a)},expression:"userData.last_name"}})],1)],1),s("q-item",{staticClass:"q-pt-sm q-pb-none"},[s("q-item-section",[s("q-input",{staticClass:"full-width",attrs:{dense:"","input-class":"fs-15"},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{staticClass:"q-pr-sm",attrs:{name:"img:icons/edit_mobile.svg",size:"15px"}})]},proxy:!0},{key:"append",fn:function(){return[s("span",{staticClass:"fs-12"},[t._v("Имя")])]},proxy:!0}],null,!1,477015784),model:{value:t.userData.first_name,callback:function(a){t.$set(t.userData,"first_name",a)},expression:"userData.first_name"}})],1)],1),s("q-item",{staticClass:"q-pt-sm q-pb-none"},[s("q-item-section",[s("q-input",{staticClass:"full-width",attrs:{dense:"","input-class":"fs-15"},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{staticClass:"q-pr-sm",attrs:{name:"img:icons/edit_mobile.svg",size:"15px"}})]},proxy:!0},{key:"append",fn:function(){return[s("span",{staticClass:"fs-12"},[t._v("Отчество")])]},proxy:!0}],null,!1,17442210),model:{value:t.userData.patronymic,callback:function(a){t.$set(t.userData,"patronymic",a)},expression:"userData.patronymic"}})],1)],1),s("q-item",{staticClass:"q-pt-sm q-pb-none"},[s("q-item-section",[s("q-input",{staticClass:"full-width",attrs:{dense:"","input-class":"fs-15",name:"email",autocomplete:"off"},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{staticClass:"q-pr-sm",attrs:{name:"img:icons/edit_mobile.svg",size:"15px"}})]},proxy:!0},{key:"append",fn:function(){return[s("span",{staticClass:"fs-12"},[t._v("Email")])]},proxy:!0}],null,!1,3533705103),model:{value:t.userData.email,callback:function(a){t.$set(t.userData,"email",a)},expression:"userData.email"}})],1)],1),s("q-item",{staticClass:"q-pt-sm q-pb-none"},[s("q-item-section",[s("q-input",{staticClass:"full-width",attrs:{dense:"","input-class":"fs-15",autocomplete:"off"},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{staticClass:"q-pr-sm",attrs:{name:"img:icons/edit_mobile.svg",size:"15px"}})]},proxy:!0},{key:"append",fn:function(){return[s("span",{staticClass:"fs-12"},[t._v("Телефон")])]},proxy:!0}],null,!1,2915589597),model:{value:t.userData.phone,callback:function(a){t.$set(t.userData,"phone",a)},expression:"userData.phone"}})],1)],1),s("q-item",{staticClass:"q-pt-sm q-pb-none"},[s("q-item-section",[s("q-input",{staticClass:"full-width",attrs:{dense:"",type:"password","input-class":"fs-15",autocomplete:"off"},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{staticClass:"q-pr-sm",attrs:{name:"img:icons/edit_mobile.svg",size:"15px"}})]},proxy:!0},{key:"append",fn:function(){return[s("span",{staticClass:"fs-12"},[t._v("Пароль")])]},proxy:!0}],null,!1,2881359877),model:{value:t.userData.password,callback:function(a){t.$set(t.userData,"password",a)},expression:"userData.password"}})],1)],1),s("q-item",{staticClass:"q-pt-sm q-pb-none"},[s("q-item-section",[s("q-input",{staticClass:"full-width",attrs:{dense:"",type:"password","input-class":"fs-15",autocomplete:"off"},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{staticClass:"q-pr-sm",attrs:{name:"img:icons/edit_mobile.svg",size:"15px"}})]},proxy:!0},{key:"append",fn:function(){return[s("span",{staticClass:"fs-12"},[t._v("Подтвердите пароль")]),t.userData.password===t.userData.password_confirm&&t.userData.password_confirm?s("q-icon",{staticClass:"q-ml-sm",attrs:{name:"img:icons/Alert_Small_OK.svg",size:"18px"}}):t._e()]},proxy:!0}],null,!1,2294910202),model:{value:t.userData.password_confirm,callback:function(a){t.$set(t.userData,"password_confirm",a)},expression:"userData.password_confirm"}})],1)],1),s("q-item",{staticClass:"q-pt-sm q-pb-lg q-pt-lg"},[s("q-item-section",[s("q-btn",{staticClass:"btn-orange-mobile col-auto",attrs:{flat:"","no-caps":"",disable:t.userData.password===t.userData.password_confirm&&t.userData.password_confirm},on:{click:function(a){return t.saveUserInfo()}}},[s("q-icon",{attrs:{name:"img:icons/Profile_Button_Save_mobile.svg",size:"20px"}}),s("span",{staticClass:"btn-title"},[t._v("Сохранить")])],1)],1)],1),s("q-item",{staticClass:"q-pt-sm q-pb-lg q-pt-lg q-mt-lg"},[s("q-item-section",[s("q-btn",{staticClass:"btn-cancel-mobile col-auto",attrs:{flat:"","no-caps":"",to:"/logout"}},[s("span",{staticClass:"btn-title"},[t._v("Выйти из приложения")])])],1)],1)],1)],1)])]):t._e()],1)],1)},$=[],S={name:"PageIndex",components:{PageLoader:d["a"]},data:function(){return{pageIsLoad:!1,userData:null,fileAvatar:null,fileBase64:null}},methods:u()(u()({},Object(p["b"])(["updateUserInfo","sendChatMessage"])),{},{deleteAvatar:function(){this.fileAvatar=null,this.fileBase64=null,this.userData.avatar=null,this.saveUserInfo("only_avatar")},saveUserInfo:function(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"any",s=new FormData;if("any"==a){for(var e=["group","progress_percents","completed_drive_percents","num_exam_attempts"],n=0,i=Object.entries(this.userData);n<i.length;n++){var r=l()(i[n],2),o=r[0],c=r[1];("avatar"!=o||this.fileAvatar)&&(("password"!=o||c)&&("password_confirm"!=o||c)&&("phone"==o&&"+7"==c&&(c=""),"phone"==o&&void 0!=c&&c&&(c="+7"+c.replace("+7","")),"email"==o&&null==c&&(c=""),e.includes(o)||s.append(o,c)))}this.fileAvatar&&s.append("avatar",this.fileAvatar)}"only_avatar"==a&&(this.fileAvatar?s.append("avatar",this.fileAvatar):s={avatar:null}),this.updateUserInfo(s).then((function(a){400!=a.status?(t.getClientByCategory(t.currCat,!0),t.$q.notify({icon:"check",message:"Данные успешно изменены!",timeout:3e3,color:"blue-grey-10",html:!0,position:"top"})):t.$q.notify({icon:"warning",message:a.data.errors[0].message,timeout:3e3,color:"blue-grey-10",html:!0,position:"top"})})).catch((function(t){}))},handleImagePreviewUpload:function(){var t=this,a=new FileReader;this.fileAvatar=this.$refs.image.files[0],a.addEventListener("load",(function(a){t.fileBase64=a.target.result,t.saveUserInfo("only_avatar")})),a.readAsDataURL(this.fileAvatar)},initDataPage:function(){var t=this;this.pageIsLoad=!0,this.userData=this.dCopy(this.userInfo),setTimeout((function(){t.pageIsLoad=!1}),500)}}),computed:u()(u()({},Object(p["c"])(["userInfo","currCat","origin"])),{},{srcAvatar:function(){return this.fileBase64?this.fileBase64:this.userData&&this.userData.avatar?this.origin+"/"+this.userData.avatar:this.avatar_null}}),watch:{userInfo:function(){this.initDataPage()}},mounted:function(){this.userInfo&&this.initDataPage()}},Q=S,U=(s("2e9f"),s("4e73")),P=s("1c1c"),B=s("66e5"),z=s("4074"),L=s("0170"),j=Object(v["a"])(Q,A,$,!1,null,null,null),O=j.exports;x()(j,"components",{QPage:q["a"],QCard:C["a"],QCardSection:b["a"],QBtn:g["a"],QIcon:_["a"],QMenu:U["a"],QList:P["a"],QItem:B["a"],QItemSection:z["a"],QItemLabel:L["a"],QSeparator:D["a"],QSpace:h["a"],QInput:w["a"]});var E={name:"Settings",components:{SettingsDesktop:I,SettingsMobile:O}},F=E,M=Object(v["a"])(F,e,n,!1,null,null,null);a["default"]=M.exports;x()(M,"components",{QPage:q["a"]})},ffa7:function(t,a,s){}}]);