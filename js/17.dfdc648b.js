(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[17],{"21f3":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",[a("div",{staticClass:"auth background-auth"},[a("div",{staticClass:"auth-wrapper"},[a("div",{staticClass:"auth-wrapper-logo"},[a("div",{staticClass:"full-width text-center"},[a("img",{attrs:{src:"img/Login_Logo_0.png",width:"40"}})]),a("div",{staticClass:"full-width text-center q-mt-md"},[a("img",{attrs:{src:"img/Login_Logo_1.png",height:"14"}})])]),a("div",{staticClass:"auth-wrapper-row full-width"},[a("div",{staticClass:"row text-center full-width"},[a("div",{staticClass:"col-auto"},[a("q-radio",{directives:[{name:"ripple",rawName:"v-ripple",value:!1,expression:"false"}],staticClass:"text-white",attrs:{color:"accent",dark:"",val:"phone",label:"По номеру телефона"},model:{value:t.authtype,callback:function(e){t.authtype=e},expression:"authtype"}})],1),a("div",{staticClass:"col"},[a("q-radio",{directives:[{name:"ripple",rawName:"v-ripple",value:!1,expression:"false"}],staticClass:"text-white",attrs:{color:"accent",dark:"",val:"email",label:"По email"},model:{value:t.authtype,callback:function(e){t.authtype=e},expression:"authtype"}})],1)])]),"phone"==t.authtype?a("div",{staticClass:"auth-wrapper-row"},[a("div",{staticClass:"auth-wrapper-row-input input-1"},[a("span",[t._v("+7 "),a("img",{attrs:{src:"icons/Arrow_Dropdown_R.svg",alt:""}})])]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.dataAuth.phone,expression:"dataAuth.phone"},{name:"mask",rawName:"v-mask",value:"(###) ###-##-##",expression:"'(###) ###-##-##'"}],ref:"phone",staticClass:"auth-wrapper-row-input input-2",staticStyle:{"max-width":"220px"},attrs:{name:"new-phone",autocomplete:"new-password",placeholder:"Номер телефона",value:"",type:"text"},domProps:{value:t.dataAuth.phone},on:{input:function(e){e.target.composing||t.$set(t.dataAuth,"phone",e.target.value)}}})]):t._e(),"email"==t.authtype?a("div",{staticClass:"auth-wrapper-row"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.dataAuth.email,expression:"dataAuth.email"}],ref:"email",staticClass:"auth-wrapper-row-input input-2",attrs:{name:"new-email",value:"",autocomplete:"new-password",placeholder:"Еmail",type:"text"},domProps:{value:t.dataAuth.email},on:{input:function(e){e.target.composing||t.$set(t.dataAuth,"email",e.target.value)}}})]):t._e(),a("div",{staticClass:"auth-wrapper-row"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.dataAuth.password,expression:"dataAuth.password"}],staticClass:"auth-wrapper-row-input input-2",attrs:{name:"new-password",autocomplete:"off",placeholder:"Пароль...",type:"password"},domProps:{value:t.dataAuth.password},on:{input:function(e){e.target.composing||t.$set(t.dataAuth,"password",e.target.value)}}})]),a("div",{staticClass:"auth-wrapper-row auth-wrapper-row-2"},[a("label",{attrs:{for:"isForgetMe"}},[a("span",{staticClass:"checkbox-span"},[a("span",{class:t.rememberMe?"true":"false"})]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.rememberMe,expression:"rememberMe"}],staticClass:"checkbox",attrs:{id:"isForgetMe",type:"checkbox"},domProps:{checked:Array.isArray(t.rememberMe)?t._i(t.rememberMe,null)>-1:t.rememberMe},on:{change:function(e){var a=t.rememberMe,s=e.target,r=!!s.checked;if(Array.isArray(a)){var i=null,o=t._i(a,i);s.checked?o<0&&(t.rememberMe=a.concat([i])):o>-1&&(t.rememberMe=a.slice(0,o).concat(a.slice(o+1)))}else t.rememberMe=r}}}),a("p",{staticClass:"checkbox-text"},[t._v("Запомнить меня")])]),a("router-link",{staticClass:"forgotPass",attrs:{tag:"p",to:"/restore"}},[t._v("Я забыл пароль!")])],1),a("div",{staticClass:"auth-wrapper-row"},[a("button",{staticClass:"login-btn",attrs:{disabled:t.isActiveBtn||t.isBtnDisabled},on:{click:t.auth}},[t._v("Войти")])]),a("div",{staticClass:"auth-wrapper-row auth-wrapper-row-text"},[a("p",{staticClass:"or"},[t._v("Или")])]),a("div",{staticClass:"auth-wrapper-row"},[a("button",{staticClass:"login-btn-vk",on:{click:function(e){return t.$router.push("/vk-auth")}}},[a("img",{attrs:{src:"icons/Button_VK.svg",alt:""}}),t._v("Войти через Vkontakte")])]),a("div",{staticClass:"auth-wrapper-row-reg"},[a("p",{staticClass:"auth-wrapper-row-reg-title"},[t._v("Нет аккаунта?")]),a("router-link",{staticClass:"login-btn-reg",attrs:{to:"/registration"}},[a("img",{attrs:{src:"icons/Button_Register.svg",alt:""}}),t._v("Зарегистрироваться\n        ")])],1)])])])},r=[],i=a("ded3"),o=a.n(i),n=a("bc3a"),l=a.n(n),c=a("2f62"),p={name:"PageIndex",data:function(){return{authtype:"phone",isActiveBtn:!1,rememberMe:!1,dataAuth:{phone:"",password:"",email:""}}},methods:o()(o()({},Object(c["b"])(["authToken","setToken","getUserInfo","setUserInfo","setIsAuth","refreshToken","verifyToken","getContacts"])),{},{auth:function(){var t=this,e=this.dCopy(this.dataAuth);e.phone="+7"+e.phone,"phone"==this.authtype&&delete e.email,"email"==this.authtype&&delete e.phone,this.authToken(e).then((function(e){if(e.status>=400)return t.setUserInfo(null),void t.$q.notify({icon:"warning",message:"Неврный логин или пароль!",timeout:3e3,color:"blue-grey-10",html:!0,position:"top"});l.a.defaults.withCredentials=!1,t.setToken(e.data.access),t.$q.localStorage.set("token",e.data.access),t.$q.localStorage.set("refresh",e.data.refresh),t.setIsAuth(!0),t.$nextTick((function(){t.$emit("initFirstData",!0)}))})).catch((function(t){}))}}),computed:o()(o()({},Object(c["c"])(["token","isAuth"])),{},{isBtnDisabled:function(){return"phone"==this.authtype?this.dataAuth.phone.length<15:this.dataAuth.password.length<2}}),watch:{rememberMe:function(t){this.$q.localStorage.set("remember",t)},$route:function(t){}},mounted:function(){var t=this;this.$nextTick((function(){t.$refs.phone.focus()})),this.$q.localStorage.has("remember")||(this.$q.localStorage.set("remember","false"),this.rememberMe=Boolean(this.$q.localStorage.getItem("remember"))),this.$q.localStorage.has("remember")&&(this.rememberMe=Boolean(this.$q.localStorage.getItem("remember"))),this.turnOffAutoComplete(),this.$emit("verifyTokenInit")}},u=p,h=a("2877"),m=a("9989"),d=a("3786"),w=a("714f"),v=a("eebe"),g=a.n(v),f=Object(h["a"])(u,s,r,!1,null,null,null);e["default"]=f.exports;g()(f,"components",{QPage:m["a"],QRadio:d["a"]}),g()(f,"directives",{Ripple:w["a"]})}}]);