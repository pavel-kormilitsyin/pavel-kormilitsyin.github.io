(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[25],{e0e7:function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("q-page",[1!=t.$route.params.step||t.$q.platform.is.mobile?t._e():e("payments-records-desktop-step-1"),2!=t.$route.params.step||t.$q.platform.is.mobile?t._e():e("payments-records-desktop-step-2"),3!=t.$route.params.step||t.$q.platform.is.mobile?t._e():e("payments-records-desktop-step-3"),4!=t.$route.params.step||t.$q.platform.is.mobile?t._e():e("payments-records-desktop-step-4"),5!=t.$route.params.step||t.$q.platform.is.mobile?t._e():e("payments-records-desktop-step-5"),6!=t.$route.params.step||t.$q.platform.is.mobile?t._e():e("payments-records-desktop-step-6"),7!=t.$route.params.step||t.$q.platform.is.mobile?t._e():e("payments-records-desktop-step-7"),1==t.$route.params.step&&t.$q.platform.is.mobile?e("payments-records-mobile-step-1"):t._e(),2==t.$route.params.step&&t.$q.platform.is.mobile?e("payments-records-mobile-step-2"):t._e(),3==t.$route.params.step&&t.$q.platform.is.mobile?e("payments-records-mobile-step-3"):t._e(),4==t.$route.params.step&&t.$q.platform.is.mobile?e("payments-records-mobile-step-4"):t._e(),5==t.$route.params.step&&t.$q.platform.is.mobile?e("payments-records-mobile-step-5"):t._e(),6==t.$route.params.step&&t.$q.platform.is.mobile?e("payments-records-mobile-step-6"):t._e(),7==t.$route.params.step&&t.$q.platform.is.mobile?e("payments-records-mobile-step-7"):t._e()],1)},i=[],o=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("q-page",[e("q-dialog",{attrs:{persistent:""},model:{value:t.dialogIsUseSchool,callback:function(s){t.dialogIsUseSchool=s},expression:"dialogIsUseSchool"}},[t.userHasSchool?e("q-card",[e("q-card-section",{staticClass:"dialog-content",attrs:{align:"center"}},[t._v("\n          Вы уже записаны в автошколу\n        ")]),e("q-card-section",{staticClass:"text-bold dialog-content",attrs:{align:"center"}},[t._v("\n          "+t._s(t.userSchool.title)+"\n        ")]),e("q-card-section",{attrs:{align:"center"}},[t._v("\n         "+t._s(t.userSchool.address)+"\n        ")]),e("q-separator"),e("q-card-section",{staticClass:"gradient-grey",attrs:{align:"center"}},[e("q-btn",{staticClass:"btn-orange",attrs:{"no-caps":"",flat:"",to:"/payments"}},[e("span",{staticClass:"btn-title"},[t._v("Понятно")])])],1)],1):t._e()],1),e("div",{staticClass:"row items-center head-page",staticStyle:{"padding-bottom":"20px"}},[e("span",{staticClass:"title"},[t._v("Шаг "+t._s(t.$route.params.step)+":")]),e("span",{staticClass:"q-ml-sm subtitle"},[e("span",[t._v("\n            \n             "+t._s(t.userHasSchool?"Укажите параметры выбора тарифа":"Укажите параметры поиска автошколы")+"\n          ")])]),e("q-space"),e("q-btn",{staticClass:"btn-white row items-center",attrs:{"no-caps":"",flat:"",to:"/payments"}},[e("q-icon",{attrs:{name:"img:icons/Cancel_R.svg",size:"16px"}}),e("span",{staticClass:"q-ml-md"},[t._v("Отменить")])],1)],1),t.isloadedPage?e("div",{staticClass:"content-page"},[e("div",{staticClass:"row school-record"},[e("q-card",{staticClass:"card-shadow fit font-sspro-sr"},[e("q-card-section",{staticClass:"q-pa-xl school-record-card-content row"},[e("div",{staticClass:"col-xs-12 col-sm-12 col-md-6 col-lg-6 col-xl-4"},[t.cities.length>0?e("dropdown",{attrs:{title:"Выберите город",value:t.dataRecord.city,options:t.cities},on:{update:function(s){t.dataRecord.city=s,t.getSchoolsData()}}}):t._e(),e("dropdown",{class:{"q-mt-md":t.cities.length>0},attrs:{title:"Категория автошколы",value:t.dataRecord.category,options:t.categories},on:{update:function(s){t.dataRecord.category=s,t.getSchoolsData()}}})],1)]),t.schoolsList?e("q-card-section",{staticClass:"row items-center justify-start fit q-pl-lg",staticStyle:{"max-height":"100px"}},[e("q-btn",{staticClass:"btn-orange",attrs:{flat:"","no-caps":"",disable:!t.isloadedSchool||0==t.schoolsList.length},on:{click:function(s){return t.gotoSchoolOrTariff()}}},[e("q-icon",{attrs:{name:"img:icons/Button_Navigation.svg",size:"20px"}}),e("span",{staticClass:"btn-title"},[t._v("\n                "+t._s(t.userHasSchool?"Показать тарифы":"Показать автошколы")+"\n            \t")])],1),t.schoolsList.length>0&&!t.userHasSchool?e("div",{staticClass:"q-ml-md fs-18"},[t._v("Найдено: "),e("b",[t._v(t._s(t.schoolsList.length))]),t._v("\n                "+t._s(t.getNoun(t.schoolsList.length,"автошкола","автошколы","автошкол"))+"\n              ")]):t._e(),0==t.schoolsList.length?e("div",{staticClass:"q-ml-md fs-18"},[t._v("\n                Автошкол не найдено, попробуйте изменить запрос...\n              ")]):t._e()],1):t._e()],1)],1)]):t._e()],1)},r=[],n=e("6374"),c=e.n(n),l=e("ded3"),d=e.n(l),p=e("711b"),m=e("2f62"),u={name:"PaymentsRecordStep1",components:{Dropdown:p["a"]},data:function(){return{isloadedPage:!1,isloadedSchool:!1,dialogIsUseSchool:!1}},methods:{getSchoolsData:function(){var t=this;this.isloadedSchool=!1;var s={category:this.dataRecord.category};this.cities.length>0&&(s.city_id=this.dataRecord.city),this.getSchools(s).then((function(s){t.isloadedSchool=!0}))},gotoSchoolOrTariff:function(){this.userHasSchool&&(this.dataRecord.school_id=this.userSchool.id),this.$router.push(this.userHasSchool?"/payments/record-school/3":"/payments/record-school/2")}},computed:d()(d()({},Object(m["c"])(["citiesList","userInfo"])),{},{cities:function(){var t,s=[],e=c()(this.citiesList);try{for(e.s();!(t=e.n()).done;){var a=t.value;s.push({label:a.title,value:a.id})}}catch(i){e.e(i)}finally{e.f()}return s},categories:function(){var t,s=[],e=c()(this.categoriesAll);try{for(e.s();!(t=e.n()).done;){var a=t.value;s.push({label:a.toUpperCase(),value:a})}}catch(i){e.e(i)}finally{e.f()}return s}}),mounted:function(){var t=this;this.getCities({}).then((function(s){t.dataRecord.city||(t.dataRecord.city=t.cities.length>0?t.cities[0].value:null),t.isloadedPage=!0,t.dataRecord.phone=t.userInfo.phone}))}},f=u,h=e("2877"),v=e("9989"),g=e("24e8"),q=e("f09f"),C=e("a370"),b=e("eb85"),y=e("9c40"),w=e("2c91"),S=e("0016"),x=e("eebe"),R=e.n(x),$=Object(h["a"])(f,o,r,!1,null,null,null),k=$.exports;R()($,"components",{QPage:v["a"],QDialog:g["a"],QCard:q["a"],QCardSection:C["a"],QSeparator:b["a"],QBtn:y["a"],QSpace:w["a"],QIcon:S["a"]});var P=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("q-page",[e("div",{staticClass:"row items-center head-page",staticStyle:{"padding-bottom":"20px"}},[e("span",{staticClass:"title"},[t._v("Шаг "+t._s(t.$route.params.step)+":")]),e("span",{staticClass:"q-ml-sm subtitle"},[e("span",[t._v("Выберите автошколу")])]),e("q-space"),e("div",{staticClass:"choosing-btns"},[e("div",{staticClass:"toggler"},t._l(t.togglerMenu,(function(s){return e("div",{key:s.title,staticClass:"toggler-item",class:s.isActive?"active":"",on:{click:function(e){return t.toggleMenu(s)}}},[t._v(t._s(s.title))])})),0)]),e("q-btn",{staticClass:"btn-white row items-center",attrs:{"no-caps":"",flat:"",to:"/payments"}},[e("q-icon",{attrs:{name:"img:icons/Cancel_R.svg",size:"16px"}}),e("span",{staticClass:"q-ml-md"},[t._v("Отменить")])],1)],1),e("div",{staticClass:"content-page"},[e("div",{staticClass:"row school-record"},[e("q-card",{staticClass:"fit transparent font-sspro-sr ",attrs:{flat:""}},[t.showMap?e("q-card-section",{staticClass:"school-record-card-content q-pa-none transparent"},[e("l-map",{ref:"map",attrs:{zoom:t.zoom,options:t.mapOptions}},[e("l-tile-layer",{attrs:{url:t.url,attribution:t.attribution}}),t._l(t.schoolsList,(function(s,a){return e("l-marker",{key:s.id,attrs:{"lat-lng":t.getLatLangSchool(s,a),icon:t.icon}},[e("l-popup",[e("div",{staticStyle:{"min-width":"280px","min-height":"100px"}},[e("q-card",{attrs:{flat:""}},[e("q-card-section",{staticClass:"q-pa-none fs-18",attrs:{align:"left"}},[t._v("\n                          "+t._s(s.title)+"\n                        ")]),e("q-card-section",{staticClass:"q-pa-none fs-15 q-mt-xs",staticStyle:{color:"#7b7c8f"},attrs:{align:"left"}},[e("q-icon",{attrs:{name:"img:icons/Address.svg",size:"17px"}}),t._v(" "+t._s(s.address)+"\n                        ")],1),e("q-card-section",{staticClass:"q-pa-none",attrs:{align:"left"}},[e("div",{staticClass:"min-cost-map-popup"},[e("div",{staticClass:"price"},[s.min_cost?e("span",[t._v("От")]):t._e(),t._v("\n                              "+t._s(s.min_cost?t.numberWithSpaces(s.min_cost):"Цена не указана")+"\n                              "),s.min_cost?e("span",{staticClass:"currency"},[t._v("Р")]):t._e()]),e("div",{staticClass:"btn-min-cost",on:{click:function(e){return t.selectSchool(s)}}},[e("span",{staticClass:"fs-12"},[t._v("Подробнее")])])])])],1)],1)])],1)}))],2)],1):t._e(),t.showMap?t._e():e("q-card-section",{staticClass:"q-pa-x transparent school-record-card-content"},[e("div",{staticClass:"swiper-slides fit q-pt-none"},[t.isloadedSchool?t._e():e("div",{staticClass:"fit row items-center justify-center"},[e("q-spinner-puff",{attrs:{color:"accent",size:"100px"}})],1),t.schoolsList&&t.isloadedSchool?e("swiper",{ref:"swiperSchools",staticClass:"swiper fit",attrs:{options:t.swiperOptionSchools}},[t._l(t.schoolsList,(function(s,a){return e("swiper-slide",{key:s.id,staticStyle:{height:"50%"}},[e("div",{staticClass:"q-pt-none",staticStyle:{height:"calc(100% - 10px)",width:"calc(100% - 10px)"}},[e("q-card",{staticClass:"card-shadow font-sspro-sr fit"},[e("q-card-section",{staticClass:"relative-position q-pt-md",staticStyle:{height:"calc(100% - 110px)"}},[e("div",{staticClass:"font-vox-mi fs-24 text-center"},[t._v(t._s(s.title))]),e("div",{staticClass:"font-sspro-sr fs-15 full-width text-center q-mt-sm"},[e("q-icon",{attrs:{name:"img:icons/Address.svg",size:"17px"}}),t._v(" "+t._s(s.address)+"\n                          ")],1),e("div",{staticClass:"font-vox-mi fs-20 text-center q-mb-sm absolute-bottom"},[s.min_cost?e("span",[t._v("От")]):t._e(),t._v("\n                            "+t._s(s.min_cost?t.numberWithSpaces(s.min_cost):"Цена не указана")+"\n                            "),s.min_cost?e("span",{staticClass:"currency"},[t._v("Р")]):t._e()])]),e("q-separator"),e("q-card-section",{attrs:{align:"center"}},[e("q-btn",{staticClass:"btn-orange full-width",attrs:{dense:"",flat:"","no-caps":""},on:{click:function(e){return t.selectSchool(s)}}},[e("span",{staticClass:"btn-title"},[t._v("Выбрать")])])],1)],1)],1)])})),e("div",{staticClass:"swiper-scrollbar",attrs:{slot:"scrollbar"},slot:"scrollbar"})],2):t._e(),e("div",{staticClass:"left-arrow",attrs:{slot:"button-prev"},slot:"button-prev"},[e("img",{attrs:{src:"icons/Arrow_Small.svg",alt:""}})]),e("div",{staticClass:"right-arrow",attrs:{slot:"button-next"},slot:"button-next"},[e("img",{attrs:{src:"icons/Arrow_Small.svg",alt:""}})])],1)]),e("q-card-section",{staticClass:"row items-center justify-start fit q-pl-lg",staticStyle:{"max-height":"100px"}},[e("q-btn",{staticClass:"btn-blue-grey",attrs:{flat:"","no-caps":"",to:"/payments/record-school/1"}},[e("q-icon",{staticStyle:{transform:"rotate(180deg)"},attrs:{name:"img:icons/Button_Navigation.svg",size:"20px"}}),e("span",{staticClass:"btn-title"},[t._v("Назад к параметрам")])],1)],1)],1)],1)])])},z=[],Q=(e("d81d"),e("e11e")),T=e("2699"),O=e("a40a"),I=e("4e2b"),A=e("f60f"),M=e("31dc"),j=(e("6cc5"),e("7212")),D=(e("a7a3"),{name:"PaymentsRecordStep2",components:{Dropdown:p["a"],Swiper:j["Swiper"],SwiperSlide:j["SwiperSlide"],LMap:T["a"],LTileLayer:O["a"],LMarker:I["a"],LPopup:A["a"],LTooltip:M["a"]},data:function(){return{isloadedPage:!1,isloadedSchool:!1,togglerMenu:[{title:"На карте",isActive:!1,ismap:!0},{title:"Списком",isActive:!0,ismap:!1}],swiperOptionSchools:{slidesPerView:4,slidesPerGroup:4,slidesPerColumn:2,slidesPerColumnFill:"row",spaceBetween:0,direction:"horizontal",scrollbar:{el:".swiper-scrollbar",dragClass:"swiper-scrollbar-drag scroll-drag"},navigation:{nextEl:".right-arrow",prevEl:".left-arrow"},breakpoints:{1500:{slidesPerView:4,slidesPerGroup:4,slidesPerColumn:2,slidesPerColumnFill:"row"},890:{slidesPerView:3,slidesPerGroup:3,slidesPerColumn:2,slidesPerColumnFill:"row"},550:{slidesPerView:2,slidesPerGroup:2,slidesPerColumn:2,slidesPerColumnFill:"row"}}},zoom:13,url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',mapOptions:{zoomSnap:.5},showMap:!1,icon:L.icon({iconUrl:"img/mapicon.png",iconSize:[40,48],iconAnchor:[20,0]})}},methods:{getLatLangSchool:function(t,s){return Object(Q["latLng"])(t.address_lat,t.address_lon)},selectSchool:function(t){this.dataRecord.school_id=t.id,this.$router.push("/payments/record-school/3")},toggleMenu:function(t){for(var s=this,e=0;e<this.togglerMenu.length;e++)this.togglerMenu[e].isActive=!1;t.isActive=!0,this.showMap=t.ismap,t.ismap&&this.$nextTick((function(){s.$refs.map.mapObject.fitBounds(s.schoolsList.map((function(t){return[t.address_lat,t.address_lon]})))}))}},computed:d()(d()({},Object(m["c"])(["citiesList","schoolsList","tariffsList","userInfo"])),{},{cities:function(){var t,s=[],e=c()(this.citiesList);try{for(e.s();!(t=e.n()).done;){var a=t.value;s.push({label:a.title,value:a.id})}}catch(i){e.e(i)}finally{e.f()}return s},categories:function(){var t,s=[],e=c()(this.categoriesAll);try{for(e.s();!(t=e.n()).done;){var a=t.value;s.push({label:a.toUpperCase(),value:a})}}catch(i){e.e(i)}finally{e.f()}return s}}),mounted:function(){var t=this,s={category:this.dataRecord.category};this.cities.length>0&&(s.city_id=this.dataRecord.city),this.getSchools(s).then((function(s){t.isloadedSchool=!0}))}}),B=D,N=e("06d5"),H=Object(h["a"])(B,P,z,!1,null,null,null),W=H.exports;R()(H,"components",{QPage:v["a"],QSpace:w["a"],QBtn:y["a"],QIcon:S["a"],QCard:q["a"],QCardSection:C["a"],QSpinnerPuff:N["a"],QSeparator:b["a"]});var E=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("q-page",[e("div",{staticClass:"row items-center head-page",staticStyle:{"padding-bottom":"20px"}},[e("span",{staticClass:"title"},[t._v("Шаг "+t._s(t.userHasSchool?t.$route.params.step-1:t.$route.params.step)+":")]),e("span",{staticClass:"q-ml-sm subtitle"},[e("span",[t._v("Выберите тариф")])]),e("q-space"),e("q-btn",{staticClass:"btn-white row items-center",attrs:{"no-caps":"",flat:"",to:"/payments"}},[e("q-icon",{attrs:{name:"img:icons/Cancel_R.svg",size:"16px"}}),e("span",{staticClass:"q-ml-md"},[t._v("Отменить")])],1)],1),e("div",{staticClass:"content-page"},[e("div",{staticClass:"row school-record"},[e("q-card",{staticClass:"fit transparent font-sspro-sr",attrs:{flat:""}},[e("q-card-section",{staticClass:"q-pa-x transparent school-record-card-content"},[e("div",{staticClass:"swiper-slides fit q-pa-none"},[t.isloadedTariffs?t._e():e("div",{staticClass:"fit row items-center justify-center"},[e("q-spinner-puff",{attrs:{color:"accent",size:"100px"}})],1),e("swiper",{ref:"swiperTariffs",staticClass:"swiper fit",attrs:{options:t.swiperOptionTariffs}},[t.tariffsList&&0==t.tariffsList.length&&t.isloadedTariffs?e("swiper-slide",{staticClass:"fit"},[e("q-card",{staticClass:"card-shadow font-sspro-sr fit"},[e("q-card-section",{staticClass:"fit row items-center justify-center"},[e("q-card",{attrs:{flat:""}},[e("q-card-section",{staticClass:"row"},[e("q-list",{staticClass:"q-pa-none",attrs:{separator:""}},[e("q-item",[e("q-item-section",[e("q-item-label",{staticClass:"fs-18 text-accent"},[t._v(t._s(t.currentSchool.title))])],1)],1),e("q-item",{directives:[{name:"show",rawName:"v-show",value:t.currentSchool.address,expression:"currentSchool.address"}],staticClass:"q-pt-none"},[e("q-item-section",{attrs:{side:""}},[e("q-icon",{attrs:{name:"img:icons/Address.svg",size:"25px"}})],1),e("q-item-section",[e("q-item-label",[t._v(t._s(t.currentSchool.address))])],1)],1),e("q-item",{directives:[{name:"show",rawName:"v-show",value:t.currentSchool.phone,expression:"currentSchool.phone"}],staticClass:"q-pt-none"},[e("q-item-section",{attrs:{side:""}},[e("q-icon",{attrs:{name:"img:icons/Phone.svg",size:"20px"}})],1),e("q-item-section",[e("q-item-label",[t._v(t._s(t.currentSchool.phone))])],1)],1),e("q-item",{directives:[{name:"show",rawName:"v-show",value:t.currentSchool.site_url,expression:"currentSchool.site_url"}],staticClass:"q-pt-none"},[e("q-item-section",{attrs:{side:""}},[e("q-icon",{attrs:{name:"img:icons/websait.svg",size:"20px"}})],1),e("q-item-section",[e("q-item-label",[e("a",{staticClass:"text-accent",attrs:{target:"_blank",href:t.currentSchool.site_url}},[t._v(t._s(t.currentSchool.site_url))])])],1)],1),e("q-item",{directives:[{name:"show",rawName:"v-show",value:t.currentSchool.email,expression:"currentSchool.email"}],staticClass:"q-pt-none"},[e("q-item-section",{attrs:{side:""}},[e("q-icon",{attrs:{name:"img:icons/email.svg",size:"20px"}})],1),e("q-item-section",[e("q-item-label",[t._v(t._s(t.currentSchool.email))])],1)],1)],1)],1)],1)],1)],1)],1):t._e(),t._l(t.tariffsList,(function(s,a){return t.tariffsList&&t.tariffsList.length>0&&t.isloadedTariffs?e("swiper-slide",{key:s.id,staticStyle:{height:"100%"}},[e("div",{staticClass:"q-pt-none q-pb-md",staticStyle:{height:"calc(100% - 10px)",width:"calc(100% - 10px)"}},[e("q-card",{staticClass:"card-shadow font-sspro-sr fit"},[e("q-card-section",{staticClass:"relative-position q-pa-none",staticStyle:{height:"calc(100% - 80px)"}},[e("div",{staticClass:"full-width text-center"},[e("q-icon",{attrs:{name:"img:icons/Payment_B_R.svg",size:"72px"}})],1),e("div",{staticClass:"full-width text-center font-vox-mi fs-24"},[t._v("\n                        "+t._s(s.title)+"\n                      ")]),e("div",{staticClass:"full-width q-pa-none q-mt-lg"},[e("q-separator"),e("q-list",{staticClass:"q-pa-none",attrs:{separator:"",dense:""}},t._l(s.description.split("\r\n"),(function(s,a){return e("q-item",{key:a},[e("q-item-section",[e("q-item-label",{staticClass:"q-pt-md q-pb-md text-center"},[t._v("\n                                "+t._s(s)+"\n                              ")])],1)],1)})),1)],1)]),e("q-separator"),e("q-card-section",{staticClass:"row items-center",attrs:{align:"center"}},[e("div",{staticClass:"font-vox-mi fs-24 text-center"},[t._v("\n                        "+t._s(s.cost?t.numberWithSpaces(s.cost):"Цена не указана")+" "),s.cost?e("span",{staticClass:"currency"},[t._v("Р")]):t._e()]),e("q-space"),e("q-btn",{staticClass:"btn-orange",attrs:{dense:"",flat:"","no-caps":""},on:{click:function(e){return t.selectTariff(s)}}},[e("q-icon",{attrs:{name:"img:icons/Check_W.svg",size:"16px"}}),e("span",{staticClass:"btn-title q-pr-sm"},[t._v("Выбрать")])],1)],1)],1)],1)]):t._e()})),e("div",{staticClass:"swiper-scrollbar",attrs:{slot:"scrollbar"},slot:"scrollbar"})],2),e("div",{staticClass:"left-arrow",attrs:{slot:"button-prev"},slot:"button-prev"},[e("img",{attrs:{src:"icons/Arrow_Small.svg",alt:""}})]),e("div",{staticClass:"right-arrow",attrs:{slot:"button-next"},slot:"button-next"},[e("img",{attrs:{src:"icons/Arrow_Small.svg",alt:""}})])],1)]),e("q-card-section",{staticClass:"row items-center justify-start fit q-pl-lg",staticStyle:{"max-height":"100px"}},[e("q-btn",{staticClass:"btn-blue-grey",attrs:{flat:"","no-caps":""},on:{click:function(s){return t.backTo()}}},[e("q-icon",{staticStyle:{transform:"rotate(180deg)"},attrs:{name:"img:icons/Button_Navigation.svg",size:"20px"}}),e("span",{staticClass:"btn-title"},[t._v("Назад к выбору автошкол")])],1),t.currentSchool?e("div",{staticClass:"col"},[e("q-item",[e("q-item-section",[e("q-item-label",{staticClass:"fs-20 font-vox-mi"},[t._v("\n                  Вы выбрали автошколу “"+t._s(t.currentSchool.title)+"”\n                ")]),e("q-item-label",{staticClass:"fs-15 font-sspro-sr"},[e("q-icon",{attrs:{name:"img:icons/Address.svg",size:"17px"}}),t._v("\n                  "+t._s(t.currentSchool.address)+"\n                ")],1)],1)],1)],1):t._e()],1)],1)],1)])])},F=[],J=(e("7db0"),{name:"PaymentsRecordStep3",components:{Dropdown:p["a"],Swiper:j["Swiper"],SwiperSlide:j["SwiperSlide"]},data:function(){return{isloadedTariffs:!1,swiperOptionTariffs:{slidesPerView:4,slidesPerGroup:4,slidesPerColumn:1,spaceBetween:0,direction:"horizontal",scrollbar:{el:".swiper-scrollbar",dragClass:"swiper-scrollbar-drag scroll-drag"},navigation:{nextEl:".right-arrow",prevEl:".left-arrow"},breakpoints:{1170:{slidesPerView:4,slidesPerGroup:4,slidesPerColumn:1},890:{slidesPerView:3,slidesPerGroup:3,slidesPerColumn:1},550:{slidesPerView:2,slidesPerGroup:2,slidesPerColumn:1}}}}},methods:{selectTariff:function(t){this.dataRecord.tariff_id=t.id,this.$router.push("/payments/record-school/4/")},backTo:function(){this.$router.push(this.userHasSchool?"/payments/record-school/1":"/payments/record-school/2")}},computed:d()(d()({},Object(m["c"])(["tariffsList","userInfo"])),{},{currentSchool:function(){return this.dataRecord.school_id?_.find(this.schoolsList,{id:this.dataRecord.school_id}):null}}),mounted:function(){var t=this;this.getTariffs({school_id:this.dataRecord.school_id,category:this.dataRecord.category}).then((function(s){t.isloadedTariffs=!0,t.$nextTick((function(){t.$refs.swiperTariffs.$swiper.slideTo(1,300)}))}))}}),U=J,G=e("1c1c"),V=e("66e5"),Y=e("4074"),K=e("0170"),X=Object(h["a"])(U,E,F,!1,null,null,null),Z=X.exports;R()(X,"components",{QPage:v["a"],QSpace:w["a"],QBtn:y["a"],QIcon:S["a"],QCard:q["a"],QCardSection:C["a"],QSpinnerPuff:N["a"],QList:G["a"],QItem:V["a"],QItemSection:Y["a"],QItemLabel:K["a"],QSeparator:b["a"]});var tt=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("q-page",[e("div",{staticClass:"row items-center head-page",staticStyle:{"padding-bottom":"20px"}},[e("span",{staticClass:"title"},[t._v("Шаг "+t._s(t.userHasSchool?t.$route.params.step-1:t.$route.params.step)+":")]),e("span",{staticClass:"q-ml-sm subtitle"},[e("span",[t._v("Соглашение")])]),e("q-space"),e("q-btn",{staticClass:"btn-white row items-center",attrs:{"no-caps":"",flat:"",to:"/payments"}},[e("q-icon",{attrs:{name:"img:icons/Cancel_R.svg",size:"16px"}}),e("span",{staticClass:"q-ml-md"},[t._v("Отменить")])],1)],1),e("div",{staticClass:"content-page"},[e("div",{staticClass:"row school-record"},[4==t.$route.params.step?e("q-card",{staticClass:"card-shadow fit font-sspro-sr"},[e("q-card-section",{staticClass:"school-record-card-content row"},[t.isloadedContract?t._e():e("div",{staticClass:"fit row items-center justify-center"},[e("q-spinner-puff",{attrs:{color:"accent",size:"100px"}})],1),t.isloadedContract?e("div",{staticClass:"scroll q-pa-sm",staticStyle:{height:"calc(100% - 50px)"}},[e("div",{staticClass:"fs-18",domProps:{innerHTML:t._s(t.textContract)}})]):t._e(),t.isloadedContract?e("div",{staticClass:"row items-center",staticStyle:{height:"60px"}},[e("q-checkbox",{attrs:{size:"sm",color:"accent"},model:{value:t.agree,callback:function(s){t.agree=s},expression:"agree"}},[e("span",{staticClass:"fs-14"},[t._v("Я прочитал и согласен с условиями договора")])])],1):t._e()]),e("q-card-section",{staticClass:"row items-center justify-start fit q-pl-lg",staticStyle:{"max-height":"100px"}},[e("q-btn",{staticClass:"btn-blue-grey",attrs:{flat:"","no-caps":"",to:"/payments/record-school/3"}},[e("q-icon",{staticStyle:{transform:"rotate(180deg)"},attrs:{name:"img:icons/Button_Navigation.svg",size:"20px"}}),e("span",{staticClass:"btn-title"},[t._v("Назад")])],1),e("q-space"),e("q-btn",{staticClass:"btn-orange",attrs:{flat:"","no-caps":"",to:"/payments/record-school/5",disable:!t.agree}},[e("q-icon",{attrs:{name:"img:icons/Button_Navigation.svg",size:"20px"}}),e("span",{staticClass:"btn-title"},[t._v("Далее")])],1)],1)],1):t._e()],1)])])},st=[],et={name:"PaymentsRecordStep4",components:{Dropdown:p["a"]},data:function(){return{isloadedContract:!1,agree:!1,textContract:""}},methods:{genContract:function(t){var s=this,e=JSON.parse(JSON.stringify(this.dataRecord));e.response_type=t,"html"==t&&(this.isloadedContract=!1,e.passport_series="__",e.passport_number="______",e.passport_issued_by="__________",e.passport_date="__________",e.last_name="__________",e.first_name="__________",e.patronymic="__________",e.address="______________",e.registration_address="______________",e.address_equals=!0),this.generateContract(e).then((function(e){if(200==e.status){if("html"==t){var a=(new DOMParser).parseFromString(e.data,"text/html");s.textContract=a.querySelector("body").innerHTML}if("pdf"==t){var i=new Blob([e.data],{type:"application/pdf;charset=utf-8"});FileSaver.saveAs(i,"dogovor.pdf")}s.isloadedContract=!0}}))}},computed:d()({},Object(m["c"])(["userInfo"])),mounted:function(){this.genContract("html")}},at=et,it=e("8f8e"),ot=Object(h["a"])(at,tt,st,!1,null,null,null),rt=ot.exports;R()(ot,"components",{QPage:v["a"],QSpace:w["a"],QBtn:y["a"],QIcon:S["a"],QCard:q["a"],QCardSection:C["a"],QSpinnerPuff:N["a"],QCheckbox:it["a"]});var nt=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("q-page",[e("div",{staticClass:"row items-center head-page",staticStyle:{"padding-bottom":"20px"}},[e("span",{staticClass:"title"},[t._v("Шаг "+t._s(t.userHasSchool?t.$route.params.step-1:t.$route.params.step)+":")]),e("span",{staticClass:"q-ml-sm subtitle"},[e("span",[t._v("Паспортные данные")])]),e("q-space"),e("q-btn",{staticClass:"btn-white row items-center",attrs:{"no-caps":"",flat:"",to:"/payments"}},[e("q-icon",{attrs:{name:"img:icons/Cancel_R.svg",size:"16px"}}),e("span",{staticClass:"q-ml-md"},[t._v("Отменить")])],1)],1),t.isloadedPage?e("div",{staticClass:"content-page"},[e("div",{staticClass:"row school-record"},[5==t.$route.params.step?e("q-form",{ref:"form_pass",staticClass:"fit"},[e("q-card",{staticClass:"card-shadow fit font-sspro-sr"},[e("q-card-section",{staticClass:"q-pa-sm school-record-card-content scroll"},[e("div",{staticClass:"row items-center q-pa-md text-subtitle1",staticStyle:{background:"#f0f1f7","border-radius":"7px"}},[e("span",{staticClass:"round-icon"},[t._v("i")]),t._v(" Для оформления онлайн договора внесите свои паспортные данные.\n                ")]),e("div",{staticClass:"q-pa-md",style:{width:t.$q.screen.width<1200?"100%":"80%"}},[e("div",{staticClass:"row items-center"},[e("div",{staticClass:"col-auto q-pr-md",staticStyle:{"min-width":"150px",width:"150px"}},[e("div",{staticClass:"input-title"},[t._v("Серия")]),e("q-input",{staticClass:"input50h",attrs:{rounded:"",outlined:"",placeholder:"—",mask:"## ##","unmasked-value":"",rules:[function(t){return!!t},function(t){return 4==t.length}],"no-error-icon":"","lazy-rules":"","hide-bottom-space":""},model:{value:t.dataRecord.passport_series,callback:function(s){t.$set(t.dataRecord,"passport_series",s)},expression:"dataRecord.passport_series"}})],1),e("div",{staticClass:"col-auto q-pr-md",staticStyle:{"min-width":"200px",width:"200px"}},[e("div",{staticClass:"input-title"},[t._v("Номер")]),e("q-input",{staticClass:"input50h",attrs:{rounded:"",outlined:"",placeholder:"—",mask:"######","unmasked-value":"",rules:[function(t){return!!t},function(t){return 6==t.length}],"no-error-icon":"","lazy-rules":"","hide-bottom-space":""},model:{value:t.dataRecord.passport_number,callback:function(s){t.$set(t.dataRecord,"passport_number",s)},expression:"dataRecord.passport_number"}})],1),e("div",{class:{"col-4":t.$q.screen.width<1200,"col q-pr-md":t.$q.screen.width>1200}},[e("div",{staticClass:"input-title"},[t._v("Фамилия")]),e("q-input",{staticClass:"input50h",attrs:{rounded:"",outlined:"",placeholder:"—",rules:[function(t){return!!t}],"no-error-icon":"","lazy-rules":"","hide-bottom-space":""},model:{value:t.dataRecord.last_name,callback:function(s){t.$set(t.dataRecord,"last_name",s)},expression:"dataRecord.last_name"}})],1),e("div",{class:{"col-4":t.$q.screen.width<1200,"col q-pr-md":t.$q.screen.width>1200}},[e("div",{staticClass:"input-title"},[t._v("Имя")]),e("q-input",{staticClass:"input50h",attrs:{rounded:"",outlined:"",placeholder:"—",rules:[function(t){return!!t}],"no-error-icon":"","lazy-rules":"","hide-bottom-space":""},model:{value:t.dataRecord.first_name,callback:function(s){t.$set(t.dataRecord,"first_name",s)},expression:"dataRecord.first_name"}})],1),e("div",{class:{"col-4 q-pl-md":t.$q.screen.width<1200,"col q-pr-md":t.$q.screen.width>1200}},[e("div",{staticClass:"input-title"},[t._v("Отчество")]),e("q-input",{staticClass:"input50h",attrs:{rounded:"",outlined:"",placeholder:"—",rules:[function(t){return!!t}],"no-error-icon":"","lazy-rules":"","hide-bottom-space":""},model:{value:t.dataRecord.patronymic,callback:function(s){t.$set(t.dataRecord,"patronymic",s)},expression:"dataRecord.patronymic"}})],1)]),e("div",{staticClass:"row items-center q-mt-md"},[e("div",{staticClass:"col q-pr-md"},[e("div",{staticClass:"input-title"},[t._v("Кем выдан")]),e("q-input",{staticClass:"input50h",attrs:{rounded:"",outlined:"",placeholder:"—",rules:[function(t){return!!t}],"no-error-icon":"","lazy-rules":"","hide-bottom-space":""},model:{value:t.dataRecord.passport_issued_by,callback:function(s){t.$set(t.dataRecord,"passport_issued_by",s)},expression:"dataRecord.passport_issued_by"}})],1),e("div",{staticClass:"col-auto",staticStyle:{width:"200px"}},[e("div",{staticClass:"input-title"},[t._v("Когда выдан")]),e("q-input",{staticClass:"input50h",attrs:{rounded:"",outlined:"",mask:"####-##-##",placeholder:"ГГГГ-ММ-ДД",rules:[function(t){return!!t}],"no-error-icon":"","lazy-rules":"","hide-bottom-space":""},model:{value:t.dataRecord.passport_date,callback:function(s){t.$set(t.dataRecord,"passport_date",s)},expression:"dataRecord.passport_date"}})],1)]),e("div",{staticClass:"row q-mt-md"},[e("div",{class:{"col-8":t.$q.screen.width>1200,col:t.$q.screen.width<1200}},[e("div",{staticClass:"input-title"},[t._v("Адрес прописки")]),e("q-input",{staticClass:"input50h",attrs:{rounded:"",outlined:"",placeholder:"—",rules:[function(t){return!!t}],"no-error-icon":"","lazy-rules":"","hide-bottom-space":""},model:{value:t.dataRecord.address,callback:function(s){t.$set(t.dataRecord,"address",s)},expression:"dataRecord.address"}})],1)]),e("div",{staticClass:"row q-mt-md"},[e("div",{class:{"col-7":t.$q.screen.width>1200,col:t.$q.screen.width<1200}},[e("div",{staticClass:"input-title"},[t._v("Фактический адрес прописки")]),e("q-input",{staticClass:"input50h",attrs:{rounded:"",outlined:"",disable:t.dataRecord.address_equals,placeholder:"—",rules:[function(t){return!!t}],"no-error-icon":"","lazy-rules":"","hide-bottom-space":""},model:{value:t.dataRecord.registration_address,callback:function(s){t.$set(t.dataRecord,"registration_address",s)},expression:"dataRecord.registration_address"}})],1),e("div",{staticClass:"col-auto row items-center q-ml-md"},[e("q-checkbox",{staticStyle:{"margin-top":"40px"},attrs:{size:"sm",color:"accent"},on:{input:function(s){t.dataRecord.registration_address=s?t.dataRecord.address:""}},model:{value:t.dataRecord.address_equals,callback:function(s){t.$set(t.dataRecord,"address_equals",s)},expression:"dataRecord.address_equals"}},[e("span",{staticClass:"fs-14"},[t._v("Совпадает с адресом прописки")])])],1)])])]),e("q-card-section",{staticClass:"row items-center justify-start fit q-pl-lg bg-white",staticStyle:{"max-height":"100px"}},[e("q-btn",{staticClass:"btn-blue-grey",attrs:{flat:"","no-caps":"",to:"/payments/record-school/4"}},[e("q-icon",{staticStyle:{transform:"rotate(180deg)"},attrs:{name:"img:icons/Button_Navigation.svg",size:"20px"}}),e("span",{staticClass:"btn-title"},[t._v("Назад")])],1),e("q-space"),e("q-btn",{staticClass:"btn-orange",attrs:{flat:"","no-caps":""},on:{click:function(s){return t.validatePassportData()}}},[e("q-icon",{attrs:{name:"img:icons/Button_Navigation.svg",size:"20px"}}),e("span",{staticClass:"btn-title"},[t._v("Далее")])],1)],1)],1)],1):t._e()],1)]):t._e()])},ct=[],lt={name:"PaymentsRecordStep1",components:{Dropdown:p["a"]},data:function(){return{isloadedPage:!1}},methods:{validatePassportData:function(){var t=this;this.$refs.form_pass.validate().then((function(s){s?t.$router.push("/payments/record-school/6"):t.$q.notify({icon:"warning",message:"Заполните обязательные поля!",timeout:3e3,color:"blue-grey-10",html:!0,position:"top"})}))},getSchoolsData:function(){var t=this;this.isloadedSchool=!1;var s={category:this.dataRecord.category};this.cities.length>0&&(s.city_id=this.dataRecord.city),this.getSchools(s).then((function(s){t.isloadedSchool=!0}))}},computed:d()(d()({},Object(m["c"])(["citiesList","schoolsList","tariffsList","userInfo"])),{},{cities:function(){var t,s=[],e=c()(this.citiesList);try{for(e.s();!(t=e.n()).done;){var a=t.value;s.push({label:a.title,value:a.id})}}catch(i){e.e(i)}finally{e.f()}return s},categories:function(){var t,s=[],e=c()(this.categoriesAll);try{for(e.s();!(t=e.n()).done;){var a=t.value;s.push({label:a.toUpperCase(),value:a})}}catch(i){e.e(i)}finally{e.f()}return s}}),mounted:function(){var t=this;this.getCities({}).then((function(s){t.dataRecord.city||(t.dataRecord.city=t.cities.length>0?t.cities[0].value:null),t.isloadedPage=!0,t.dataRecord.phone=t.userInfo.phone}))}},dt=lt,pt=e("0378"),mt=e("27f9"),ut=Object(h["a"])(dt,nt,ct,!1,null,null,null),ft=ut.exports;R()(ut,"components",{QPage:v["a"],QSpace:w["a"],QBtn:y["a"],QIcon:S["a"],QForm:pt["a"],QCard:q["a"],QCardSection:C["a"],QInput:mt["a"],QCheckbox:it["a"]});var _t=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("q-page",[e("div",{staticClass:"row items-center head-page",staticStyle:{"padding-bottom":"20px"}},[e("span",{staticClass:"title"},[t._v("Шаг "+t._s(t.userHasSchool?t.$route.params.step-1:t.$route.params.step)+":")]),e("span",{staticClass:"q-ml-sm subtitle"},[e("span",[t._v("Подтверждение оплаты")])]),e("q-space"),e("q-btn",{staticClass:"btn-white row items-center",attrs:{"no-caps":"",flat:"",to:"/payments"}},[e("q-icon",{attrs:{name:"img:icons/Cancel_R.svg",size:"16px"}}),e("span",{staticClass:"q-ml-md"},[t._v("Отменить")])],1)],1),t.isloadedPage?e("div",{staticClass:"content-page"},[e("div",{staticClass:"row school-record"},[e("q-form",{ref:"form_prepearepay",staticClass:"fit"},[e("q-card",{staticClass:"card-shadow fit font-sspro-sr"},[e("q-card-section",{staticClass:"school-record-card-content q-pa-none"},[e("div",{staticClass:"gradient-grey full-width q-pa-md fs-18 row items-center",staticStyle:{height:"100px"}},[e("div",[t._v("\n                    Ваш онлайн-договор доступен по "),e("span",{staticClass:"text-accent cursor-pointer",on:{click:function(s){return t.genContract("pdf")}}},[t._v("ссылке.")]),e("br"),t._v("\n                    Чтобы договор вступил в силу, нужно внести не менее "),e("b",[t._v(t._s(t.numberWithSpaces(t.currentTariff.min_first_pay)))]),t._v(" рублей\n                  ")])]),e("div",{staticClass:"row font-vox-mi items-center q-pa-md full-width"},[e("div",{staticClass:"col-auto q-pa-sm"},[e("div",{staticClass:"input-title"},[t._v("Введите промокод")]),e("q-input",{staticClass:"input50h",attrs:{rounded:"",outlined:""},model:{value:t.dataRecord.promo,callback:function(s){t.$set(t.dataRecord,"promo",s)},expression:"dataRecord.promo"}})],1),e("div",{staticClass:"col-auto self-end q-pa-sm"},[e("q-btn",{staticClass:"q-mb-sm",attrs:{"no-caps":"",flat:"",disable:!t.dataRecord.promo},on:{click:function(s){return t.applyDiscount()}}},[e("q-icon",{attrs:{name:"img:icons/Apply_Promo.svg",size:"16px"}}),e("span",{staticClass:"q-ml-sm font-sspro-sr fs-15 text-accent"},[t._v("Применить")])],1)],1)]),e("div",{staticClass:"row q-pl-lg q-pr-lg"},[e("div",{staticClass:"col"},[e("div",{staticClass:"input-title"},[t._v("Email")]),e("q-input",{ref:"email",staticClass:"input50h",attrs:{rounded:"",outlined:"",type:"email",placeholder:"—"},model:{value:t.dataRecord.email,callback:function(s){t.$set(t.dataRecord,"email",s)},expression:"dataRecord.email"}})],1),e("div",{staticClass:"col q-ml-md"},[e("div",{staticClass:"input-title"},[t._v("Телефон")]),e("q-input",{ref:"phone",staticClass:"input50h",attrs:{rounded:"",outlined:"",mask:"+7 (###) ###-##-##","unmasked-value":"",placeholder:"+7"},model:{value:t.dataRecord.phone,callback:function(s){t.$set(t.dataRecord,"phone",s)},expression:"dataRecord.phone"}})],1)]),e("div",{staticClass:"row font-vox-mi q-pa-md full-width"},[e("div",{staticClass:"col-auto"},[e("q-item",[e("q-item-section",[e("q-item-label",{staticClass:"fs-20 text-secondary"},[t._v("Стоимость")]),e("q-item-label",{staticClass:"fs-32 text-dark"},[t._v(t._s(t.numberWithSpaces(t.currentTariff.cost))+" "),e("span",{staticClass:"currency"},[t._v("Р")])])],1)],1)],1),e("div",{staticClass:"col-auto q-pl-md"},[e("q-item",[e("q-item-section",[e("q-item-label",{staticClass:"fs-20 text-secondary"},[t._v("Скидка")]),e("q-item-label",{staticClass:"fs-32 text-dark"},[t._v("0 "),e("span",{staticClass:"currency"},[t._v("Р")])])],1)],1)],1),e("div",{staticClass:"col-auto q-pl-md"},[e("q-item",[e("q-item-section",[e("q-item-label",{staticClass:"fs-20 text-secondary"},[t._v("Итого к оплате")]),e("q-item-label",{staticClass:"fs-32 text-dark"},[t._v(t._s(t.numberWithSpaces(t.currentTariff.cost))+" "),e("span",{staticClass:"currency"},[t._v("Р")])])],1)],1)],1)])]),e("q-card-section",{staticClass:"row items-center justify-start fit q-pl-lg gradient-grey",staticStyle:{"max-height":"100px"}},[e("q-btn",{staticClass:"btn-blue-grey",attrs:{flat:"","no-caps":"",to:"/payments/record-school/5"}},[e("q-icon",{staticStyle:{transform:"rotate(180deg)"},attrs:{name:"img:icons/Button_Navigation.svg",size:"20px"}}),e("span",{staticClass:"btn-title"},[t._v("Назад")])],1),e("q-space"),e("span",[t._v("Сумма оплаты:")]),e("q-input",{staticClass:"input50h q-ml-md",attrs:{rounded:"",outlined:"",placeholder:"—",rules:[function(t){return!!t}],"no-error-icon":"","lazy-rules":"","hide-bottom-space":""},model:{value:t.dataRecord.amount,callback:function(s){t.$set(t.dataRecord,"amount",s)},expression:"dataRecord.amount"}}),e("q-btn",{staticClass:"btn-orange q-ml-md",attrs:{flat:"","no-caps":""},on:{click:function(s){return t.prepearePay()}}},[e("q-icon",{attrs:{name:"img:icons/Button_Payments.svg",size:"20px"}}),e("span",{staticClass:"btn-title"},[t._v("Оплатить и завершить")])],1)],1)],1)],1)],1)]):t._e()])},ht=[],vt=(e("ac1f"),e("5319"),{name:"PaymentsRecordStep1",components:{Dropdown:p["a"]},data:function(){return{isloadedPage:!1,isloadedSchool:!1}},methods:{genContract:function(t){var s=this,e=JSON.parse(JSON.stringify(this.dataRecord));e.response_type=t,"html"==t&&(this.loadedContract=!1,e.passport_series="__",e.passport_number="______",e.passport_issued_by="__________",e.passport_date="__________",e.last_name="__________",e.first_name="__________",e.patronymic="__________",e.address="______________",e.registration_address="______________",e.address_equals=!0),this.generateContract(e).then((function(e){if(200==e.status){if("html"==t){var a=(new DOMParser).parseFromString(e.data,"text/html");s.textContract=a.querySelector("body").innerHTML,s.loadedContract=!0}if("pdf"==t){var i=new Blob([e.data],{type:"application/pdf;charset=utf-8"});FileSaver.saveAs(i,"dogovor.pdf")}}}))},prepearePay:function(){var t=this;this.$refs.form_prepearepay.validate().then((function(s){if(s){if(!t.dataRecord.email&&!t.dataRecord.phone)return t.$refs.email.validate(),void t.$q.notify({icon:"warning",message:"Укажите email и/или телефон",timeout:3e3,color:"blue-grey-10",html:!0,position:"top"});if(parseInt(t.dataRecord.amount)<parseInt(t.currentTariff.min_first_pay))return void t.$q.notify({icon:"warning",message:"Сумма оплаты не менее "+t.currentTariff.min_first_pay+" рублей",timeout:3e3,color:"blue-grey-10",html:!0,position:"top"});var e=JSON.parse(JSON.stringify(t.dataRecord));if(e.phone){t.$delete(e,"email");var a=e.phone.replace("+7","");e.phone="+7"+a}e.email&&t.$delete(e,"phone"),t.$router.push("/payments/record-school/7")}else t.$q.notify({icon:"warning",message:"Заполните обязательные поля!",timeout:3e3,color:"blue-grey-10",html:!0,position:"top"})}))},applyDiscount:function(){this.$q.notify({icon:"warning",message:"Промокод не действительный!",timeout:3e3,color:"blue-grey-10",html:!0,position:"top"})}},computed:d()(d()({},Object(m["c"])(["citiesList","schoolsList","tariffsList","userInfo"])),{},{cities:function(){var t,s=[],e=c()(this.citiesList);try{for(e.s();!(t=e.n()).done;){var a=t.value;s.push({label:a.title,value:a.id})}}catch(i){e.e(i)}finally{e.f()}return s},currentTariff:function(){return this.dataRecord.tariff_id?_.find(this.tariffsList,{id:this.dataRecord.tariff_id}):null}}),mounted:function(){var t=this;this.getCities({}).then((function(s){t.dataRecord.city||(t.dataRecord.city=t.cities.length>0?t.cities[0].value:null),t.isloadedPage=!0,t.dataRecord.phone=t.userInfo.phone})),this.dataRecord.amount||(this.dataRecord.amount=this.currentTariff?parseFloat(this.currentTariff.min_first_pay):"")}}),gt=vt,qt=Object(h["a"])(gt,_t,ht,!1,null,null,null),Ct=qt.exports;R()(qt,"components",{QPage:v["a"],QSpace:w["a"],QBtn:y["a"],QIcon:S["a"],QForm:pt["a"],QCard:q["a"],QCardSection:C["a"],QInput:mt["a"],QItem:V["a"],QItemSection:Y["a"],QItemLabel:K["a"]});var bt=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("q-page",[e("div",{staticClass:"row items-center head-page",staticStyle:{"padding-bottom":"20px"}},[e("span",{staticClass:"title"},[t._v("Шаг "+t._s(t.userHasSchool?t.$route.params.step-1:t.$route.params.step)+":")]),e("span",{staticClass:"q-ml-sm subtitle"},[e("span",[t._v("Оплата")])]),e("q-space"),e("q-btn",{staticClass:"btn-white row items-center",attrs:{"no-caps":"",flat:"",to:"/payments"}},[e("q-icon",{attrs:{name:"img:icons/Cancel_R.svg",size:"16px"}}),e("span",{staticClass:"q-ml-md"},[t._v("Отменить")])],1)],1),e("div",{staticClass:"content-page"},[e("div",{staticClass:"row school-record"},[e("q-card",{staticClass:"card-shadow fit font-sspro-sr"},[e("q-card-section",{staticClass:"q-pa-xs school-record-card-content row"},[e("iframe",{directives:[{name:"show",rawName:"v-show",value:t.isloadedWidget,expression:"isloadedWidget"}],staticClass:"fit",staticStyle:{border:"none"},attrs:{id:"iframe-pay",src:t.widget_uri,bordered:"0"}}),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.isloadedWidget,expression:"!isloadedWidget"}],staticClass:"fit flex flex-center"},[e("div",{staticClass:"text-center"},[e("img",{attrs:{src:"https://www.cdn-tinkoff.ru/platform/modules/header/1.22.2/8e5ac93f884752e5b61104ccc1d62aca.svg",width:"150px"}}),e("br"),e("br"),t._v("\n                  Загрузка платежного модуля...\n                ")])])]),e("q-card-section",{staticClass:"row items-center justify-start fit q-pl-lg",staticStyle:{"max-height":"100px"}},[e("q-btn",{staticClass:"btn-blue-grey",attrs:{flat:"","no-caps":"",to:"/payments/record-school/6"}},[e("q-icon",{staticStyle:{transform:"rotate(180deg)"},attrs:{name:"img:icons/Button_Navigation.svg",size:"20px"}}),e("span",{staticClass:"btn-title"},[t._v("Назад")])],1),e("q-space")],1)],1)],1)])])},yt=[],wt={name:"PaymentsRecordStep1",components:{Dropdown:p["a"]},data:function(){return{widget_uri:null,isloadedWidget:!1}},methods:{},mounted:function(){var t=this,s=JSON.parse(JSON.stringify(this.dataRecord));if(s.phone){this.$delete(s,"email");var e=s.phone.replace("+7","");s.phone="+7"+e}s.email&&this.$delete(s,"phone"),this.paySchoolTinkoff(s).then((function(s){t.isloadedWidget=!0,400!=s.status?200==s.status&&(t.widget_uri=s.data.widget_uri):t.$q.notify({icon:"warning",message:s.data.errors[0].message,timeout:3e3,color:"blue-grey-10",html:!0,position:"top"})})).catch((function(s){t.loadedWidget=!0}))}},St=wt,xt=Object(h["a"])(St,bt,yt,!1,null,null,null),Rt=xt.exports;R()(xt,"components",{QPage:v["a"],QSpace:w["a"],QBtn:y["a"],QIcon:S["a"],QCard:q["a"],QCardSection:C["a"]});var $t=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("q-page",[e("q-card",{staticClass:"payments-record-school transparent",staticStyle:{"border-radius":"0 !important"},attrs:{flat:""}},[e("q-card-section",{staticClass:"record-school-top relative-position full-width"},[e("div",{staticClass:"row items-center"},[e("div",{staticClass:"col"},[e("div",{staticClass:"record-school-title"},[t._v("Запись в автошколу")]),e("div",{staticClass:"record-school-subtitle q-mt-sm"},[e("span",{staticClass:"text-secondary q-mr-sm"},[t._v("Шаг 1:")]),e("span",[t._v("Укажите параметры поиска автошколы")])])]),e("q-space"),e("q-btn",{attrs:{"no-caps":"",flat:"",to:"/payments"}},[e("q-icon",{attrs:{name:"img:icons/Cancel_R.svg",size:"16px"}})],1)],1)])],1),e("q-card",{staticClass:"transparent",attrs:{flat:""}},[e("q-card-section",{staticClass:"q-pa-none"},[e("q-list",{staticClass:"q-pa-none",attrs:{separator:""}},[t.cities.length>0?e("q-item",{staticClass:"q-pa-md"},[e("q-item-section",[e("q-item-label",{staticClass:"fs-12 text-secondary"},[t._v("\n              Ваш город\n            ")]),e("q-item-label",{staticClass:"fs-18"},[t._v("\n              "+t._s(t.currentCityLabel)+"\n            ")])],1),e("q-item-section",{attrs:{side:""}},[e("q-btn",{attrs:{round:"",flat:"",icon:"img:icons/od.svg",size:"12px"}},[e("q-menu",{attrs:{"content-class":"normal"}},[t.cities&&t.dataRecord?e("q-card",[e("q-card-section",{staticClass:"q-pa-none"},[e("q-list",{staticClass:"q-pa-none",attrs:{separator:""}},t._l(t.cities,(function(s){return e("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],key:s.value,attrs:{active:t.dataRecord.city==s.value,clickable:"","active-class":"bg-grey-3"},on:{click:function(e){t.dataRecord.city=s.value,t.getSchoolsData()}}},[e("q-item-section",[e("q-item-label",[t._v("\n                            "+t._s(s.label)+"\n                          ")])],1)],1)})),1)],1)],1):t._e()],1)],1)],1)],1):t._e(),e("q-item",{staticClass:"q-pa-md"},[e("q-item-section",[e("q-item-label",{staticClass:"fs-12 text-secondary"},[t._v("\n              Категория\n            ")]),e("q-item-label",{staticClass:"fs-18"},[t._v('\n              Категория "'+t._s(t.currentCategoryLabel)+'"\n            ')])],1),e("q-item-section",{attrs:{side:""}},[e("q-btn",{attrs:{round:"",flat:"",icon:"img:icons/od.svg",size:"12px"}},[e("q-menu",{attrs:{"content-class":"normal"}},[t.categories&&t.dataRecord?e("q-card",[e("q-card-section",{staticClass:"q-pa-none"},[e("q-list",{staticClass:"q-pa-none",attrs:{separator:""}},t._l(t.categories,(function(s){return e("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],key:s.id,attrs:{clickable:"",active:t.dataRecord.category==s.value,"active-class":"bg-grey-3"},on:{click:function(e){t.dataRecord.category=s.value,t.getSchoolsData()}}},[e("q-item-section",[e("q-item-label",[t._v("\n                            "+t._s(s.label)+"\n                          ")])],1)],1)})),1)],1)],1):t._e()],1)],1)],1)],1),e("q-separator")],1)],1)],1),e("div",{ref:"bottomPanel",staticClass:"fixed-bottom-left row items-center q-pa-sm full-width bg-white",staticStyle:{bottom:"80px","z-index":"1000"}},[t.userHasSchool?t._e():e("q-btn",{staticClass:"btn-orange-mobile full-width",attrs:{flat:"","no-caps":""},on:{click:function(s){return t.gotoSchoolOrTariff()}}},[e("span",{staticClass:"btn-title"},[t._v("\n        Показать "),e("span",[t._v(t._s(t.schoolsList.length)+" \n        "+t._s(t.getNoun(t.schoolsList.length,"автошколу","автошколы","автошкол")))])])]),t.userHasSchool?e("q-btn",{staticClass:"btn-orange-mobile full-width",attrs:{flat:"","no-caps":""},on:{click:function(s){return t.gotoSchoolOrTariff()}}},[e("span",{staticClass:"btn-title"},[t._v("Показать тарифы")])]):t._e()],1)],1)},kt=[],Pt={name:"PaymentsRecordStep1",components:{Dropdown:p["a"]},data:function(){return{isloadedPage:!1,isloadedSchool:!1,dialogIsUseSchool:!1}},methods:{getSchoolsData:function(){var t=this;this.isloadedSchool=!1;var s={category:this.dataRecord.category};this.cities.length>0&&(s.city_id=this.dataRecord.city),this.getSchools(s).then((function(s){t.isloadedSchool=!0}))},gotoSchoolOrTariff:function(){this.userHasSchool&&(this.dataRecord.school_id=this.userSchool.id),this.$router.push(this.userHasSchool?"/payments/record-school/3":"/payments/record-school/2")}},computed:d()(d()({},Object(m["c"])(["citiesList","userInfo"])),{},{currentCityLabel:function(){var t=_.find(this.cities,{value:this.dataRecord.city});return void 0!=t?t.label:"Город не указан"},currentCategoryLabel:function(){var t=_.find(this.categories,{value:this.dataRecord.category});return void 0!=t?t.label:"Категория не указана"},cities:function(){var t=[];if(this.citiesList){var s,e=c()(this.citiesList);try{for(e.s();!(s=e.n()).done;){var a=s.value;t.push({label:a.title,value:a.id})}}catch(i){e.e(i)}finally{e.f()}}return t},categories:function(){var t,s=[],e=c()(this.categoriesAll);try{for(e.s();!(t=e.n()).done;){var a=t.value;s.push({label:a.toUpperCase(),value:a})}}catch(i){e.e(i)}finally{e.f()}return s}}),mounted:function(){var t=this;this.getCities({}).then((function(s){t.dataRecord.city||(t.dataRecord.city=t.cities.length>0?t.cities[0].value:null),t.isloadedPage=!0,t.dataRecord.phone=t.userInfo.phone,t.getSchoolsData()}))}},zt=Pt,Qt=e("4e73"),Lt=e("7f67"),Tt=Object(h["a"])(zt,$t,kt,!1,null,null,null),Ot=Tt.exports;R()(Tt,"components",{QPage:v["a"],QCard:q["a"],QCardSection:C["a"],QSpace:w["a"],QBtn:y["a"],QIcon:S["a"],QList:G["a"],QItem:V["a"],QItemSection:Y["a"],QItemLabel:K["a"],QMenu:Qt["a"],QSeparator:b["a"]}),R()(Tt,"directives",{ClosePopup:Lt["a"]});var It=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("q-page",[e("q-card",{staticClass:"payments-record-school transparent",staticStyle:{"border-radius":"0 !important"},attrs:{flat:""}},[e("q-card-section",{staticClass:"record-school-top relative-position full-width"},[e("div",{staticClass:"row items-center"},[e("div",{staticClass:"col"},[e("div",{staticClass:"record-school-title"},[t._v("Запись в автошколу")]),e("div",{staticClass:"record-school-subtitle q-mt-sm"},[e("span",{staticClass:"text-secondary q-mr-sm"},[t._v("Шаг 2:")]),e("span",[t._v("Выберите автошколу")])])]),e("q-space"),e("q-btn",{attrs:{"no-caps":"",flat:"",to:"/payments"}},[e("q-icon",{attrs:{name:"img:icons/Cancel_R.svg",size:"16px"}})],1)],1)])],1),2==t.$route.params.step?e("div",{staticClass:"transparent",attrs:{square:"",flat:""}},[e("div",{staticClass:"row items-center"},t._l(t.togglerMenu,(function(s){return e("div",{key:s.title,staticClass:"col toggler-item-mobile",class:s.isActive?"active":"",on:{click:function(e){return t.toggleMenu(s)}}},[t._v(t._s(s.title))])})),0),e("div",{staticClass:"payments-record-content btn-map-top q-pa-xs",class:{"bg-white":t.showMap,transparent:!t.showMap}},[t.showMap?e("l-map",{ref:"map",attrs:{zoom:t.zoom,options:t.mapOptions}},[e("l-tile-layer",{attrs:{url:t.url,attribution:t.attribution}}),t._l(t.schoolsList,(function(s,a){return s.address_lat?e("l-marker",{key:s.id,attrs:{"lat-lng":t.getLatLangSchool(s,a),icon:t.icon}},[e("l-popup",[e("div",{staticStyle:{"min-width":"280px","min-height":"100px"}},[e("q-card",{attrs:{flat:""}},[e("q-card-section",{staticClass:"q-pa-none fs-18",attrs:{align:"left"}},[t._v("\n                          "+t._s(s.title)+"\n                        ")]),e("q-card-section",{staticClass:"q-pa-none fs-15 q-mt-xs",staticStyle:{color:"#7b7c8f"},attrs:{align:"left"}},[e("q-icon",{attrs:{name:"img:icons/Address.svg",size:"17px"}}),t._v(" "+t._s(s.address)+"\n                        ")],1),e("q-card-section",{staticClass:"q-pa-none",attrs:{align:"left"}},[e("div",{staticClass:"min-cost-map-popup"},[e("div",{staticClass:"price"},[s.min_cost?e("span",[t._v("От")]):t._e(),t._v("\n                              "+t._s(s.min_cost?t.numberWithSpaces(s.min_cost):"Цена не указана")+"\n                              "),s.min_cost?e("span",{staticClass:"currency"},[t._v("Р")]):t._e()]),e("div",{staticClass:"btn-min-cost",on:{click:function(e){return t.selectSchool(s)}}},[e("span",{staticClass:"fs-12"},[t._v("Подробнее")])])])])],1)],1)])],1):t._e()}))],2):t._e(),t.showMap?t._e():e("div",t._l(t.schoolsList,(function(s,a){return e("div",{key:s.id,staticClass:"item-school",on:{click:function(e){return t.selectSchool(s)}}},[e("div",{staticClass:"row top items-center"},[e("div",{staticClass:"col title"},[t._v(t._s(s.title))]),e("div",{staticClass:"col price"},[t._v(t._s(s.min_cost?"От "+t.numberWithSpaces(s.min_cost)+" р":"Не указана"))])]),e("q-separator"),e("div",{staticClass:"row bottom items-center"},[e("div",{staticClass:"col address"},[e("q-icon",{attrs:{name:"img:icons/Address.svg",size:"17px"}}),t._v(" "+t._s(s.address)+" ")],1)])],1)})),0)],1)]):t._e(),e("div",{ref:"bottomPanel",staticClass:"fixed-bottom-left row items-center q-pa-sm full-width bg-white",staticStyle:{bottom:"80px","z-index":"1000"}},[e("q-btn",{staticClass:"btn-cancel-mobile bg-secondary full-width",attrs:{flat:"","no-caps":"",to:"/payments/record-school/"+parseInt(parseInt(t.$route.params.step)-1)}},[e("q-icon",{staticClass:"q-ml-xs",staticStyle:{transform:"rotate(180deg)"},attrs:{name:"img:icons/Arrow_Small_white.svg",size:"10px"}}),e("span",{staticClass:"btn-title"},[t._v("Назад")])],1)],1)],1)},At=[],Mt={name:"PaymentsRecordStep2",components:{Dropdown:p["a"],Swiper:j["Swiper"],SwiperSlide:j["SwiperSlide"],LMap:T["a"],LTileLayer:O["a"],LMarker:I["a"],LPopup:A["a"],LTooltip:M["a"]},data:function(){return{isloadedPage:!1,isloadedSchool:!1,togglerMenu:[{title:"На карте",isActive:!1,ismap:!0},{title:"Списком",isActive:!0,ismap:!1}],swiperOptionSchools:{slidesPerView:4,slidesPerGroup:4,slidesPerColumn:2,slidesPerColumnFill:"row",spaceBetween:0,direction:"horizontal",scrollbar:{el:".swiper-scrollbar",dragClass:"swiper-scrollbar-drag scroll-drag"},navigation:{nextEl:".right-arrow",prevEl:".left-arrow"},breakpoints:{1500:{slidesPerView:4,slidesPerGroup:4,slidesPerColumn:2,slidesPerColumnFill:"row"},890:{slidesPerView:3,slidesPerGroup:3,slidesPerColumn:2,slidesPerColumnFill:"row"},550:{slidesPerView:2,slidesPerGroup:2,slidesPerColumn:2,slidesPerColumnFill:"row"}}},zoom:13,url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',mapOptions:{zoomSnap:.5},showMap:!1,icon:L.icon({iconUrl:"img/mapicon.png",iconSize:[40,48],iconAnchor:[20,0]})}},methods:{getLatLangSchool:function(t,s){return t.address_lat?Object(Q["latLng"])(t.address_lat,t.address_lon):Object(Q["latLng"])(0,0)},selectSchool:function(t){this.dataRecord.school_id=t.id,this.$router.push("/payments/record-school/3")},toggleMenu:function(t){for(var s=this,e=0;e<this.togglerMenu.length;e++)this.togglerMenu[e].isActive=!1;t.isActive=!0,this.showMap=t.ismap,t.ismap&&this.$nextTick((function(){s.$refs.map.mapObject.fitBounds(s.schoolsList.map((function(t){return[t.address_lat,t.address_lon]})))}))}},computed:d()(d()({},Object(m["c"])(["citiesList","schoolsList","tariffsList","userInfo"])),{},{cities:function(){var t,s=[],e=c()(this.citiesList);try{for(e.s();!(t=e.n()).done;){var a=t.value;s.push({label:a.title,value:a.id})}}catch(i){e.e(i)}finally{e.f()}return s},categories:function(){var t,s=[],e=c()(this.categoriesAll);try{for(e.s();!(t=e.n()).done;){var a=t.value;s.push({label:a.toUpperCase(),value:a})}}catch(i){e.e(i)}finally{e.f()}return s}}),mounted:function(){var t=this,s={category:this.dataRecord.category};this.cities.length>0&&(s.city_id=this.dataRecord.city),this.getSchools(s).then((function(s){t.isloadedSchool=!0}))}},jt=Mt,Dt=Object(h["a"])(jt,It,At,!1,null,null,null),Bt=Dt.exports;R()(Dt,"components",{QPage:v["a"],QCard:q["a"],QCardSection:C["a"],QSpace:w["a"],QBtn:y["a"],QIcon:S["a"],QSeparator:b["a"]});var Nt=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("q-page",[e("q-card",{staticClass:"payments-record-school transparent",staticStyle:{"border-radius":"0 !important"},attrs:{flat:""}},[e("q-card-section",{staticClass:"record-school-top relative-position full-width"},[e("div",{staticClass:"row items-center"},[e("div",{staticClass:"col"},[e("div",{staticClass:"record-school-title"},[t._v("Запись в автошколу")]),e("div",{staticClass:"record-school-subtitle q-mt-sm"},[e("span",{staticClass:"text-secondary q-mr-sm"},[t._v("Шаг "+t._s(t.userHasSchool?t.$route.params.step-1:t.$route.params.step)+":")]),e("span",[t._v(t._s(t.tariffsList&&t.tariffsList.length>0?"Выберите тариф":"Сведения об автошколе"))])])]),e("q-space"),e("q-btn",{attrs:{"no-caps":"",flat:"",to:"/payments"}},[e("q-icon",{attrs:{name:"img:icons/Cancel_R.svg",size:"16px"}})],1)],1)])],1),e("q-card",{staticClass:"transparent scroll scroll-content",staticStyle:{"border-radius":"0 !important"},style:{height:t.heightScrollArea-(t.dataRecord.skip?0:60)+"px"},attrs:{square:"",flat:""}},[e("q-card-section",{staticClass:"q-pa-none"},[t.currentSchool?e("q-list",{staticClass:"bg-white",attrs:{separator:""}},[e("q-item",[e("q-item-section",{staticClass:"q-pl-md text-accent text-bold"},[t._v("\n              "+t._s(t.currentSchool.title)+"\n            ")])],1),e("q-item",[e("q-item-section",{staticClass:"q-pl-md"},[t._v("\n              "+t._s(t.currentSchool.address)+"\n            ")]),e("q-item-section",{attrs:{side:""}},[e("img",{staticClass:"q-pr-md",attrs:{src:"img/Yandex_Maps.png",height:"20"}})])],1),t.currentSchool.phone?e("q-item",[e("q-item-section",{staticClass:"q-pl-md"},[t._v("\n              "+t._s(t.currentSchool.phone)+"\n            ")]),e("q-item-section",{attrs:{side:""}},[e("img",{staticClass:"q-pr-md",attrs:{src:"icons/Phone.svg",height:"16"}})])],1):t._e(),t.currentSchool.email&&!t.showTariff?e("q-item",[e("q-item-section",{staticClass:"q-pl-md"},[t._v("\n              "+t._s(t.currentSchool.email)+"\n            ")]),e("q-item-section",{attrs:{side:""}},[e("img",{staticClass:"q-pr-md",attrs:{src:"icons/email.svg",height:"16"}})])],1):t._e(),t.currentSchool.site_url&&!t.showTariff?e("q-item",[e("q-item-section",{staticClass:"q-pl-md"},[e("q-item-label",[e("a",{staticClass:"text-accent",attrs:{target:"_blank",href:t.currentSchool.site_url}},[t._v(t._s(t.currentSchool.site_url))])])],1),e("q-item-section",{attrs:{side:""}},[e("img",{staticClass:"q-pr-md",attrs:{src:"icons/websait.svg",height:"16"}})])],1):t._e()],1):t._e()],1),e("q-card-section",{staticClass:"q-pl-xs q-pr-xs q-pt-xs",staticStyle:{"padding-bottom":"30px"}},[t.isloadedTariffs?t._e():e("div",{staticClass:"flex flex-center",style:{"margin-top":"100px"}},[e("q-spinner-rings",{attrs:{color:"accent",size:"80px"}})],1),t.isloadedTariffs?e("swiper",{ref:"swiperTariffs",staticClass:"swiper fit",attrs:{options:t.swiperOptionTariffs}},[t._l(t.tariffsList,(function(s,a){return e("swiper-slide",{key:s.id},[e("q-card",{staticClass:"q-ma-xs",staticStyle:{"border-radius":"0 !important"},style:{height:"500px"},attrs:{square:"",flat:""}},[e("q-card-section",{staticClass:"row"},[e("div",{staticClass:"col"},[e("q-card",{staticClass:"fit",attrs:{flat:""}},[e("div",{staticClass:"q-pt-none font-exo2-m fs-17 full-width",attrs:{align:"center"}},[t._v("\n                    "+t._s(s.title)+"\n                  ")]),e("q-card-section",{attrs:{align:"center"}},[e("q-icon",{attrs:{name:"img:icons/Payment_"+s.categories[0].toUpperCase()+"_R.svg",size:"72px"}})],1),e("q-card-section",{attrs:{align:"center"}},[e("div",{staticClass:"font-exo2-m fs-20",attrs:{sstyle:"color:#7B7C8F;"}},[t._v("\n                        "+t._s(s.cost?t.numberWithSpaces(s.cost):"Цена не указана")+"\n                        "),s.cost?e("span",{staticClass:"currency"},[t._v(" р.")]):t._e()])]),e("q-separator"),e("q-card-section",{staticClass:"row items-center"},[e("q-btn",{staticClass:"btn-orange-mobile full-width",attrs:{dense:"",flat:"","no-caps":""},on:{click:function(e){return t.selectTariff(s)}}},[e("span",{staticClass:"btn-title q-pl-xs q-pr-sm"},[t._v("Выбрать")])])],1)],1)],1),e("div",{staticClass:"col flex flex-center"},[e("q-list",{staticClass:"q-pa-none full-width",attrs:{separator:"",dense:""}},t._l(s.description.split("\r\n"),(function(s,a){return e("q-item",{key:a,staticClass:"q-pa-none"},[e("q-item-section",[e("q-item-label",{staticClass:"text-center text-secondary font-sspro-sr fs-12"},[t._v("\n                          "+t._s(s)+"\n                        ")])],1)],1)})),1)],1)])],1)],1)})),e("div",{staticClass:"swiper-scrollbar",staticStyle:{position:"absolute",bottom:"5px !important"},attrs:{slot:"scrollbar"},slot:"scrollbar"})],2):t._e()],1)],1),e("div",{ref:"bottomPanel",staticClass:"fixed-bottom-left row items-center q-pa-sm full-width bg-white",staticStyle:{bottom:"80px","z-index":"1000"}},[e("q-btn",{staticClass:"btn-cancel-mobile bg-secondary full-width",attrs:{flat:"","no-caps":""},on:{click:function(s){return t.backTo()}}},[e("q-icon",{staticClass:"q-ml-xs",staticStyle:{transform:"rotate(180deg)"},attrs:{name:"img:icons/Arrow_Small_white.svg",size:"10px"}}),e("span",{staticClass:"btn-title"},[t._v("Назад")])],1)],1),e("q-resize-observer",{on:{resize:t.resizePage}})],1)},Ht=[],Wt={name:"PaymentsRecordStep3",components:{Dropdown:p["a"],Swiper:j["Swiper"],SwiperSlide:j["SwiperSlide"]},data:function(){return{isloadedTariffs:!1,heightScrollArea:100,swiperOptionTariffs:{slidesPerView:1,slidesPerGroup:1,slidesPerColumn:1,spaceBetween:0,direction:"horizontal",scrollbar:{el:".swiper-scrollbar",dragClass:"swiper-scrollbar-drag scroll-drag"},navigation:{nextEl:".right-arrow",prevEl:".left-arrow"}}}},methods:{selectTariff:function(t){this.dataRecord.tariff_id=t.id,this.$router.push("/payments/record-school/4/")},backTo:function(){this.$router.push(this.userHasSchool?"/payments/record-school/1":"/payments/record-school/2")},resizePage:function(){var t=this;this.$nextTick((function(){t.heightScrollArea=t.$q.screen.height-document.querySelector(".scroll-content").getBoundingClientRect().top-80}))}},computed:d()(d()({},Object(m["c"])(["tariffsList","userInfo"])),{},{showTariff:function(){return this.tariffsList&&this.tariffsList.length>0&&this.loadedTariff},currentSchool:function(){return this.dataRecord.school_id?_.find(this.schoolsList,{id:this.dataRecord.school_id}):null}}),mounted:function(){var t=this;this.getTariffs({school_id:this.dataRecord.school_id,category:this.dataRecord.category}).then((function(s){t.isloadedTariffs=!0,t.$nextTick((function(){t.$refs.swiperTariffs.$swiper.slideTo(0,300)}))}))}},Et=Wt,Ft=e("792f"),Jt=e("3980"),Ut=Object(h["a"])(Et,Nt,Ht,!1,null,null,null),Gt=Ut.exports;R()(Ut,"components",{QPage:v["a"],QCard:q["a"],QCardSection:C["a"],QSpace:w["a"],QBtn:y["a"],QIcon:S["a"],QList:G["a"],QItem:V["a"],QItemSection:Y["a"],QItemLabel:K["a"],QSpinnerRings:Ft["a"],QSeparator:b["a"],QResizeObserver:Jt["a"]});var Vt=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("q-page",[e("q-card",{staticClass:"payments-record-school transparent",staticStyle:{"border-radius":"0 !important"},attrs:{flat:""}},[e("q-card-section",{staticClass:"record-school-top relative-position full-width"},[e("div",{staticClass:"row items-center"},[e("div",{staticClass:"col"},[e("div",{staticClass:"record-school-title"},[t._v("Запись в автошколу")]),e("div",{staticClass:"record-school-subtitle q-mt-sm"},[e("span",{staticClass:"text-secondary q-mr-sm"},[t._v("Шаг "+t._s(t.userHasSchool?t.$route.params.step-1:t.$route.params.step)+":")]),e("span",[t._v("Соглашение")])])]),e("q-space"),e("q-btn",{attrs:{"no-caps":"",flat:"",to:"/payments"}},[e("q-icon",{attrs:{name:"img:icons/Cancel_R.svg",size:"16px"}})],1)],1)])],1),e("div",{staticClass:"fs-14 q-pa-md scroll-content scroll",style:{height:t.heightScrollArea-100+"px"},domProps:{innerHTML:t._s(t.textContract)}}),e("div",{ref:"bottomPanel",staticClass:"fixed-bottom-left row items-center q-pa-sm full-width bg-white",staticStyle:{bottom:"80px","z-index":"1000"}},[e("q-checkbox",{attrs:{size:"sm",color:"accent"},model:{value:t.agree,callback:function(s){t.agree=s},expression:"agree"}},[e("span",{staticClass:"fs-14"},[t._v("Я прочитал и согласен с условиями договора")])]),e("div",{staticClass:"full-width row items-center q-mt-md"},[e("div",{staticClass:"col-auto q-pa-xs"},[e("q-btn",{staticClass:"btn-cancel-mobile bg-secondary full-width",attrs:{flat:"","no-caps":"",to:"/payments/record-school/"+parseInt(parseInt(t.$route.params.step)-1)}},[e("q-icon",{staticClass:"q-ml-xs",staticStyle:{transform:"rotate(180deg)"},attrs:{name:"img:icons/Arrow_Small_white.svg",size:"10px"}}),e("span",{staticClass:"btn-title"},[t._v("Назад")])],1)],1),e("div",{staticClass:"col q-pa-xs"},[e("q-btn",{staticClass:"btn-orange-mobile full-width",attrs:{flat:"","no-caps":"",disable:!t.agree,to:"/payments/record-school/"+parseInt(parseInt(t.$route.params.step)+1)}},[e("span",{staticClass:"btn-title"},[t._v("Далее")]),e("q-icon",{staticClass:"q-ml-xs",attrs:{name:"img:icons/Arrow_Small_white.svg",size:"10px"}})],1)],1)])],1),e("q-resize-observer",{on:{resize:t.resizePage}})],1)},Yt=[],Kt={name:"PaymentsRecordStep4",components:{Dropdown:p["a"]},data:function(){return{heightScrollArea:100,isloadedContract:!1,agree:!1,textContract:""}},methods:{resizePage:function(){var t=this;this.$nextTick((function(){t.heightScrollArea=t.$q.screen.height-document.querySelector(".scroll-content").getBoundingClientRect().top-80}))},genContract:function(t){var s=this,e=JSON.parse(JSON.stringify(this.dataRecord));e.response_type=t,"html"==t&&(this.isloadedContract=!1,e.passport_series="__",e.passport_number="______",e.passport_issued_by="__________",e.passport_date="__________",e.last_name="__________",e.first_name="__________",e.patronymic="__________",e.address="______________",e.registration_address="______________",e.address_equals=!0),this.generateContract(e).then((function(e){if(200==e.status){if("html"==t){var a=(new DOMParser).parseFromString(e.data,"text/html");s.textContract=a.querySelector("body").innerHTML}if("pdf"==t){var i=new Blob([e.data],{type:"application/pdf;charset=utf-8"});FileSaver.saveAs(i,"dogovor.pdf")}s.isloadedContract=!0}}))}},computed:d()({},Object(m["c"])(["userInfo"])),mounted:function(){this.genContract("html")}},Xt=Kt,Zt=Object(h["a"])(Xt,Vt,Yt,!1,null,null,null),ts=Zt.exports;R()(Zt,"components",{QPage:v["a"],QCard:q["a"],QCardSection:C["a"],QSpace:w["a"],QBtn:y["a"],QIcon:S["a"],QCheckbox:it["a"],QResizeObserver:Jt["a"]});var ss=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("q-page",[e("q-card",{staticClass:"payments-record-school transparent",staticStyle:{"border-radius":"0 !important"},attrs:{flat:""}},[e("q-card-section",{staticClass:"record-school-top relative-position full-width"},[e("div",{staticClass:"row items-center"},[e("div",{staticClass:"col"},[e("div",{staticClass:"record-school-title"},[t._v("Запись в автошколу")]),e("div",{staticClass:"record-school-subtitle q-mt-sm"},[e("span",{staticClass:"text-secondary q-mr-sm"},[t._v("Шаг "+t._s(t.userHasSchool?t.$route.params.step-1:t.$route.params.step)+":")]),e("span",[t._v("Паспортные данные")])])]),e("q-space"),e("q-btn",{attrs:{"no-caps":"",flat:"",to:"/payments"}},[e("q-icon",{attrs:{name:"img:icons/Cancel_R.svg",size:"16px"}})],1)],1)])],1),e("q-form",{ref:"form_pass",staticClass:"fit"},[e("div",{staticClass:"full-width form-settings scroll-content scroll",style:{height:t.heightScrollArea-65+"px"}},[e("q-list",{attrs:{separator:""}},[e("q-item",{staticClass:"q-pt-sm q-pb-none"},[e("q-item-section",[e("q-input",{staticClass:"full-width",attrs:{dense:"","input-class":"fs-15",mask:"## ##","unmasked-value":"",rules:[function(t){return!!t},function(t){return 4==t.length}],"lazy-rules":"","hide-bottom-space":""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{staticClass:"q-pr-sm",attrs:{name:"img:icons/edit_mobile.svg",size:"15px"}})]},proxy:!0},{key:"append",fn:function(){return[e("span",{staticClass:"fs-12"},[t._v("Серия")])]},proxy:!0}]),model:{value:t.dataRecord.passport_series,callback:function(s){t.$set(t.dataRecord,"passport_series",s)},expression:"dataRecord.passport_series"}})],1)],1),e("q-item",{staticClass:"q-pt-sm q-pb-none"},[e("q-item-section",[e("q-input",{staticClass:"full-width",attrs:{dense:"","input-class":"fs-15",mask:"######","unmasked-value":"",rules:[function(t){return!!t},function(t){return 6==t.length}],"lazy-rules":"","hide-bottom-space":""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{staticClass:"q-pr-sm",attrs:{name:"img:icons/edit_mobile.svg",size:"15px"}})]},proxy:!0},{key:"append",fn:function(){return[e("span",{staticClass:"fs-12"},[t._v("Номер")])]},proxy:!0}]),model:{value:t.dataRecord.passport_number,callback:function(s){t.$set(t.dataRecord,"passport_number",s)},expression:"dataRecord.passport_number"}})],1)],1),e("q-item",{staticClass:"q-pt-sm q-pb-none"},[e("q-item-section",[e("q-input",{staticClass:"full-width",attrs:{dense:"","input-class":"fs-15",rules:[function(t){return!!t}],"lazy-rules":"","hide-bottom-space":""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{staticClass:"q-pr-sm",attrs:{name:"img:icons/edit_mobile.svg",size:"15px"}})]},proxy:!0},{key:"append",fn:function(){return[e("span",{staticClass:"fs-12"},[t._v("Фамилия")])]},proxy:!0}]),model:{value:t.dataRecord.last_name,callback:function(s){t.$set(t.dataRecord,"last_name",s)},expression:"dataRecord.last_name"}})],1)],1),e("q-item",{staticClass:"q-pt-sm q-pb-none"},[e("q-item-section",[e("q-input",{staticClass:"full-width",attrs:{dense:"","input-class":"fs-15",rules:[function(t){return!!t}],"lazy-rules":"","hide-bottom-space":""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{staticClass:"q-pr-sm",attrs:{name:"img:icons/edit_mobile.svg",size:"15px"}})]},proxy:!0},{key:"append",fn:function(){return[e("span",{staticClass:"fs-12"},[t._v("Имя")])]},proxy:!0}]),model:{value:t.dataRecord.first_name,callback:function(s){t.$set(t.dataRecord,"first_name",s)},expression:"dataRecord.first_name"}})],1)],1),e("q-item",{staticClass:"q-pt-sm q-pb-none"},[e("q-item-section",[e("q-input",{staticClass:"full-width",attrs:{dense:"","input-class":"fs-15",rules:[function(t){return!!t}],"lazy-rules":"","hide-bottom-space":""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{staticClass:"q-pr-sm",attrs:{name:"img:icons/edit_mobile.svg",size:"15px"}})]},proxy:!0},{key:"append",fn:function(){return[e("span",{staticClass:"fs-12"},[t._v("Отчество")])]},proxy:!0}]),model:{value:t.dataRecord.patronymic,callback:function(s){t.$set(t.dataRecord,"patronymic",s)},expression:"dataRecord.patronymic"}})],1)],1),e("q-item",{staticClass:"q-pt-sm q-pb-none"},[e("q-item-section",[e("q-input",{staticClass:"full-width",attrs:{dense:"","input-class":"fs-15",rules:[function(t){return!!t}],"lazy-rules":"","hide-bottom-space":""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{staticClass:"q-pr-sm",attrs:{name:"img:icons/edit_mobile.svg",size:"15px"}})]},proxy:!0},{key:"append",fn:function(){return[e("span",{staticClass:"fs-12"},[t._v("Кем выдан")])]},proxy:!0}]),model:{value:t.dataRecord.passport_issued_by,callback:function(s){t.$set(t.dataRecord,"passport_issued_by",s)},expression:"dataRecord.passport_issued_by"}})],1)],1),e("q-item",{staticClass:"q-pt-sm q-pb-none"},[e("q-item-section",[e("q-input",{staticClass:"full-width",attrs:{dense:"","input-class":"fs-15",mask:"####-##-##",placeholder:"ГГГГ-ММ-ДД",rules:[function(t){return!!t}],"lazy-rules":"","hide-bottom-space":""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{staticClass:"q-pr-sm",attrs:{name:"img:icons/edit_mobile.svg",size:"15px"}})]},proxy:!0},{key:"append",fn:function(){return[e("span",{staticClass:"fs-12"},[t._v("Когда выдан")])]},proxy:!0}]),model:{value:t.dataRecord.passport_date,callback:function(s){t.$set(t.dataRecord,"passport_date",s)},expression:"dataRecord.passport_date"}})],1)],1),e("q-item",{staticClass:"q-pt-sm q-pb-none"},[e("q-item-section",[e("q-input",{staticClass:"full-width",attrs:{dense:"","input-class":"fs-15",rules:[function(t){return!!t}],"lazy-rules":"","hide-bottom-space":""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{staticClass:"q-pr-sm",attrs:{name:"img:icons/edit_mobile.svg",size:"15px"}})]},proxy:!0},{key:"append",fn:function(){return[e("span",{staticClass:"fs-12"},[t._v("Адрес прописки")])]},proxy:!0}]),model:{value:t.dataRecord.address,callback:function(s){t.$set(t.dataRecord,"address",s)},expression:"dataRecord.address"}})],1)],1),e("q-item",{staticClass:"q-pt-sm q-pb-none"},[e("q-item-section",[e("q-toggle",{attrs:{size:"xl",color:"accent"},on:{input:function(s){t.dataRecord.registration_address=s?t.dataRecord.address:""}},model:{value:t.dataRecord.address_equals,callback:function(s){t.$set(t.dataRecord,"address_equals",s)},expression:"dataRecord.address_equals"}},[e("span",{staticClass:"fs-14"},[t._v("Совпадает с адресом прописки")])])],1)],1),e("q-item",{staticClass:"q-pt-sm q-pb-none"},[e("q-item-section",[e("q-input",{staticClass:"full-width",attrs:{dense:"","input-class":"fs-15",rules:[function(t){return!!t}],"lazy-rules":"","hide-bottom-space":""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{staticClass:"q-pr-sm",attrs:{name:"img:icons/edit_mobile.svg",size:"15px"}})]},proxy:!0},{key:"append",fn:function(){return[e("span",{staticClass:"fs-12"},[t._v("Адрес проживания")])]},proxy:!0}]),model:{value:t.dataRecord.registration_address,callback:function(s){t.$set(t.dataRecord,"registration_address",s)},expression:"dataRecord.registration_address"}})],1)],1)],1)],1)]),e("div",{ref:"bottomPanel",staticClass:"fixed-bottom-left row items-center q-pa-sm full-width bg-white",staticStyle:{bottom:"80px","z-index":"1000"}},[e("div",{staticClass:"full-width row items-center"},[e("div",{staticClass:"col-auto q-pa-xs"},[e("q-btn",{staticClass:"btn-cancel-mobile bg-secondary full-width",attrs:{flat:"","no-caps":"",to:"/payments/record-school/"+parseInt(parseInt(t.$route.params.step)-1)}},[e("q-icon",{staticClass:"q-ml-xs",staticStyle:{transform:"rotate(180deg)"},attrs:{name:"img:icons/Arrow_Small_white.svg",size:"10px"}}),e("span",{staticClass:"btn-title"},[t._v("Назад")])],1)],1),e("div",{staticClass:"col q-pa-xs"},[e("q-btn",{staticClass:"btn-orange-mobile full-width",attrs:{flat:"","no-caps":""},on:{click:function(s){return t.validatePassportData()}}},[e("span",{staticClass:"btn-title"},[t._v("Далее")]),e("q-icon",{staticClass:"q-ml-xs",attrs:{name:"img:icons/Arrow_Small_white.svg",size:"10px"}})],1)],1)])]),e("q-resize-observer",{on:{resize:t.resizePage}})],1)},es=[],as={name:"PaymentsRecordStep1",components:{Dropdown:p["a"]},data:function(){return{isloadedPage:!1,heightScrollArea:100}},methods:{resizePage:function(){var t=this;this.$nextTick((function(){t.heightScrollArea=t.$q.screen.height-document.querySelector(".scroll-content").getBoundingClientRect().top-80}))},validatePassportData:function(){var t=this;this.$refs.form_pass.validate().then((function(s){s?t.$router.push("/payments/record-school/6"):t.$q.notify({icon:"warning",message:"Заполните обязательные поля!",timeout:3e3,color:"blue-grey-10",html:!0,position:"top"})}))},getSchoolsData:function(){var t=this;this.isloadedSchool=!1;var s={category:this.dataRecord.category};this.cities.length>0&&(s.city_id=this.dataRecord.city),this.getSchools(s).then((function(s){t.isloadedSchool=!0}))}},computed:d()(d()({},Object(m["c"])(["citiesList","schoolsList","tariffsList","userInfo"])),{},{cities:function(){var t,s=[],e=c()(this.citiesList);try{for(e.s();!(t=e.n()).done;){var a=t.value;s.push({label:a.title,value:a.id})}}catch(i){e.e(i)}finally{e.f()}return s},categories:function(){var t,s=[],e=c()(this.categoriesAll);try{for(e.s();!(t=e.n()).done;){var a=t.value;s.push({label:a.toUpperCase(),value:a})}}catch(i){e.e(i)}finally{e.f()}return s}}),mounted:function(){var t=this;this.getCities({}).then((function(s){t.dataRecord.city||(t.dataRecord.city=t.cities.length>0?t.cities[0].value:null),t.isloadedPage=!0,t.dataRecord.phone=t.userInfo.phone}))}},is=as,os=e("9564"),rs=Object(h["a"])(is,ss,es,!1,null,null,null),ns=rs.exports;R()(rs,"components",{QPage:v["a"],QCard:q["a"],QCardSection:C["a"],QSpace:w["a"],QBtn:y["a"],QIcon:S["a"],QForm:pt["a"],QList:G["a"],QItem:V["a"],QItemSection:Y["a"],QInput:mt["a"],QToggle:os["a"],QResizeObserver:Jt["a"]});var cs=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("q-page",[e("q-card",{staticClass:"payments-record-school transparent",staticStyle:{"border-radius":"0 !important"},attrs:{flat:""}},[e("q-card-section",{staticClass:"record-school-top relative-position full-width"},[e("div",{staticClass:"row items-center"},[e("div",{staticClass:"col"},[e("div",{staticClass:"record-school-title"},[t._v("Запись в автошколу")]),e("div",{staticClass:"record-school-subtitle q-mt-sm"},[e("span",{staticClass:"text-secondary q-mr-sm"},[t._v("Шаг "+t._s(t.userHasSchool?t.$route.params.step-1:t.$route.params.step)+":")]),e("span",[t._v("Подтверждение оплаты")])])]),e("q-space"),e("q-btn",{attrs:{"no-caps":"",flat:"",to:"/payments"}},[e("q-icon",{attrs:{name:"img:icons/Cancel_R.svg",size:"16px"}})],1)],1)])],1),e("q-form",{ref:"form_prepearepay",staticClass:"fit"},[e("div",{staticClass:"full-width form-settings scroll scroll-content",style:{height:t.heightScrollArea-60+"px"}},[e("q-list",{staticClass:"q-pa-none",attrs:{separator:""}},[e("q-item",{staticClass:"q-pt-sm q-pb-none"},[e("q-item-section",{staticClass:"font-sspro-sr fs-12"},[e("div",{staticClass:"row items-center"},[e("div",{staticClass:"col text-left"},[t._v("Ваш онлайн-договор готов.")]),e("div",{staticClass:"col text-right"},[e("q-btn",{attrs:{"no-caps":"",flat:""},on:{click:function(s){return t.genContract("pdf")}}},[e("span",{staticClass:"btn-title text-accent fs-12"},[t._v("Ознакомиться")]),e("q-icon",{staticClass:"q-ml-xs",attrs:{name:"img:icons/Arrow_Small.svg",size:"10px"}})],1)],1)])])],1),e("q-item",{staticClass:"q-pt-sm q-pb-none"},[e("q-item-section",[e("q-input",{staticClass:"full-width",attrs:{dense:"","input-class":"fs-15",rules:[function(t){return!!t}],"lazy-rules":"","hide-bottom-space":""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{staticClass:"q-pr-sm",attrs:{name:"img:icons/edit_mobile.svg",size:"15px"}})]},proxy:!0},{key:"append",fn:function(){return[e("span",{staticClass:"fs-12"},[t._v("Сумма оплаты")])]},proxy:!0}]),model:{value:t.dataRecord.amount,callback:function(s){t.$set(t.dataRecord,"amount",s)},expression:"dataRecord.amount"}})],1)],1),e("q-item",{staticClass:"q-pt-sm q-pb-none"},[e("q-item-section",[e("q-input",{staticClass:"full-width",attrs:{dense:"","input-class":"fs-15"},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{staticClass:"q-pr-sm",attrs:{name:"img:icons/edit_mobile.svg",size:"15px"}})]},proxy:!0},{key:"append",fn:function(){return[e("div",{staticClass:"row items-center"},[e("div",{staticClass:"fs-12 col"},[t._v("Промокод")]),t.dataRecord.promo?e("q-btn",{staticClass:"col-auto",attrs:{"no-caps":"",flat:""},on:{click:function(s){return t.applyDiscount()}}},[e("q-icon",{attrs:{name:"img:icons/Apply_Promo.svg",size:"16px"}}),e("span",{staticClass:"q-ml-sm font-sspro-sr fs-15 text-accent"},[t._v("Применить")])],1):t._e()],1)]},proxy:!0}]),model:{value:t.dataRecord.promo,callback:function(s){t.$set(t.dataRecord,"promo",s)},expression:"dataRecord.promo"}})],1)],1),e("q-item",{staticClass:"q-pt-sm q-pb-none"},[e("q-item-section",{staticClass:"font-sspro-sr fs-15"},[e("p",{staticClass:"text-secondary q-pt-sm q-mb-xs"},[t._v("Чтобы договор вступил в силу,")]),e("p",{staticClass:"text-dark"},[t._v("нужно внести не меньше "+t._s(t.numberWithSpaces(t.currentTariff.min_first_pay))+" р.")])])],1),e("q-item",{staticClass:"q-pt-sm q-pb-none"},[e("q-item-section",[e("div",{staticClass:"row items-center"},[e("div",{staticClass:"col text-center text-secondary font-exo2-m fs-20"},[t._v(t._s(t.numberWithSpaces(t.currentTariff.cost))+" "),e("span",{staticClass:"currency"},[t._v("Р")]),e("p",{staticClass:"text-secondary font-sspro-sr fs-15 q-mt-sm"},[t._v("Стоимость")])]),e("div",{staticClass:"col text-center text-secondary font-exo2-m fs-20"},[t._v("0 "),e("span",{staticClass:"currency"},[t._v("Р")]),e("p",{staticClass:"text-secondary font-sspro-sr fs-15 q-mt-sm"},[t._v("Скидка")])]),e("div",{staticClass:"col text-center text-dark font-exo2-m fs-20"},[t._v(t._s(t.numberWithSpaces(t.currentTariff.cost))+" "),e("span",{staticClass:"currency"},[t._v("Р")]),e("p",{staticClass:"text-secondary font-sspro-sr fs-15 q-mt-sm"},[t._v("Итого:")])])])])],1),e("q-item",{staticClass:"q-pt-sm q-pb-none"},[e("q-item-section",[e("q-input",{ref:"email",staticClass:"full-width",attrs:{dense:"","input-class":"fs-15",type:"email"},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{staticClass:"q-pr-sm",attrs:{name:"img:icons/edit_mobile.svg",size:"15px"}})]},proxy:!0},{key:"append",fn:function(){return[e("span",{staticClass:"fs-12"},[t._v("Email")])]},proxy:!0}]),model:{value:t.dataRecord.email,callback:function(s){t.$set(t.dataRecord,"email",s)},expression:"dataRecord.email"}})],1)],1),e("q-item",{staticClass:"q-pt-sm q-pb-none"},[e("q-item-section",[e("q-input",{staticClass:"full-width",attrs:{dense:"","input-class":"fs-15",placeholder:"+7",type:"text",mask:"+7 (###) ###-##-##","unmasked-value":""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{staticClass:"q-pr-sm",attrs:{name:"img:icons/edit_mobile.svg",size:"15px"}})]},proxy:!0},{key:"append",fn:function(){return[e("span",{staticClass:"fs-12"},[t._v("Телефон")])]},proxy:!0}]),model:{value:t.dataRecord.phone,callback:function(s){t.$set(t.dataRecord,"phone",s)},expression:"dataRecord.phone"}})],1)],1)],1)],1)]),e("div",{ref:"bottomPanel",staticClass:"fixed-bottom-left row items-center q-pa-sm full-width bg-white",staticStyle:{bottom:"80px","z-index":"1000"}},[e("div",{staticClass:"full-width row items-center"},[e("div",{staticClass:"col-auto q-pa-xs"},[e("q-btn",{staticClass:"btn-cancel-mobile bg-secondary full-width",attrs:{flat:"","no-caps":"",to:"/payments/record-school/"+parseInt(parseInt(t.$route.params.step)-1)}},[e("q-icon",{staticClass:"q-ml-xs",staticStyle:{transform:"rotate(180deg)"},attrs:{name:"img:icons/Arrow_Small_white.svg",size:"10px"}}),e("span",{staticClass:"btn-title"},[t._v("Назад")])],1)],1),e("div",{staticClass:"col q-pa-xs"},[e("q-btn",{staticClass:"btn-orange-mobile full-width",attrs:{flat:"","no-caps":""},on:{click:function(s){return t.prepearePay()}}},[e("q-icon",{attrs:{name:"img:icons/Button_Payments.svg",size:"20px"}}),e("span",{staticClass:"btn-title"},[t._v("Оплатить и завершить")]),e("q-icon",{staticClass:"q-ml-xs",attrs:{name:"img:icons/Arrow_Small_white.svg",size:"10px"}})],1)],1)])]),e("q-resize-observer",{on:{resize:t.resizePage}})],1)},ls=[],ds={name:"PaymentsRecordStep1",components:{Dropdown:p["a"]},data:function(){return{heightScrollArea:100,isloadedPage:!1,isloadedSchool:!1}},methods:{resizePage:function(){var t=this;this.$nextTick((function(){t.heightScrollArea=t.$q.screen.height-document.querySelector(".scroll-content").getBoundingClientRect().top-80}))},genContract:function(t){var s=this,e=JSON.parse(JSON.stringify(this.dataRecord));e.response_type=t,"html"==t&&(this.loadedContract=!1,e.passport_series="__",e.passport_number="______",e.passport_issued_by="__________",e.passport_date="__________",e.last_name="__________",e.first_name="__________",e.patronymic="__________",e.address="______________",e.registration_address="______________",e.address_equals=!0),this.generateContract(e).then((function(e){if(200==e.status){if("html"==t){var a=(new DOMParser).parseFromString(e.data,"text/html");s.textContract=a.querySelector("body").innerHTML,s.loadedContract=!0}if("pdf"==t){var i=new Blob([e.data],{type:"application/pdf;charset=utf-8"});FileSaver.saveAs(i,"dogovor.pdf")}}}))},prepearePay:function(){var t=this;this.$refs.form_prepearepay.validate().then((function(s){if(s){if(!t.dataRecord.email&&!t.dataRecord.phone)return t.$refs.email.validate(),void t.$q.notify({icon:"warning",message:"Укажите email и/или телефон",timeout:3e3,color:"blue-grey-10",html:!0,position:"top"});if(parseInt(t.dataRecord.amount)<parseInt(t.currentTariff.min_first_pay))return void t.$q.notify({icon:"warning",message:"Сумма оплаты не менее "+t.currentTariff.min_first_pay+" рублей",timeout:3e3,color:"blue-grey-10",html:!0,position:"top"});var e=JSON.parse(JSON.stringify(t.dataRecord));if(e.phone){t.$delete(e,"email");var a=e.phone.replace("+7","");e.phone="+7"+a}e.email&&t.$delete(e,"phone"),t.$router.push("/payments/record-school/7")}else t.$q.notify({icon:"warning",message:"Заполните обязательные поля!",timeout:3e3,color:"blue-grey-10",html:!0,position:"top"})}))},applyDiscount:function(){this.$q.notify({icon:"warning",message:"Промокод не действительный!",timeout:3e3,color:"blue-grey-10",html:!0,position:"top"})}},computed:d()(d()({},Object(m["c"])(["citiesList","schoolsList","tariffsList","userInfo"])),{},{cities:function(){var t,s=[],e=c()(this.citiesList);try{for(e.s();!(t=e.n()).done;){var a=t.value;s.push({label:a.title,value:a.id})}}catch(i){e.e(i)}finally{e.f()}return s},currentTariff:function(){return this.dataRecord.tariff_id?_.find(this.tariffsList,{id:this.dataRecord.tariff_id}):null}}),mounted:function(){var t=this;this.getCities({}).then((function(s){t.dataRecord.city||(t.dataRecord.city=t.cities.length>0?t.cities[0].value:null),t.isloadedPage=!0,t.dataRecord.phone=t.userInfo.phone})),this.dataRecord.amount||(this.dataRecord.amount=this.currentTariff?parseFloat(this.currentTariff.min_first_pay):"")}},ps=ds,ms=Object(h["a"])(ps,cs,ls,!1,null,null,null),us=ms.exports;R()(ms,"components",{QPage:v["a"],QCard:q["a"],QCardSection:C["a"],QSpace:w["a"],QBtn:y["a"],QIcon:S["a"],QForm:pt["a"],QList:G["a"],QItem:V["a"],QItemSection:Y["a"],QInput:mt["a"],QResizeObserver:Jt["a"]});var fs=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("q-page",[e("q-card",{staticClass:"payments-record-school transparent",staticStyle:{"border-radius":"0 !important"},attrs:{flat:""}},[e("q-card-section",{staticClass:"record-school-top relative-position full-width"},[e("div",{staticClass:"row items-center"},[e("div",{staticClass:"col"},[e("div",{staticClass:"record-school-title"},[t._v("Запись в автошколу")]),e("div",{staticClass:"record-school-subtitle q-mt-sm"},[e("span",{staticClass:"text-secondary q-mr-sm"},[t._v("Шаг "+t._s(t.userHasSchool?t.$route.params.step-1:t.$route.params.step)+":")]),e("span",[t._v("Оплата")])])]),e("q-space"),e("q-btn",{attrs:{"no-caps":"",flat:"",to:"/payments"}},[e("q-icon",{attrs:{name:"img:icons/Cancel_R.svg",size:"16px"}})],1)],1)])],1),e("div",{staticClass:"scroll-content",staticStyle:{background:"#fff"},style:{height:t.heightScrollArea-55+"px"}},[t.errorMessage?e("div",{staticClass:"fit flex flex-center text-accent text-center"},[e("div",{staticClass:"full-width"},[e("q-icon",{attrs:{name:"warning",size:"50px"}}),t._v(" "+t._s(t.errorMessage))],1)]):t._e(),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.isloadedWidget,expression:"!isloadedWidget"}],staticClass:"fit flex flex-center"},[e("div",{staticClass:"text-center"},[e("img",{attrs:{src:"https://www.cdn-tinkoff.ru/platform/modules/header/1.22.2/8e5ac93f884752e5b61104ccc1d62aca.svg",width:"150px"}}),e("br"),e("br"),t._v("\n          Загрузка платежного модуля...\n        ")])]),e("iframe",{directives:[{name:"show",rawName:"v-show",value:t.isloadedWidget,expression:"isloadedWidget"}],staticStyle:{border:"none",height:"100%",width:"100%"},attrs:{id:"iframe-pay",src:t.widget_uri,bordered:"0"}})]),t._v("\n}\n\n\n\n  "),e("div",{ref:"bottomPanel",staticClass:"fixed-bottom-left row items-center q-pa-sm full-width bg-white",staticStyle:{bottom:"80px","z-index":"1000"}},[e("div",{staticClass:"full-width row items-center"},[e("div",{staticClass:"col-auto q-pa-xs"},[e("q-btn",{staticClass:"btn-cancel-mobile bg-secondary full-width",attrs:{flat:"","no-caps":"",to:"/payments/record-school/"+parseInt(parseInt(t.$route.params.step)-1)}},[e("q-icon",{staticClass:"q-ml-xs",staticStyle:{transform:"rotate(180deg)"},attrs:{name:"img:icons/Arrow_Small_white.svg",size:"10px"}}),e("span",{staticClass:"btn-title"},[t._v("Назад")])],1)],1)])]),e("q-resize-observer",{on:{resize:t.resizePage}})],1)},_s=[],hs={name:"PaymentsRecordStep1",components:{Dropdown:p["a"]},data:function(){return{widget_uri:null,errorMessage:null,isloadedWidget:!1,heightScrollArea:100}},methods:{resizePage:function(){var t=this;this.$nextTick((function(){t.heightScrollArea=t.$q.screen.height-document.querySelector(".scroll-content").getBoundingClientRect().top-80}))}},mounted:function(){var t=this,s=JSON.parse(JSON.stringify(this.dataRecord));if(s.phone){this.$delete(s,"email");var e=s.phone.replace("+7","");s.phone="+7"+e}s.email&&this.$delete(s,"phone"),this.paySchoolTinkoff(s).then((function(s){t.isloadedWidget=!0,400!=s.status?200==s.status&&(t.widget_uri=s.data.widget_uri):t.errorMessage=s.data.errors[0].message})).catch((function(s){t.isloadedWidget=!0}))}},vs=hs,gs=Object(h["a"])(vs,fs,_s,!1,null,null,null),qs=gs.exports;R()(gs,"components",{QPage:v["a"],QCard:q["a"],QCardSection:C["a"],QSpace:w["a"],QBtn:y["a"],QIcon:S["a"],QResizeObserver:Jt["a"]});var Cs={name:"PaymentsRecordSchool",components:{PaymentsRecordsDesktopStep1:k,PaymentsRecordsDesktopStep2:W,PaymentsRecordsDesktopStep3:Z,PaymentsRecordsDesktopStep4:rt,PaymentsRecordsDesktopStep5:ft,PaymentsRecordsDesktopStep6:Ct,PaymentsRecordsDesktopStep7:Rt,PaymentsRecordsMobileStep1:Ot,PaymentsRecordsMobileStep2:Bt,PaymentsRecordsMobileStep3:Gt,PaymentsRecordsMobileStep4:ts,PaymentsRecordsMobileStep5:ns,PaymentsRecordsMobileStep6:us,PaymentsRecordsMobileStep7:qs},mounted:function(){null==this.dataRecord.city&&1!=this.$route.params.step&&this.$router.push("/payments/record-school/1")}},bs=Cs,ys=Object(h["a"])(bs,a,i,!1,null,null,null);s["default"]=ys.exports;R()(ys,"components",{QPage:v["a"]})}}]);