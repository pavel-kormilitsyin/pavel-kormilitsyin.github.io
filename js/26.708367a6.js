(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[26],{a65e:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-page",[s("q-dialog",{model:{value:t.dialogInfoCall,callback:function(e){t.dialogInfoCall=e},expression:"dialogInfoCall"}},[s("q-card",[s("q-card-section",{staticClass:"text-h6"},[s("div",{staticClass:"row items-center"},[s("div",{staticClass:"col-auto row items-center q-mr-sm"},[s("img",{attrs:{src:"icons/info.svg",width:"24"}})]),s("div",{staticClass:"col row items-center"},[t._v("Код верификации")])])]),s("q-card-section",{staticStyle:{"font-size":"16px"}},[t._v("\n        На ваш номер телефона поступит звонок,"),s("br"),t._v("\n        последние 4 цифры телефона это код."),s("br"),t._v("\n        Введите его в поле кода верификации.\n      ")]),s("q-card-section",{staticStyle:{"font-size":"16px"},attrs:{align:"center"}},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"btn-orange-mobile col-auto",attrs:{flat:"","no-caps":"",label:"Понятно"}})],1)],1)],1),s("div",{staticClass:"reg background-auth"},["registration"==t.mode?s("div",{staticClass:"reg-wrapper",attrs:{onSubmit:"return false;"}},[s("div",{staticClass:"reg-wrapper-logo"},[s("img",{attrs:{src:"img/Login_Logo_0.png",width:"40"}}),s("p",{staticClass:"reg-wrapper-logo-title"},[t._v("Регистрация")])]),s("div",{staticClass:"reg-wrapper-row"},[s("div",{staticClass:"reg-wrapper-row-input input-1"},[s("span",[t._v("+7 "),s("img",{attrs:{src:"icons/Arrow_Dropdown_R.svg",alt:""}})])]),s("input",{directives:[{name:"mask",rawName:"v-mask",value:"(###) ###-##-##",expression:"'(###) ###-##-##'"},{name:"model",rawName:"v-model",value:t.userReg.phone,expression:"userReg.phone"}],ref:"phone",staticClass:"reg-wrapper-row-input input-2",attrs:{placeholder:"Номер телефона...",type:"text"},domProps:{value:t.userReg.phone},on:{input:function(e){e.target.composing||t.$set(t.userReg,"phone",e.target.value)}}})]),s("div",{staticClass:"reg-wrapper-row"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.userReg.first_name,expression:"userReg.first_name"}],staticClass:"reg-wrapper-row-input input-2",attrs:{placeholder:"Ваше имя...",type:"text"},domProps:{value:t.userReg.first_name},on:{input:function(e){e.target.composing||t.$set(t.userReg,"first_name",e.target.value)}}})]),s("div",{staticClass:"reg-wrapper-row"},[s("button",{staticClass:"login-btn",attrs:{disabled:t.userReg.phone.length<15&&t.userReg.first_name.length<3||t.loadingContinue},on:{click:t.registerInit}},[t.loadingContinue?s("div",[s("q-spinner-dots")],1):t._e(),t.loadingContinue?t._e():s("div",[t._v("\n          Далее "),s("q-icon",{attrs:{name:"keyboard_arrow_right"}})],1)])]),s("div",{staticClass:"reg-wrapper-row cancel"},[s("q-btn",{attrs:{"no-caps":"",rounded:"",flat:"",to:"/auth"}},[s("img",{attrs:{src:"icons/Link_Return.svg",alt:""}}),s("p",{staticClass:"cancel-text"},[t._v("Отменить и вернуться ко входу")])])],1)]):t._e(),"verification"==t.mode?s("div",{staticClass:"reg-wrapper",attrs:{onSubmit:"return false;"}},[s("div",{staticClass:"reg-wrapper-logo"},[s("img",{attrs:{src:"img/Login_Logo_0.png",width:"40"}}),s("p",{staticClass:"reg-wrapper-logo-title"},[t._v("Подтверждение номера")])]),s("div",{staticClass:"reg-wrapper-row row"},[s("div",{staticClass:"col"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.smsCode,expression:"smsCode"}],ref:"form_3",staticClass:"reg-wrapper-row-input input-2",attrs:{maxlength:"4",placeholder:"Код верификации...",type:"text"},domProps:{value:t.smsCode},on:{input:function(e){e.target.composing||(t.smsCode=e.target.value)}}})]),s("div",{staticClass:"col-auto q-pl-md cursor-pointer"},[s("img",{attrs:{src:"icons/info.svg",width:"30"},on:{click:function(e){t.dialogInfoCall=!0}}})])]),s("div",{staticClass:"reg-wrapper-row"},[s("button",{staticClass:"login-btn",attrs:{type:"submit",disabled:t.isDisabledSms||t.loadingContinue},on:{click:function(e){return e.preventDefault(),t.confirmSMScode(e)}}},[t.loadingContinue?s("div",[s("q-spinner-dots")],1):t._e(),t.loadingContinue?t._e():s("div",[t._v("\n          Далее "),s("q-icon",{attrs:{name:"keyboard_arrow_right"}})],1)])]),s("div",{staticClass:"reg-wrapper-resend"},[s("p",{staticClass:"reg-wrapper-resend-title"},[s("span",{on:{click:function(e){e.stopPropagation(),e.preventDefault(),t.currTimer<=1&&t.callPassword()}}},[t._v("Заказать звонок повторно")]),t._v(" можно через:")]),s("countdown",{ref:"countdown",staticClass:"q-mt-md",attrs:{time:1e3*t.time},on:{end:function(e){t.isDisabledSms=!1},progress:function(e){t.currTimer=e.seconds}},scopedSlots:t._u([{key:"default",fn:function(e){return[s("p",{staticClass:"reg-wrapper-resend-timer"},[t._v("\n           "+t._s(e.minutes<10?"0"+e.minutes:e.minutes)+" : "+t._s(e.seconds<10?"0"+e.seconds:e.seconds)+" \n          ")])]}}],null,!1,2086794163)})],1),s("div",{staticClass:"reg-wrapper-row cancel"},[s("q-btn",{attrs:{"no-caps":"",rounded:"",flat:"",to:"/auth"}},[s("img",{attrs:{src:"icons/Link_Return.svg",alt:""}}),s("p",{staticClass:"cancel-text"},[t._v("Отменить и вернуться ко входу")])])],1)]):t._e()]),s("div",{attrs:{id:"recaptcha2"}})],1)},a=[],n=(s("ac1f"),s("5319"),s("ded3")),o=s.n(n),r=s("2f62"),c={name:"reg",data:function(){return{dialogInfoCall:!1,loadingContinue:!1,time:60,currTimer:0,mode:"registration",isDisabledSms:!0,smsCode:"",userReg:{phone:"",first_name:""},isActiveBtn:!1}},computed:{},methods:o()(o()({},Object(r["b"])(["registerUser","registerInitActivation","registerActivation"])),{},{registerInit:function(){var t=this;if(this.userReg.first_name){var e=this.dCopy(this.userReg);e.phone="+7"+e.phone.replace(/[^0-9]/g,""),this.$q.sessionStorage.has("ref_landing")&&(e.ref_landing=this.$q.sessionStorage.getItem("ref_landing")),this.registerUser(e).then((function(e){400!=e.status?t.callPassword():t.$q.notify({color:"accent",icon:"warning",message:e.data.errors[0].message,timeout:3e3,html:!0,position:"top"})}))}else this.$q.notify({icon:"warning",message:"Укажите Ваше имя!",timeout:3e3,color:"orange-10",html:!0,position:"top"})},callPassword:function(){var t=this;void 0!=this.$refs.countdown&&(this.$refs.countdown.end(),this.$refs.countdown.totalMilliseconds=1e3*this.time,this.$refs.countdown.start());var e="+7"+this.dCopy(this.userReg).phone.replace(/[^0-9]/g,"");this.registerInitActivation({phone:e}).then((function(e){400!=e.status?(t.mode="verification",t.dialogInfoCall=!0):t.$q.notify({color:"accent",icon:"warning",message:e.data.errors[0].message,timeout:3e3,html:!0,position:"top"})}))},confirmSMScode:function(){var t=this,e={code:this.smsCode};e.phone="+7"+this.dCopy(this.userReg).phone.replace(/[^0-9]/g,""),this.registerActivation(e).then((function(e){400!=e.status?404!=e.status?(t.$q.sessionStorage.has("ref_landing")&&t.$q.sessionStorage.remove("ref_landing"),t.setToken(e.data.access),t.$q.localStorage.set("token",e.data.access),t.$q.localStorage.set("refresh",e.data.refresh),t.setIsAuth(!0),t.$emit("initFirstData"),t.$router.push({path:"/password-new",query:{register:!0}}).catch((function(t){}))):t.$q.notify({color:"accent",icon:"warning",message:"Не найден студент с таким номером телефона!",timeout:3e3,html:!0,position:"top"}):t.$q.notify({color:"accent",icon:"warning",message:"Активацния не удалась!",timeout:3e3,html:!0,position:"top"})}))},phoneValidation:function(){this.userReg.phone=this.userReg.phone.replace(/[^0-9]/g,"")}}),watch:{mode:function(){var t=this;this.$nextTick((function(){t.$refs.hasOwnProperty("smsCode")&&t.$refs.smsCode.focus()}))},smsCode:function(t){t.length>=4&&(this.isDisabledSms=!1)}},mounted:function(){var t=this;this.$nextTick((function(){t.$refs.hasOwnProperty("phone")&&t.$refs.phone.focus()}))}},l=c,p=s("2877"),d=s("9989"),g=s("24e8"),u=s("f09f"),m=s("a370"),f=s("9c40"),h=s("8380"),v=s("0016"),w=s("7f67"),C=s("eebe"),_=s.n(C),b=Object(p["a"])(l,i,a,!1,null,null,null);e["default"]=b.exports;_()(b,"components",{QPage:d["a"],QDialog:g["a"],QCard:u["a"],QCardSection:m["a"],QBtn:f["a"],QSpinnerDots:h["a"],QIcon:v["a"]}),_()(b,"directives",{ClosePopup:w["a"]})}}]);