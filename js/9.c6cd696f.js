(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[9],{1270:function(t,e,s){},9267:function(t,e,s){},b303:function(t,e,s){"use strict";s("9267")},b981:function(t,e,s){"use strict";s("1270")},ec95:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-page",[t.$q.platform.is.mobile?t._e():s("dashboard-desktop"),t.$q.platform.is.mobile?s("dashboard-mobile"):t._e()],1)},i=[],n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-page",[s("page-loader",{attrs:{state:t.pageIsLoad}}),s("div",{style:{padding:t.$q.screen.width>=1500?"35px":"20px"}},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-xl-6 col-md-4 col-sm-12 col-xs-12 q-pa-xs"},[t.nextStep?s("q-card",{staticClass:"card-shadow full-height"},["free"!=t.nextStep.stage?s("q-card-section",{staticClass:"card-title"},[t._v("\n              Следующий шаг:\n            ")]):t._e(),s("q-card-section",{staticClass:"gradient-grey",style:{height:"free"==t.nextStep.stage?"auto":"calc(100% - 120px)"}},[s("div",{staticClass:"desc_title q-pa-xl"},[s("div",{staticClass:"desc"},[t._v(t._s(t.nextStep.title||""))]),s("div",{staticClass:"title q-pt-md"},[t._v(t._s(t.nextStep.subtitle||""))])])]),"free"!=t.nextStep.stage?s("q-separator"):t._e(),s("q-card-section",{staticStyle:{"min-height":"70px"}},[s("div",{staticClass:"col row items-center"},["free"!=t.nextStep.stage?s("q-btn",{staticClass:"btn-orange col-auto",attrs:{flat:"","no-caps":"",to:t.nextStep.url}},[s("q-icon",{attrs:{name:t.nextStep.icon,size:"20px"}}),s("span",{staticClass:"btn-title"},[t._v(t._s(t.nextStep.label))])],1):t._e(),"free"==t.nextStep.stage?s("q-btn",{staticClass:"btn-orange col-auto",attrs:{flat:"","no-caps":""},on:{click:function(e){return t.randomLesson()}}},[s("q-icon",{attrs:{name:t.nextStep.icon,size:"20px"}}),s("span",{staticClass:"btn-title"},[t._v("Случайная тренировка")])],1):t._e()],1)])],1):t._e()],1),s("div",{staticClass:"col-xl-3 col-md-4 col-sm-6 col-xs-6 q-pa-xs"},[s("q-card",{staticClass:"card-shadow full-height",attrs:{flat:""}},[s("q-card-section",{staticClass:"q-pa-none fit"},[s("calendar-desktop")],1)],1)],1),s("div",{staticClass:"col-xl-3 col-md-4 col-sm-6 col-xs-6 q-pa-xs"},[t.userCategories&&t.userInfo?s("q-card",{staticClass:"card-shadow full-height position-relative",attrs:{flat:""}},[s("q-card-section",{staticClass:"card-title"},[t._v("\n              Статистика:    \n            ")]),""!=t.userInfo.group.number?s("q-card-section",{staticClass:"row justify-center gradient-grey dashboard-statistic"},[s("div",{staticClass:"col text-center"},[s("span",{staticClass:"percent-value"},[t._v(t._s(t.userInfo.progress_percents))]),s("span",{staticClass:"percent-symbol"},[t._v("%")]),s("div",{staticClass:"percent-desc"},[t._v("Теории"),s("br"),t._v("освоено")])]),s("div",{staticClass:"col text-center"},[s("span",{staticClass:"percent-value"},[t._v(t._s(t.userInfo.completed_drive_percents))]),s("span",{staticClass:"percent-symbol"},[t._v("%")]),s("div",{staticClass:"percent-desc"},[t._v("Вождений"),s("br"),t._v("пройдено")])]),t.userInfo.group.date_gibdd_exam?s("div",{staticClass:"col text-center"},[s("span",{staticClass:"percent-value"},[t._v(t._s(t.dayExGibdd.days>0?t.dayExGibdd.days:0))]),s("span",{staticClass:"percent-symbol"},[t._v(","+t._s(t.dayExGibdd.float))]),s("div",{staticClass:"percent-desc"},[t._v("Дней до"),s("br"),t._v("экзамена")])]):t._e()]):t._e(),""==t.userInfo.group.number?s("q-card-section",{staticClass:"fit flex flex-center text-center"},[s("div",{staticClass:"text-h5 text-grey-5",staticStyle:{"margin-top":"-60px"}},[t._v("Раздел в разработке...")])]):t._e(),""!=t.userInfo.group.number?s("q-card-section",{staticClass:"row q-pa-none dashboard-statistic"},[s("q-list",{staticClass:"full-width q-pa-none",attrs:{separator:""}},[s("q-item",[s("q-item-section",[s("q-item-label",{staticClass:"item-finance-desc"},[t._v("Сумма договора:")])],1),s("q-item-section",{attrs:{side:""}},[s("q-item-label",{staticClass:"item-finance-summ"},[t._v("\n                     "+t._s(t.numberWithSpaces(t.summ.acc_amount))+" "),s("span",{staticClass:"item-finance-currency"},[t._v("Р")])])],1)],1),s("q-item",[s("q-item-section",[s("q-item-label",{staticClass:"item-finance-desc"},[t._v("Задолженность:")])],1),s("q-item-section",{attrs:{side:""}},[s("q-item-label",{staticClass:"item-finance-summ"},[t._v("\n                      "+t._s(t.numberWithSpaces(t.summ.debt_amount))+" "),s("span",{staticClass:"item-finance-currency"},[t._v("Р")])])],1)],1),s("q-item",[s("q-item-section",[s("q-item-label",{staticClass:"item-finance-desc"},[t._v("Оплачено:")])],1),s("q-item-section",{attrs:{side:""}},[s("q-item-label",{staticClass:"item-finance-summ"},[t._v("\n                      "+t._s(t.numberWithSpaces(t.summ.paid_amount))+" "),s("span",{staticClass:"item-finance-currency"},[t._v("Р")])])],1)],1),t.summ.past_debt_amount>0?s("q-item",[s("q-item-section",{staticClass:"q-pa-none",staticStyle:{"min-width":"30px"},attrs:{avatar:""}},[s("span",{staticClass:"attention-item"},[t._v("!")])]),s("q-item-section",[s("q-item-label",{staticClass:"item-finance-desc"},[t._v("\n                      Просроченный платеж:\n                    ")])],1),s("q-item-section",{attrs:{side:""}},[s("q-item-label",{staticClass:"item-finance-summ"},[t._v("\n                      "+t._s(t.numberWithSpaces(t.summ.past_debt_amount))+" "),s("span",{staticClass:"item-finance-currency"},[t._v("Р")])])],1)],1):t._e()],1)],1):t._e()],1):t._e()],1)]),s("div",{staticClass:"row q-mt-lg"},[t.listLessons&&t.userInfo?s("div",{staticClass:"band"},[s("div",{staticClass:"band-caption"},["free"!=t.nextStep.stage?s("p",{staticClass:"title"},[s("span",[t._v("Мой прогресс:")]),t._v(" уроков завершено "+t._s(t.countCompleteLessons)+"/"+t._s(t.listLessons.length))]):t._e(),"free"==t.nextStep.stage?s("p",{staticClass:"title"},[s("span",[t._v("Сдано зачетов:")]),t._v(" "+t._s(t.countCompleteCredit)+"/"+t._s(t.listLessons.length))]):t._e()]),s("div",{staticClass:"swiper-slides"},[s("swiper",{ref:"lessons",staticClass:"swiper band-cards",attrs:{options:t.swiperOption}},t._l(t.listLessons,(function(e,a){return s("swiper-slide",{key:e.title,staticClass:"q-pt-lg q-pb-md"},[s("div",{staticClass:"item",class:{currentLesson:t.nextStage.stage&&e.id===t.nextStage.context.lesson_id||0==e.id,disabled:!e.view_allowed,"extra-btns":e.num_questions}},[s("div",{staticClass:"main"},[0!=e.id?s("div",{staticClass:"lesson-caption"},[e.number?s("p",{staticClass:"title"},[t._v("Урок #"+t._s(e.number))]):t._e(),e.view_allowed?s("div",{staticClass:"play-btn",on:{click:function(s){return t.routeToLesson(e)}}},[s("q-icon",{attrs:{name:"img:icons/Button_Watch.svg",size:"20px"}})],1):t._e()]):t._e(),e.title&&0!=e.id?s("p",{staticClass:"main-title ellipsis-3-lines"},[t._v(t._s(e.title))]):t._e(),e.title&&0==e.id?s("p",{staticClass:"main-title fit row items-center justify-center"},[s("span",{domProps:{innerHTML:t._s(e.title)}})]):t._e(),e.view_allowed?t._e():s("p",{staticClass:"main-desc"},[t._v(t._s(t.disabledLesson(e,a)))]),e.view_allowed?t._e():s("img",{staticClass:"lock-icon",attrs:{ondragstart:"return false",src:"icons/Dashboard_Lock.svg",alt:""}})]),0==e.id?s("div",{staticClass:"btns"},[s("button",{staticClass:"btn btn-pass btn-orange",on:{click:function(e){return t.goToGroupCredit()}}},[t._v("\n                      Сдать зачет  \n                    ")])]):t._e(),e.num_questions>0?s("div",{staticClass:"btns"},[s("button",{staticClass:"btn btn-train",attrs:{disabled:!e.train_allowed},on:{click:function(s){return t.goToTrain({id:e.id})}}},[t._v("\n                      Тренировка\n                    ")]),e.train_credit_completed?t._e():s("button",{staticClass:"btn btn-pass btn-orange",attrs:{disabled:!e.train_credit_allowed&&!e.train_credit_completed},on:{click:function(s){return t.goToCredit({id:e.id})}}},[t._v("\n                      Сдать зачет\n                    ")]),e.train_credit_completed?s("button",{staticClass:"btn btn-pass",attrs:{disabled:e.train_credit_completed}},[s("q-icon",{attrs:{name:"check",size:"20px"}}),t._v("\n                      Зачет сдан\n                    ")],1):t._e()]):t._e()])])})),1),s("div",{staticClass:"left-arrow",attrs:{slot:"button-prev"},slot:"button-prev"},[s("img",{attrs:{ondragstart:"return false",src:"icons/Arrow_Small.svg",alt:""}})]),s("div",{staticClass:"right-arrow",attrs:{slot:"button-next"},slot:"button-next"},[s("img",{attrs:{ondragstart:"return false",src:"icons/Arrow_Small.svg",alt:""}})]),s("div",{staticClass:"swiper-scrollbar",attrs:{slot:"scrollbar"},slot:"scrollbar"})],1)]):t._e()])])],1)},r=[],o=(s("4de4"),s("7db0"),s("c740"),s("e260"),s("d3b7"),s("e6cf"),s("3ca3"),s("ddb0"),s("6374")),c=s.n(o),l=s("ded3"),d=s.n(l),u=(s("bc3a"),s("2f62")),m=s("7212"),p=(s("a7a3"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"cardSchedule relative-position"},[t.currDate?s("div",{staticClass:"schedule-title"},[s("p",{staticClass:"title"},[t._v("Расписание:")]),s("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.sheduleHide,expression:"sheduleHide"}],staticClass:"btns",class:t.schedule.isOpen?"active":""},[s("div",{staticClass:"btn btn-current",on:{click:t.sheduleToggle}},[s("p",{staticClass:"title text-capitalize"},[t._v(t._s(t.getLabelDate(t.currDate)))]),s("div",{staticClass:"dots"},[t._v("\n          ...\n        ")])]),s("div",{staticClass:"extras"},t._l(t.schedulelist,(function(e){return s("div",{key:e.month+""+e.year,staticClass:"btn",on:{click:function(s){t.currDate=e,t.getDaysInMonthYear(),t.sheduleToggle()}}},[s("p",{staticClass:"title text-capitalize"},[t._v(t._s(t.getLabelDate(e)))])])})),0)])]):t._e(),s("div",{staticClass:"schedule-items-head",class:[t.loading?"loading":""]},[s("div",{staticClass:"item"},[t._v("Пн")]),s("div",{staticClass:"item"},[t._v("Вт")]),s("div",{staticClass:"item"},[t._v("Ср")]),s("div",{staticClass:"item"},[t._v("Чт")]),s("div",{staticClass:"item"},[t._v("Пт")]),s("div",{staticClass:"item"},[t._v("Сб")]),s("div",{staticClass:"item"},[t._v("Вс")])]),s("div",{staticClass:"row",class:[t.loading?"loading":""],staticStyle:{background:"linear-gradient(to bottom, #f3f4fa, 5%, #fff)",height:"calc(100% - 100px)"}},t._l(t.days,(function(e){return s("div",{key:e.date,staticClass:"row items-center justify-center day-schedule",class:{disabled:e.disabled},staticStyle:{width:"calc(100% / 7)","min-height":"17%"},attrs:{set:t.events=t.getEventsFromDay(e)}},[s("div",{staticClass:"row items-center justify-center fit",class:{currentDay:e.date==t.currentDay}},[t._v("\n        "+t._s(e.day)+"\n        "),e.disabled?t._e():s("div",{staticClass:"events row"},t._l(t.events.slice(0,3),(function(t){return s("div",{key:t.id,staticClass:"col event",class:t.type})})),0)]),t.events.length>0?s("q-menu",{attrs:{"content-class":"card-shadow normal"}},[s("q-list",t._l(t.events,(function(e){return s("q-item",{key:e.id},[s("q-item-section",{attrs:{side:""}},[s("div",{staticClass:"round-dot",class:e.type})]),s("q-item-section",{staticClass:"font-sspro-sr"},[t._v("\n              "+t._s(t.getEventTitle(e))+"\n            ")]),s("q-item-section",{staticClass:"font-sspro-sr",attrs:{side:""}},[t._v("\n              "+t._s(t.formatTime(e.startTime))+"\n            ")])],1)})),1)],1):t._e()],1)})),0),t.loading&&t.counterOfLoads>1?s("div",{staticClass:" row items-center justify-center absolute-full  loader"},[s("q-spinner-puff",{attrs:{color:"accent",size:"60px"}})],1):t._e()])}),f=[],v=(s("99af"),s("ac1f"),s("1276"),s("96cf"),s("c973")),h=s.n(v),g=s("c1df"),b=s.n(g),C=(s("957c"),s("e67d")),x=s.n(C),w={name:"CalendarDesktop",directives:{ClickOutside:x.a},data:function(){return{days:[],currDate:null,loading:!1,counterOfLoads:!1,schedule:{isOpen:!1,items:[]}}},methods:{getEventTitle:function(t){return"driving"===t.type?"Вождение":t.title},getEventsFromDay:function(t){var e=b()(t.date,"DD-MM-YYYY"),s=e.valueOf(),a=this.timeTables.find((function(t){return t.date===s})),i=a?a.events:[];return i=i.filter((function(t){return"driving"!==t.type||!t.is_free})),i},sheduleToggle:function(){this.schedule.isOpen=!this.schedule.isOpen},sheduleHide:function(){this.schedule.isOpen&&(this.schedule.isOpen=!1)},createParams:function(){var t=this.currDate.month,e=this.currDate.year,s=t&&e?b()(t+"-"+e,"MM-YYYY"):b()(),a=s.startOf("month").valueOf(),i=s.endOf("month").valueOf()+1,n={byMonth:!0,startTime:a,endTime:i,currCat:this.currCat};return n},loadTimeTablesTables:function(){var t=this;return h()(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,t.$store.dispatch("loadTimeTables",t.createParams());case 3:t.loading=!1,t.counterOfLoads+=1;case 5:case"end":return e.stop()}}),e)})))()},getLabelDate:function(t){return b()(t.month).format("MMMM")+" "+b()(t.year).format("YYYY")},getDaysInMonthYear:function(){for(var t=this.currDate.month,e=this.currDate.year,s=t&&e?b()(t+"-"+e,"MM-YYYY"):b()(),a=s.startOf("month"),i=s.daysInMonth(),n=b()(a).weekday(),r=[],o=1;o<=i;o++){var c=o<10?"0"+o:o,l=b()(c+"-"+s.format("MM")+"-"+s.format("YYYY"),"DD-MM-YYYY").format("DD-MM-YYYY");r.push({day:o,date:l,disabled:!1})}for(var d=b()(s.subtract(1,"months")),u=d.daysInMonth(),m=[],p=1;p<=u;p++){var f=p<10?"0"+p:p,v=b()(f+"-"+d.format("MM")+"-"+d.format("YYYY"),"DD-MM-YYYY").format("DD-MM-YYYY");m.push({day:p,date:v,disabled:!0})}for(var h=s.add(2,"M"),g=h.daysInMonth(),C=[],x=1;x<=g;x++){var w=x<10?"0"+x:x,y=b()(w+"-"+h.format("MM")+"-"+h.format("YYYY"),"DD-MM-YYYY").format("DD-MM-YYYY");C.push({day:x,date:y,disabled:!0})}var q=42-i-n,D=_.takeRight(m,n),I=r,Y=_.take(C,q);this.days=_.concat(D,I,Y)},formatTime:function(t){return b()(t).format("HH:mm")},checkIsTypeShedule:function(t,e){return b()(t).format("DD-MM-YYYY")==e},initDataPage:function(){this.userInfo&&(_.find(this.scheduleList,{type:"driving_exam"}).datetime=this.userInfo.group.date_driving_exam,_.find(this.scheduleList,{type:"internal_exam"}).datetime=this.userInfo.group.date_theory_exam,_.find(this.scheduleList,{type:"gibdd_exam"}).datetime=this.userInfo.group.date_gibdd_exam,this.scheduleList=_.orderBy(this.scheduleList,(function(t){return new Date(t.datetime)&&t.datetime}),["asc"]))}},computed:d()(d()({},Object(u["c"])(["userInfo","currCat"])),{},{timeTables:function(){var t=this.$store.getters.getTimeTables(this.createParams());return t||[]},schedulelist:function(){var t=this;this.timeTables;return _.filter(this.schedule.items,(function(e){return e!=t.currDate}))},currentDay:function(){return b()().format("DD-MM-YYYY")}}),watch:{userInfo:function(t){this.initDataPage()},currDate:function(){this.loadTimeTablesTables()},currCat:function(){this.loadTimeTablesTables()}},mounted:function(){this.schedule.items=[];for(var t=-1;t<=3;t++){var e=b()().add(t,"M").format("MM.YYYY");this.schedule.items.push({month:e.split(".")[0],year:e.split(".")[1]})}this.currDate=this.schedule.items[1],this.getDaysInMonthYear(),this.initDataPage()}},y=w,q=(s("b981"),s("2877")),D=s("4e73"),I=s("1c1c"),Y=s("66e5"),L=s("4074"),S=s("06d5"),k=s("eebe"),M=s.n(k),T=Object(q["a"])(y,p,f,!1,null,null,null),P=T.exports;M()(T,"components",{QMenu:D["a"],QList:I["a"],QItem:Y["a"],QItemSection:L["a"],QSpinnerPuff:S["a"]});var E=s("9f3a"),O={name:"DashboardDesktop",components:{Swiper:m["Swiper"],SwiperSlide:m["SwiperSlide"],CalendarDesktop:P,PageLoader:E["a"]},data:function(){return{pageIsLoad:!1,swiperOption:{slidesPerView:4,slidesPerGroup:4,spaceBetween:10,slidesPerColumn:1,direction:"horizontal",scrollbar:{el:".swiper-scrollbar",dragClass:"swiper-scrollbar-drag scroll-drag"},navigation:{nextEl:".right-arrow",prevEl:".left-arrow"},breakpoints:{1170:{slidesPerView:4,slidesPerGroup:4},890:{slidesPerView:3,slidesPerGroup:3},550:{slidesPerView:2,slidesPerGroup:2}}}}},methods:d()(d()({},Object(u["b"])(["authToken","setToken","getUserInfo","setUserInfo","refreshToken","sendResults"])),{},{goToGroupCredit:function(){this.$router.push(this.nextStep.url)},goToTrain:function(t){this.$router.push("/training/".concat(t.id))},goToCredit:function(t){this.$router.push("/credit/".concat(t.id))},routeToLesson:function(t){this.$router.push({path:"/lessons/".concat(t.id)})},disabledLesson:function(t,e){return this.listLessons[e-1].train_credit_completed&&!t.view_allowed?"Сдайте зачёт по трём предыдущим темам":this.listLessons[e-1].train_credit_completed||t.view_allowed?"":"Сдайте зачет по уроку #".concat(t.number-1)},initDataPage:function(){var t=this;this.pageIsLoad=!0;var e=this.getNextStage({}),s=this.getListLessons({});Promise.all([s,e]).then((function(e){t.pageIsLoad=!1,t.$nextTick((function(){var s=_.findIndex(e[0].data,(function(e){return t.nextStage.context.hasOwnProperty("lesson_id")&&e.id==t.nextStage.context.lesson_id||0==e.id}));setTimeout((function(){t.$refs.hasOwnProperty("lessons")&&t.$refs.lessons.$swiper&&t.$refs.lessons.$swiper.slideTo(-1!=s?s:0,300)}),500)}))}))},shuffle:function(t){var e,s,a=t.length;if(a)while(--a)s=Math.floor(Math.random()*(a+1)),e=t[s],t[s]=t[a],t[a]=e;return t},randomLesson:function(){var t,e=[],s=c()(this.listLessons);try{for(s.s();!(t=s.n()).done;){var a=t.value;0!=a.id&&a.train_allowed&&e.push(a.id)}}catch(n){s.e(n)}finally{s.f()}var i=this.shuffle(e)[0];this.$router.push("/training/"+i)}}),computed:d()(d()({},Object(u["c"])(["userInfo","token","userCategories","coursesPurched","currCat","listLessons","salesList"])),{},{countCompleteLessons:function(){return _.filter(this.listLessons,(function(t){return t.view_allowed})).length},countCompleteCredit:function(){return _.filter(this.listLessons,(function(t){return t.train_credit_completed})).length},dayExGibdd:function(){var t=b()(this.userInfo.group.date_gibdd_exam),e=b()(),s=b.a.duration(t.diff(e)).asDays();return{days:parseInt(s),float:0}},notPurshedCourses:function(){var t=[];if(!this.coursesPurched)return t;var e,s=c()(this.categoriesAll);try{for(s.s();!(e=s.n()).done;){var a=e.value;_.find(this.coursesPurched,{category:a})||t.push(a)}}catch(i){s.e(i)}finally{s.f()}return t},summ:function(){var t,e=0,s=0,a=0,i=0,n=c()(this.salesList);try{for(n.s();!(t=n.n()).done;){var r=t.value;e+=r.acc_amount,s+=r.paid_amount,a+=r.debt_amount,i+=Math.abs(r.past_debt_amount)}}catch(o){n.e(o)}finally{n.f()}return{acc_amount:e,paid_amount:s,debt_amount:a,past_debt_amount:-i}},mainSale:function(){return _.find(this.salesList,(function(t){return t.tariff.is_main}))}}),watch:{userInfo:function(t){this.initDataPage()}},mounted:function(){this.pageIsLoad=!0,this.userInfo&&this.initDataPage()}},$=O,j=s("9989"),N=s("f09f"),Q=s("a370"),z=s("eb85"),B=s("9c40"),G=s("0016"),W=s("0170"),F=Object(q["a"])($,n,r,!1,null,null,null),H=F.exports;M()(F,"components",{QPage:j["a"],QCard:N["a"],QCardSection:Q["a"],QSeparator:z["a"],QBtn:B["a"],QIcon:G["a"],QList:I["a"],QItem:Y["a"],QItemSection:L["a"],QItemLabel:W["a"]});var R=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-page",[s("page-loader",{attrs:{state:t.pageIsLoad}}),s("div",{staticClass:"font-exo2-m mobile-content"},[t.userInfo?s("q-card",{staticClass:"dashboard transparent",staticStyle:{"border-radius":"0 !important"},attrs:{flat:""}},[s("q-card-section",{staticClass:"row items-center q-pa-none header-top relative-position"},[t.showCategories?s("div",{staticClass:"categories-block categories-fixed row items-center"},[t._l(t.categoriesAll,(function(e){return s("div",{staticClass:"item relative-position",class:{active:e==t.currCat},on:{click:function(s){return t.setCategory(e)}}},[t._v("\n            "+t._s(e)+"\n            ")])})),s("div",{staticClass:"item back",on:{click:function(e){t.showCategories=!1}}},[s("img",{staticClass:"q-mr-md",attrs:{src:"icons/cat_back.svg"}})])],2):t._e(),s("div",{staticClass:"row items-center col-auto justify-center drive-theory",on:{click:function(e){t.showCategories=!0}}},[s("div",{staticClass:"btn-category"},[s("span",[t._v(t._s(t.currCat))])]),t.userInfo&&t.userInfo.group.number?s("div",{staticClass:"group_number_id q-mt-md ellipsis full-width"},[t._v("\n            Группа: "),s("b",[t._v(t._s(t.userInfo.group.number))])]):t._e()]),s("div",{staticClass:"col flex justify-center hello"},[t._v("\n          Приветствуем,"),s("br"),s("b",[t._v(t._s(t.userInfo.first_name)+"!")])]),s("div",{staticClass:"row items-center col-auto justify-center drive-theory"},[t.userInfo.id?s("div",{staticClass:"group_number_id full-width"},[t._v("\n            ID: "),s("b",[t._v(t._s(t.userInfo.id))])]):t._e()])]),s("q-card-section",{staticClass:"row items-center q-pa-none avatar-zone"},[s("div",{staticClass:"row items-center col-auto justify-center drive-theory"},[s("div",[s("div",{staticClass:"progress_perc text-accent"},[t._v(t._s(t.userInfo.completed_drive_percents)+"%")]),s("div",{staticClass:"progress_text text-dark q-mt-xs"},[t._v("Пройдено"),s("br"),t._v("вождений")])])]),s("div",{staticClass:"col row justify-center"},[s("div",{staticClass:"user-avatar mobile",staticStyle:{position:"absolute",top:"-5px"}},[s("div",{staticClass:"avatar-img",style:{"background-image":"url("+t.srcAvatar+")"}}),s("div",{staticStyle:{position:"absolute","z-index":"1","margin-top":"1px",left:"-14px",transform:"scaleX(0.95)","transform-origin":"center"}},[s("vue-ellipse-progress",{attrs:{progress:t.userInfo.completed_drive_percents,line:"square",color:"#F44B2F","empty-color":"#DDDFEB",size:127,thickness:5,"empty-thickness":5,legend:!1,noData:!(t.userInfo.completed_drive_percents>0),half:""}})],1),s("div",{staticStyle:{position:"absolute","z-index":"1","margin-top":"1px",right:"-14px",transform:"scaleX(0.95)","transform-origin":"center"}},[s("vue-ellipse-progress",{attrs:{reverse:"",progress:t.userInfo.progress_percents,line:"square",color:"#404151","empty-color":"#DDDFEB",size:127,thickness:5,"empty-thickness":5,legend:!1,noData:!(t.userInfo.progress_percents>0),half:""}})],1)])]),s("div",{staticClass:"row items-center col-auto justify-center drive-theory"},[s("div",[s("div",{staticClass:"progress_perc text-dark"},[t._v(t._s(t.userInfo.progress_percents)+"%")]),s("div",{staticClass:"progress_text text-dark q-mt-xs"},[t._v("Освоено"),s("br"),t._v("теории")])])])]),s("q-card-section",{staticClass:"row q-mt-sm"},[s("div",{staticClass:"col text-center row self-end justify-center noty-mess",on:{click:function(e){return t.$router.push("/mailings")}}},[t.countNewMailings>0?s("div",{staticClass:"noty-dot"}):t._e(),s("div",{staticClass:"full-width"},[s("q-icon",{attrs:{name:"img:icons/"+(t.countNewMailings>0?"TopBar_Notifications_NEW.svg":"TopBar_Notifications_G.svg"),size:"24px"}})],1),s("div",{staticClass:"noty-text q-pt-sm"},[t._v("Уведомления")]),s("div",{staticClass:"noty-subtext",class:{"text-accent":t.countNewMailings>0}},[s("span",{},[t._v(t._s(t.countNewMailings>0?t.countNewMailings:"нет")+" новых")])])]),s("div",{staticClass:"col text-center row self-end justify-center",on:{click:function(e){return t.$router.push("/settings")}}},[s("div",{staticClass:"full-width"},[s("q-icon",{attrs:{name:"img:icons/mobile_profile.svg",size:"24px"}})],1),s("div",{staticClass:"noty-text q-pt-sm full-width"},[t._v("Мой профиль")])]),s("div",{staticClass:"col text-center row self-end justify-center noty-mess",on:{click:function(e){return t.$router.push("/messages")}}},[t.all_unreaded_message_count>0?s("div",{staticClass:"noty-dot"}):t._e(),s("div",{staticClass:"full-width"},[s("q-icon",{attrs:{name:"img:icons/"+(0==t.all_unreaded_message_count?"Mobile_mess_none.svg":"Mobile_mess_new.svg"),size:"24px"}})],1),s("div",{staticClass:"noty-text q-pt-sm"},[t._v("Сообщения")]),s("div",{staticClass:"noty-subtext",class:{"text-accent":t.all_unreaded_message_count>0}},[s("span",{},[t._v(t._s(t.all_unreaded_message_count>0?t.all_unreaded_message_count:"нет")+" новых")])])])]),s("q-card-section",[s("div",{staticClass:"panel_next_training row items-center"},[s("div",{staticClass:"title"},[t._v("Следующий шаг обучения:")]),s("div",{staticClass:"desc",staticStyle:{"max-width":"calc(100vw - 130px)"}},[t._v("\n            "+t._s(t.nextStep.title||"")),s("br"),t._v(t._s(t.nextStep.subtitle||"")+"\n          ")]),s("q-btn",{staticClass:"btn_next_training",attrs:{flat:"",dense:"",round:"",to:t.nextStep.url}},[s("img",{attrs:{src:"icons/mobile_next.png"}})])],1)]),t.nearestEventsWithTime.length>0?s("q-card-section",{staticClass:"row items-center q-pt-none"},[s("div",{staticClass:"full-width row items-center q-pb-md"},[s("div",{staticClass:"col-auto q-ml-lg"},[t._v("Ближайшие события:")]),s("q-btn",{staticClass:"col q-mr-lg text-right text-accent items-center",attrs:{to:{name:"schedule.main"},flat:"","no-caps":"",padding:"0",align:"right"}},[t._v("Расписание\n            "),s("q-icon",{staticClass:"q-ml-sm",attrs:{right:"",name:"img:icons/schedule.svg",size:"10px"}})],1)],1),s("nearest-events-list-mobile",{staticClass:"nearest-events-list",attrs:{"show-header":!1,"show-only-with-time":!0}})],1):t._e()],1):t._e()],1)],1)},A=[],V=s("3b90"),J={components:{NearestEventsListMobile:V["a"],PageLoader:E["a"]},data:function(){return{pageIsLoad:!1,showCategories:!1,lastContactID:null,avatar_null:"img/empty-avatar.png",nearestEventsIsLoading:!1}},computed:d()(d()({},Object(u["c"])(["userInfo","currCat","nearestEventsWithTime"])),{},{canShowNearestEvents:function(){return this.userInfo&&this.userInfo.group.number}}),watch:{canShowNearestEvents:function(t){this.canShowNearestEvents&&this.loadNearestEvents()},currCat:function(t){this.canShowNearestEvents&&this.loadNearestEvents()},showCategories:function(t){this.backdrop=t},userInfo:function(t){this.initDataPage()}},methods:{loadNearestEvents:function(){var t=this;return h()(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.nearestEventsIsLoading=!0,e.next=3,t.$store.dispatch("loadNearestEvents",t.currCat);case 3:t.nearestEventsIsLoading=!1;case 4:case"end":return e.stop()}}),e)})))()},setCategory:function(t){var e=this;this.showCategories=!1,this.pageIsLoad=!0,this.getClientByCategory(t,!0).then((function(t){e.pageIsLoad=!1}))},initDataPage:function(){this.userInfo&&(_.find(this.scheduleList,{type:"driving_exam"}).datetime=this.userInfo.group.date_driving_exam,_.find(this.scheduleList,{type:"internal_exam"}).datetime=this.userInfo.group.date_theory_exam,_.find(this.scheduleList,{type:"gibdd_exam"}).datetime=this.userInfo.group.date_gibdd_exam,this.scheduleList=_.orderBy(this.scheduleList,(function(t){return new Date(t.datetime)&&t.datetime}),["asc"]))}},mounted:function(){this.backdrop=!1,this.initDataPage(),this.canShowNearestEvents&&this.loadNearestEvents()}},U=J,X=(s("b303"),Object(q["a"])(U,R,A,!1,null,null,null)),K=X.exports;M()(X,"components",{QPage:j["a"],QCard:N["a"],QCardSection:Q["a"],QIcon:G["a"],QBtn:B["a"]});var Z={name:"Dashboard",components:{DashboardDesktop:H,DashboardMobile:K}},tt=Z,et=Object(q["a"])(tt,a,i,!1,null,null,null);e["default"]=et.exports;M()(et,"components",{QPage:j["a"]})}}]);