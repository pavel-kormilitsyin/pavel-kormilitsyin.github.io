(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[33],{"8d1a":function(t,s,a){"use strict";a.r(s);var e=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("q-page",[a("q-card",{staticClass:"lessons transparent",staticStyle:{"border-radius":"0 !important"},attrs:{flat:""}},[a("q-card-section",{staticClass:"lesson-top relative-position full-width"},[a("div",{staticClass:"row items-center"},[a("div",{staticClass:"col"},[a("div",{staticClass:"lesson-title"},[t._v("Сообщения")])])]),a("div",{staticClass:"row q-mt-md"},[a("div",{staticClass:"col text-left"},[a("div",{staticClass:"lesson-subtitle"},[a("div",[t._v("Новых:\n              "),t.all_unreaded_message_count>0?a("b",{staticClass:"text-accent"},[t._v(t._s(t.all_unreaded_message_count))]):t._e(),0==t.all_unreaded_message_count?a("b",[t._v("Нет")]):t._e()])])])])])],1),t.listContacts.length>0?a("q-card",{attrs:{flat:""}},[a("q-card-section",[a("div",{staticClass:"messages-mobile"},[a("div",{staticClass:"messages-folder"},[a("div",{staticClass:"messages-topSide"},[a("div",{staticClass:"messages-types"},t._l(t.listContacts,(function(s){return a("div",{staticClass:"messages-types-item",class:{active:t.currContactID==s.id},on:{click:function(a){t.currContactID=s.id}}},[a("div",{staticClass:"messages-types-item-text font-exo2-m q-pl-sm q-pr-sm"},[t._v("\n                "+t._s(s.full_name)+"\n                ")]),s.unreaded_message_count>0?a("div",{staticClass:"amount"},[t._v(t._s(s.unreaded_message_count))]):t._e()])})),0),a("div",{staticClass:"user"},[a("div",{staticClass:"user-avatar"},[a("img",{attrs:{src:t.currContact&&t.currContact.avatar?t.origin+"/"+t.currContact.avatar:t.avatar_null,alt:""}})]),a("div",{staticClass:"user-username"},[t._v("\n                "+t._s(t.currContact&&t.currContact.full_name?t.currContact.full_name:"-")+"\n              ")]),a("div",{staticClass:"user-status"},[a("span",{staticClass:"online"},[a("span",{staticClass:"bg"})]),a("p",{staticClass:"text"},[t._v("На связи")])])])]),a("div",[a("chat",{ref:"chat_group",attrs:{mobile:!0,height:t.chatHeight}})],1)])])])],1):t._e(),a("q-resize-observer",{on:{resize:t.resizePage}})],1)},i=[],n=a("ded3"),c=a.n(n),r=a("2f62"),o=a("4476"),l=a("9420"),u=a("dafb"),d=a("9d0b"),v=a("9ce6"),h=a("e6b0");o["a"].registerPlugin(l["a"],u["a"],d["a"],v["a"]);var C={components:{Chat:h["a"]},data:function(){return{chatHeight:0}},methods:{resizePage:function(){void 0!=this.$refs.chat_group&&(this.chatHeight=window.innerHeight-this.$refs.chat_group.$el.getBoundingClientRect().top-(this.showNavMobile?80:0))},initDataPage:function(){this.currContactID=this.listContacts[0].id,this.resizePage()}},computed:c()(c()({},Object(r["c"])(["currCat","origin","listContacts","showNavMobile"])),{},{currContactID:{get:function(){return this.$store.state.auth.currContactID},set:function(t){this.$store.commit("setCurrContactID",t)}}}),watch:{chatIsFullHeight:function(t){var s=this;this.$nextTick((function(){s.resizePage()})),t&&void 0!=this.$refs.vp&&this.$refs.vp.vimeoPlayer.pause()},userInfo:function(){this.initDataPage()},currContactID:function(){var t=this;this.$nextTick((function(){t.resizePage()}))},showNavMobile:function(){var t=this;this.$nextTick((function(){t.resizePage()}))}},mounted:function(){this.userInfo&&this.initDataPage()},beforeRouteLeave:function(t,s,a){this.currContactID=null,this.socketApp.send(JSON.stringify({command:"interlocutor",content:null})),a()}},f=C,g=a("2877"),m=a("9989"),_=a("f09f"),p=a("a370"),b=a("3980"),w=a("eebe"),P=a.n(w),D=Object(g["a"])(f,e,i,!1,null,null,null);s["default"]=D.exports;P()(D,"components",{QPage:m["a"],QCard:_["a"],QCardSection:p["a"],QResizeObserver:b["a"]})}}]);